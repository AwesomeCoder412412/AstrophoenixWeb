(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function JC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var mE={exports:{}},hh={},gE={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Symbol.for("react.element"),ZC=Symbol.for("react.portal"),ek=Symbol.for("react.fragment"),tk=Symbol.for("react.strict_mode"),nk=Symbol.for("react.profiler"),rk=Symbol.for("react.provider"),sk=Symbol.for("react.context"),ik=Symbol.for("react.forward_ref"),ok=Symbol.for("react.suspense"),ak=Symbol.for("react.memo"),lk=Symbol.for("react.lazy"),D_=Symbol.iterator;function uk(t){return t===null||typeof t!="object"?null:(t=D_&&t[D_]||t["@@iterator"],typeof t=="function"?t:null)}var yE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_E=Object.assign,wE={};function lo(t,e,n){this.props=t,this.context=e,this.refs=wE,this.updater=n||yE}lo.prototype.isReactComponent={};lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vE(){}vE.prototype=lo.prototype;function pm(t,e,n){this.props=t,this.context=e,this.refs=wE,this.updater=n||yE}var mm=pm.prototype=new vE;mm.constructor=pm;_E(mm,lo.prototype);mm.isPureReactComponent=!0;var L_=Array.isArray,EE=Object.prototype.hasOwnProperty,gm={current:null},IE={key:!0,ref:!0,__self:!0,__source:!0};function SE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)EE.call(e,r)&&!IE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ml,type:t,key:i,ref:o,props:s,_owner:gm.current}}function ck(t,e){return{$$typeof:ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===ml}function hk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var M_=/\/+/g;function Ad(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hk(""+t.key):e.toString(36)}function ku(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ml:case ZC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ad(o,0):r,L_(s)?(n="",t!=null&&(n=t.replace(M_,"$&/")+"/"),ku(s,e,n,"",function(c){return c})):s!=null&&(ym(s)&&(s=ck(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(M_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",L_(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Ad(i,a);o+=ku(i,e,n,u,s)}else if(u=uk(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Ad(i,a++),o+=ku(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ql(t,e,n){if(t==null)return t;var r=[],s=0;return ku(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},xu={transition:null},fk={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:xu,ReactCurrentOwner:gm};function TE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Ql,forEach:function(t,e,n){Ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ql(t,function(){e++}),e},toArray:function(t){return Ql(t,function(e){return e})||[]},only:function(t){if(!ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=lo;he.Fragment=ek;he.Profiler=nk;he.PureComponent=pm;he.StrictMode=tk;he.Suspense=ok;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fk;he.act=TE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_E({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)EE.call(e,u)&&!IE.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ml,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:sk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rk,_context:t},t.Consumer=t};he.createElement=SE;he.createFactory=function(t){var e=SE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:ik,render:t}};he.isValidElement=ym;he.lazy=function(t){return{$$typeof:lk,_payload:{_status:-1,_result:t},_init:dk}};he.memo=function(t,e){return{$$typeof:ak,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=xu.transition;xu.transition={};try{t()}finally{xu.transition=e}};he.unstable_act=TE;he.useCallback=function(t,e){return Nt.current.useCallback(t,e)};he.useContext=function(t){return Nt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Nt.current.useEffect(t,e)};he.useId=function(){return Nt.current.useId()};he.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Nt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};he.useRef=function(t){return Nt.current.useRef(t)};he.useState=function(t){return Nt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Nt.current.useTransition()};he.version="18.3.1";gE.exports=he;var O=gE.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=O,mk=Symbol.for("react.element"),gk=Symbol.for("react.fragment"),yk=Object.prototype.hasOwnProperty,_k=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wk={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yk.call(e,r)&&!wk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mk,type:t,key:i,ref:o,props:s,_owner:_k.current}}hh.Fragment=gk;hh.jsx=AE;hh.jsxs=AE;mE.exports=hh;var N=mE.exports,RE={exports:{}},Zt={},CE={exports:{}},kE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,G){var se=W.length;W.push(G);e:for(;0<se;){var de=se-1>>>1,Ie=W[de];if(0<s(Ie,G))W[de]=G,W[se]=Ie,se=de;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var G=W[0],se=W.pop();if(se!==G){W[0]=se;e:for(var de=0,Ie=W.length,Bt=Ie>>>1;de<Bt;){var X=2*(de+1)-1,K=W[X],_e=X+1,Me=W[_e];if(0>s(K,se))_e<Ie&&0>s(Me,K)?(W[de]=Me,W[_e]=se,de=_e):(W[de]=K,W[X]=se,de=X);else if(_e<Ie&&0>s(Me,se))W[de]=Me,W[_e]=se,de=_e;else break e}}return G}function s(W,G){var se=W.sortIndex-G.sortIndex;return se!==0?se:W.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,p=3,g=!1,S=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(W){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=W)r(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(c)}}function b(W){if(T=!1,v(W),!S)if(n(u)!==null)S=!0,mt(M);else{var G=n(c);G!==null&&Rt(b,G.startTime-W)}}function M(W,G){S=!1,T&&(T=!1,E(w),w=-1),g=!0;var se=p;try{for(v(G),f=n(u);f!==null&&(!(f.expirationTime>G)||W&&!R());){var de=f.callback;if(typeof de=="function"){f.callback=null,p=f.priorityLevel;var Ie=de(f.expirationTime<=G);G=t.unstable_now(),typeof Ie=="function"?f.callback=Ie:f===n(u)&&r(u),v(G)}else r(u);f=n(u)}if(f!==null)var Bt=!0;else{var X=n(c);X!==null&&Rt(b,X.startTime-G),Bt=!1}return Bt}finally{f=null,p=se,g=!1}}var F=!1,_=null,w=-1,A=5,C=-1;function R(){return!(t.unstable_now()-C<A)}function P(){if(_!==null){var W=t.unstable_now();C=W;var G=!0;try{G=_(!0,W)}finally{G?x():(F=!1,_=null)}}else F=!1}var x;if(typeof y=="function")x=function(){y(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ee=ie.port2;ie.port1.onmessage=P,x=function(){Ee.postMessage(null)}}else x=function(){k(P,0)};function mt(W){_=W,F||(F=!0,x())}function Rt(W,G){w=k(function(){W(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,mt(M))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var se=p;p=G;try{return W()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=p;p=W;try{return G()}finally{p=se}},t.unstable_scheduleCallback=function(W,G,se){var de=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?de+se:de):se=de,W){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=se+Ie,W={id:h++,callback:G,priorityLevel:W,startTime:se,expirationTime:Ie,sortIndex:-1},se>de?(W.sortIndex=se,e(c,W),n(u)===null&&W===n(c)&&(T?(E(w),w=-1):T=!0,Rt(b,se-de))):(W.sortIndex=Ie,e(u,W),S||g||(S=!0,mt(M))),W},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(W){var G=p;return function(){var se=p;p=G;try{return W.apply(this,arguments)}finally{p=se}}}})(kE);CE.exports=kE;var vk=CE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek=O,Jt=vk;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xE=new Set,Fa={};function ti(t,e){Qi(t,e),Qi(t+"Capture",e)}function Qi(t,e){for(Fa[t]=e,t=0;t<e.length;t++)xE.add(e[t])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,Ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V_={},F_={};function Sk(t){return kf.call(F_,t)?!0:kf.call(V_,t)?!1:Ik.test(t)?F_[t]=!0:(V_[t]=!0,!1)}function Tk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ak(t,e,n,r){if(e===null||typeof e>"u"||Tk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function wm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_m,wm);dt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_m,wm);dt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_m,wm);dt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function vm(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ak(e,n,s,r)&&(n=null),r||s===null?Sk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Er=Ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),Em=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),PE=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),bf=Symbol.for("react.suspense"),Pf=Symbol.for("react.suspense_list"),Sm=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),NE=Symbol.for("react.offscreen"),$_=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=$_&&t[$_]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Rd;function Jo(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Cd=!1;function kd(t,e){if(!t||Cd)return"";Cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jo(t):""}function Rk(t){switch(t.tag){case 5:return Jo(t.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ai:return"Fragment";case Ti:return"Portal";case xf:return"Profiler";case Em:return"StrictMode";case bf:return"Suspense";case Pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PE:return(t.displayName||"Context")+".Consumer";case bE:return(t._context.displayName||"Context")+".Provider";case Im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sm:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function Ck(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===Em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kk(t){var e=OE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xl(t){t._valueTracker||(t._valueTracker=kk(t))}function DE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Of(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LE(t,e){e=e.checked,e!=null&&vm(t,"checked",e,!1)}function Df(t,e){LE(t,e);var n=ns(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lf(t,e.type,ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function j_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lf(t,e,n){(e!=="number"||ac(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zo=Array.isArray;function $i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ns(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Zo(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ns(n)}}function ME(t,e){var n=ns(e.value),r=ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jl,FE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){xk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function $E(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function UE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$E(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bk=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(t,e){if(e){if(bk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function $f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function Tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,Ui=null,ji=null;function W_(t){if(t=_l(t)){if(typeof jf!="function")throw Error(j(280));var e=t.stateNode;e&&(e=gh(e),jf(t.stateNode,t.type,e))}}function jE(t){Ui?ji?ji.push(t):ji=[t]:Ui=t}function BE(){if(Ui){var t=Ui,e=ji;if(ji=Ui=null,W_(t),e)for(t=0;t<e.length;t++)W_(e[t])}}function zE(t,e){return t(e)}function WE(){}var xd=!1;function HE(t,e,n){if(xd)return t(e,n);xd=!0;try{return zE(t,e,n)}finally{xd=!1,(Ui!==null||ji!==null)&&(WE(),BE())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var r=gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Bf=!1;if(hr)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{Bf=!1}function Pk(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var _a=!1,lc=null,uc=!1,zf=null,Nk={onError:function(t){_a=!0,lc=t}};function Ok(t,e,n,r,s,i,o,a,u){_a=!1,lc=null,Pk.apply(Nk,arguments)}function Dk(t,e,n,r,s,i,o,a,u){if(Ok.apply(this,arguments),_a){if(_a){var c=lc;_a=!1,lc=null}else throw Error(j(198));uc||(uc=!0,zf=c)}}function ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function H_(t){if(ni(t)!==t)throw Error(j(188))}function Lk(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return H_(s),t;if(i===r)return H_(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function KE(t){return t=Lk(t),t!==null?GE(t):null}function GE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GE(t);if(e!==null)return e;t=t.sibling}return null}var QE=Jt.unstable_scheduleCallback,q_=Jt.unstable_cancelCallback,Mk=Jt.unstable_shouldYield,Vk=Jt.unstable_requestPaint,Ue=Jt.unstable_now,Fk=Jt.unstable_getCurrentPriorityLevel,Am=Jt.unstable_ImmediatePriority,YE=Jt.unstable_UserBlockingPriority,cc=Jt.unstable_NormalPriority,$k=Jt.unstable_LowPriority,XE=Jt.unstable_IdlePriority,dh=null,$n=null;function Uk(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(dh,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:zk,jk=Math.log,Bk=Math.LN2;function zk(t){return t>>>=0,t===0?32:31-(jk(t)/Bk|0)|0}var Zl=64,eu=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ea(a):(i&=o,i!==0&&(r=ea(i)))}else o=n&~s,o!==0?r=ea(o):i!==0&&(r=ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),s=1<<n,r|=t[n],e&=~s;return r}function Wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=Wk(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function JE(){var t=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Rm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function ZE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eI,Cm,tI,nI,rI,Hf=!1,tu=[],Wr=null,Hr=null,qr=null,ja=new Map,Ba=new Map,Lr=[],Kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(t,e){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(e.pointerId)}}function zo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_l(e),e!==null&&Cm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gk(t,e,n,r,s){switch(e){case"focusin":return Wr=zo(Wr,t,e,n,r,s),!0;case"dragenter":return Hr=zo(Hr,t,e,n,r,s),!0;case"mouseover":return qr=zo(qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ja.set(i,zo(ja.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ba.set(i,zo(Ba.get(i)||null,t,e,n,r,s)),!0}return!1}function sI(t){var e=Ps(t.target);if(e!==null){var n=ni(e);if(n!==null){if(e=n.tag,e===13){if(e=qE(n),e!==null){t.blockedOn=e,rI(t.priority,function(){tI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uf=r,n.target.dispatchEvent(r),Uf=null}else return e=_l(n),e!==null&&Cm(e),t.blockedOn=n,!1;e.shift()}return!0}function G_(t,e,n){bu(t)&&n.delete(e)}function Qk(){Hf=!1,Wr!==null&&bu(Wr)&&(Wr=null),Hr!==null&&bu(Hr)&&(Hr=null),qr!==null&&bu(qr)&&(qr=null),ja.forEach(G_),Ba.forEach(G_)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,Hf||(Hf=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,Qk)))}function za(t){function e(s){return Wo(s,t)}if(0<tu.length){Wo(tu[0],t);for(var n=1;n<tu.length;n++){var r=tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wr!==null&&Wo(Wr,t),Hr!==null&&Wo(Hr,t),qr!==null&&Wo(qr,t),ja.forEach(e),Ba.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)sI(n),n.blockedOn===null&&Lr.shift()}var Bi=Er.ReactCurrentBatchConfig,dc=!0;function Yk(t,e,n,r){var s=ve,i=Bi.transition;Bi.transition=null;try{ve=1,km(t,e,n,r)}finally{ve=s,Bi.transition=i}}function Xk(t,e,n,r){var s=ve,i=Bi.transition;Bi.transition=null;try{ve=4,km(t,e,n,r)}finally{ve=s,Bi.transition=i}}function km(t,e,n,r){if(dc){var s=qf(t,e,n,r);if(s===null)Ud(t,e,r,fc,n),K_(t,r);else if(Gk(s,t,e,n,r))r.stopPropagation();else if(K_(t,r),e&4&&-1<Kk.indexOf(t)){for(;s!==null;){var i=_l(s);if(i!==null&&eI(i),i=qf(t,e,n,r),i===null&&Ud(t,e,r,fc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ud(t,e,r,null,n)}}var fc=null;function qf(t,e,n,r){if(fc=null,t=Tm(r),t=Ps(t),t!==null)if(e=ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fc=t,null}function iI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fk()){case Am:return 1;case YE:return 4;case cc:case $k:return 16;case XE:return 536870912;default:return 16}default:return 16}}var jr=null,xm=null,Pu=null;function oI(){if(Pu)return Pu;var t,e=xm,n=e.length,r,s="value"in jr?jr.value:jr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Pu=s.slice(t,1<r?1-r:void 0)}function Nu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function Q_(){return!1}function en(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?nu:Q_,this.isPropagationStopped=Q_,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bm=en(uo),yl=De({},uo,{view:0,detail:0}),Jk=en(yl),Pd,Nd,Ho,fh=De({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ho&&(Ho&&t.type==="mousemove"?(Pd=t.screenX-Ho.screenX,Nd=t.screenY-Ho.screenY):Nd=Pd=0,Ho=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Nd}}),Y_=en(fh),Zk=De({},fh,{dataTransfer:0}),ex=en(Zk),tx=De({},yl,{relatedTarget:0}),Od=en(tx),nx=De({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=en(nx),sx=De({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ix=en(sx),ox=De({},uo,{data:0}),X_=en(ox),ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ux[t])?!!e[t]:!1}function Pm(){return cx}var hx=De({},yl,{key:function(t){if(t.key){var e=ax[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pm,charCode:function(t){return t.type==="keypress"?Nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dx=en(hx),fx=De({},fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J_=en(fx),px=De({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pm}),mx=en(px),gx=De({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yx=en(gx),_x=De({},fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wx=en(_x),vx=[9,13,27,32],Nm=hr&&"CompositionEvent"in window,wa=null;hr&&"documentMode"in document&&(wa=document.documentMode);var Ex=hr&&"TextEvent"in window&&!wa,aI=hr&&(!Nm||wa&&8<wa&&11>=wa),Z_=" ",ew=!1;function lI(t,e){switch(t){case"keyup":return vx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ri=!1;function Ix(t,e){switch(t){case"compositionend":return uI(e);case"keypress":return e.which!==32?null:(ew=!0,Z_);case"textInput":return t=e.data,t===Z_&&ew?null:t;default:return null}}function Sx(t,e){if(Ri)return t==="compositionend"||!Nm&&lI(t,e)?(t=oI(),Pu=xm=jr=null,Ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aI&&e.locale!=="ko"?null:e.data;default:return null}}var Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tx[t.type]:e==="textarea"}function cI(t,e,n,r){jE(r),e=pc(e,"onChange"),0<e.length&&(n=new bm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var va=null,Wa=null;function Ax(t){EI(t,0)}function ph(t){var e=xi(t);if(DE(e))return t}function Rx(t,e){if(t==="change")return e}var hI=!1;if(hr){var Dd;if(hr){var Ld="oninput"in document;if(!Ld){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),Ld=typeof nw.oninput=="function"}Dd=Ld}else Dd=!1;hI=Dd&&(!document.documentMode||9<document.documentMode)}function rw(){va&&(va.detachEvent("onpropertychange",dI),Wa=va=null)}function dI(t){if(t.propertyName==="value"&&ph(Wa)){var e=[];cI(e,Wa,t,Tm(t)),HE(Ax,e)}}function Cx(t,e,n){t==="focusin"?(rw(),va=e,Wa=n,va.attachEvent("onpropertychange",dI)):t==="focusout"&&rw()}function kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ph(Wa)}function xx(t,e){if(t==="click")return ph(e)}function bx(t,e){if(t==="input"||t==="change")return ph(e)}function Px(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:Px;function Ha(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kf.call(e,s)||!In(t[s],e[s]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sw(n)}}function fI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pI(){for(var t=window,e=ac();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ac(t.document)}return e}function Om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nx(t){var e=pI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fI(n.ownerDocument.documentElement,n)){if(r!==null&&Om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=iw(n,i);var o=iw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ox=hr&&"documentMode"in document&&11>=document.documentMode,Ci=null,Kf=null,Ea=null,Gf=!1;function ow(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gf||Ci==null||Ci!==ac(r)||(r=Ci,"selectionStart"in r&&Om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Ha(Ea,r)||(Ea=r,r=pc(Kf,"onSelect"),0<r.length&&(e=new bm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ci)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ki={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Md={},mI={};hr&&(mI=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function mh(t){if(Md[t])return Md[t];if(!ki[t])return t;var e=ki[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mI)return Md[t]=e[n];return t}var gI=mh("animationend"),yI=mh("animationiteration"),_I=mh("animationstart"),wI=mh("transitionend"),vI=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){vI.set(t,e),ti(e,[t])}for(var Vd=0;Vd<aw.length;Vd++){var Fd=aw[Vd],Dx=Fd.toLowerCase(),Lx=Fd[0].toUpperCase()+Fd.slice(1);hs(Dx,"on"+Lx)}hs(gI,"onAnimationEnd");hs(yI,"onAnimationIteration");hs(_I,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(wI,"onTransitionEnd");Qi("onMouseEnter",["mouseout","mouseover"]);Qi("onMouseLeave",["mouseout","mouseover"]);Qi("onPointerEnter",["pointerout","pointerover"]);Qi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function lw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dk(r,e,void 0,t),t.currentTarget=null}function EI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;lw(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;lw(s,a,c),i=u}}}if(uc)throw t=zf,uc=!1,zf=null,t}function Re(t,e){var n=e[Zf];n===void 0&&(n=e[Zf]=new Set);var r=t+"__bubble";n.has(r)||(II(e,t,2,!1),n.add(r))}function $d(t,e,n){var r=0;e&&(r|=4),II(n,t,r,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[su]){t[su]=!0,xE.forEach(function(n){n!=="selectionchange"&&(Mx.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,$d("selectionchange",!1,e))}}function II(t,e,n,r){switch(iI(e)){case 1:var s=Yk;break;case 4:s=Xk;break;default:s=km}n=s.bind(null,e,n,t),s=void 0,!Bf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ud(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ps(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}HE(function(){var c=i,h=Tm(n),f=[];e:{var p=vI.get(t);if(p!==void 0){var g=bm,S=t;switch(t){case"keypress":if(Nu(n)===0)break e;case"keydown":case"keyup":g=dx;break;case"focusin":S="focus",g=Od;break;case"focusout":S="blur",g=Od;break;case"beforeblur":case"afterblur":g=Od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Y_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mx;break;case gI:case yI:case _I:g=rx;break;case wI:g=yx;break;case"scroll":g=Jk;break;case"wheel":g=wx;break;case"copy":case"cut":case"paste":g=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=J_}var T=(e&4)!==0,k=!T&&t==="scroll",E=T?p!==null?p+"Capture":null:p;T=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,E!==null&&(b=Ua(y,E),b!=null&&T.push(Ka(y,b,v)))),k)break;y=y.return}0<T.length&&(p=new g(p,S,null,n,h),f.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Uf&&(S=n.relatedTarget||n.fromElement)&&(Ps(S)||S[dr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=c,S=S?Ps(S):null,S!==null&&(k=ni(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=c),g!==S)){if(T=Y_,b="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(T=J_,b="onPointerLeave",E="onPointerEnter",y="pointer"),k=g==null?p:xi(g),v=S==null?p:xi(S),p=new T(b,y+"leave",g,n,h),p.target=k,p.relatedTarget=v,b=null,Ps(h)===c&&(T=new T(E,y+"enter",S,n,h),T.target=v,T.relatedTarget=k,b=T),k=b,g&&S)t:{for(T=g,E=S,y=0,v=T;v;v=fi(v))y++;for(v=0,b=E;b;b=fi(b))v++;for(;0<y-v;)T=fi(T),y--;for(;0<v-y;)E=fi(E),v--;for(;y--;){if(T===E||E!==null&&T===E.alternate)break t;T=fi(T),E=fi(E)}T=null}else T=null;g!==null&&uw(f,p,g,T,!1),S!==null&&k!==null&&uw(f,k,S,T,!0)}}e:{if(p=c?xi(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=Rx;else if(tw(p))if(hI)M=bx;else{M=kx;var F=Cx}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=xx);if(M&&(M=M(t,c))){cI(f,M,n,h);break e}F&&F(t,p,c),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Lf(p,"number",p.value)}switch(F=c?xi(c):window,t){case"focusin":(tw(F)||F.contentEditable==="true")&&(Ci=F,Kf=c,Ea=null);break;case"focusout":Ea=Kf=Ci=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,ow(f,n,h);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":ow(f,n,h)}var _;if(Nm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ri?lI(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(aI&&n.locale!=="ko"&&(Ri||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ri&&(_=oI()):(jr=h,xm="value"in jr?jr.value:jr.textContent,Ri=!0)),F=pc(c,w),0<F.length&&(w=new X_(w,t,null,n,h),f.push({event:w,listeners:F}),_?w.data=_:(_=uI(n),_!==null&&(w.data=_)))),(_=Ex?Ix(t,n):Sx(t,n))&&(c=pc(c,"onBeforeInput"),0<c.length&&(h=new X_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=_))}EI(f,e)})}function Ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ua(t,n),i!=null&&r.unshift(Ka(t,i,s)),i=Ua(t,e),i!=null&&r.push(Ka(t,i,s))),t=t.return}return r}function fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Ua(n,i),u!=null&&o.unshift(Ka(n,u,a))):s||(u=Ua(n,i),u!=null&&o.push(Ka(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function cw(t){return(typeof t=="string"?t:""+t).replace(Vx,`
`).replace(Fx,"")}function iu(t,e,n){if(e=cw(e),cw(t)!==e&&n)throw Error(j(425))}function mc(){}var Qf=null,Yf=null;function Xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,$x=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(t){return hw.resolve(null).then(t).catch(jx)}:Jf;function jx(t){setTimeout(function(){throw t})}function jd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);za(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),Mn="__reactFiber$"+co,Ga="__reactProps$"+co,dr="__reactContainer$"+co,Zf="__reactEvents$"+co,Bx="__reactListeners$"+co,zx="__reactHandles$"+co;function Ps(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dw(t);t!==null;){if(n=t[Mn])return n;t=dw(t)}return e}t=n,n=t.parentNode}return null}function _l(t){return t=t[Mn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function gh(t){return t[Ga]||null}var ep=[],bi=-1;function ds(t){return{current:t}}function ke(t){0>bi||(t.current=ep[bi],ep[bi]=null,bi--)}function Te(t,e){bi++,ep[bi]=t.current,t.current=e}var rs={},St=ds(rs),Ft=ds(!1),Bs=rs;function Yi(t,e){var n=t.type.contextTypes;if(!n)return rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $t(t){return t=t.childContextTypes,t!=null}function gc(){ke(Ft),ke(St)}function fw(t,e,n){if(St.current!==rs)throw Error(j(168));Te(St,e),Te(Ft,n)}function SI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,Ck(t)||"Unknown",s));return De({},n,r)}function yc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rs,Bs=St.current,Te(St,t),Te(Ft,Ft.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=SI(t,e,Bs),r.__reactInternalMemoizedMergedChildContext=t,ke(Ft),ke(St),Te(St,t)):ke(Ft),Te(Ft,n)}var er=null,yh=!1,Bd=!1;function TI(t){er===null?er=[t]:er.push(t)}function Wx(t){yh=!0,TI(t)}function fs(){if(!Bd&&er!==null){Bd=!0;var t=0,e=ve;try{var n=er;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,yh=!1}catch(s){throw er!==null&&(er=er.slice(t+1)),QE(Am,fs),s}finally{ve=e,Bd=!1}}return null}var Pi=[],Ni=0,_c=null,wc=0,tn=[],nn=0,zs=null,tr=1,nr="";function Ss(t,e){Pi[Ni++]=wc,Pi[Ni++]=_c,_c=t,wc=e}function AI(t,e,n){tn[nn++]=tr,tn[nn++]=nr,tn[nn++]=zs,zs=t;var r=tr;t=nr;var s=32-vn(r)-1;r&=~(1<<s),n+=1;var i=32-vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,tr=1<<32-vn(e)+s|n<<s|r,nr=i+t}else tr=1<<i|n<<s|r,nr=t}function Dm(t){t.return!==null&&(Ss(t,1),AI(t,1,0))}function Lm(t){for(;t===_c;)_c=Pi[--Ni],Pi[Ni]=null,wc=Pi[--Ni],Pi[Ni]=null;for(;t===zs;)zs=tn[--nn],tn[nn]=null,nr=tn[--nn],tn[nn]=null,tr=tn[--nn],tn[nn]=null}var Yt=null,Qt=null,xe=!1,yn=null;function RI(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zs!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Qt=null,!0):!1;default:return!1}}function tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function np(t){if(xe){var e=Qt;if(e){var n=e;if(!mw(t,e)){if(tp(t))throw Error(j(418));e=Kr(n.nextSibling);var r=Yt;e&&mw(t,e)?RI(r,n):(t.flags=t.flags&-4097|2,xe=!1,Yt=t)}}else{if(tp(t))throw Error(j(418));t.flags=t.flags&-4097|2,xe=!1,Yt=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function ou(t){if(t!==Yt)return!1;if(!xe)return gw(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xf(t.type,t.memoizedProps)),e&&(e=Qt)){if(tp(t))throw CI(),Error(j(418));for(;e;)RI(t,e),e=Kr(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Yt?Kr(t.stateNode.nextSibling):null;return!0}function CI(){for(var t=Qt;t;)t=Kr(t.nextSibling)}function Xi(){Qt=Yt=null,xe=!1}function Mm(t){yn===null?yn=[t]:yn.push(t)}var Hx=Er.ReactCurrentBatchConfig;function qo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function au(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yw(t){var e=t._init;return e(t._payload)}function kI(t){function e(E,y){if(t){var v=E.deletions;v===null?(E.deletions=[y],E.flags|=16):v.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=Xr(E,y),E.index=0,E.sibling=null,E}function i(E,y,v){return E.index=v,t?(v=E.alternate,v!==null?(v=v.index,v<y?(E.flags|=2,y):v):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,v,b){return y===null||y.tag!==6?(y=Qd(v,E.mode,b),y.return=E,y):(y=s(y,v),y.return=E,y)}function u(E,y,v,b){var M=v.type;return M===Ai?h(E,y,v.props.children,b,v.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Or&&yw(M)===y.type)?(b=s(y,v.props),b.ref=qo(E,y,v),b.return=E,b):(b=$u(v.type,v.key,v.props,null,E.mode,b),b.ref=qo(E,y,v),b.return=E,b)}function c(E,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Yd(v,E.mode,b),y.return=E,y):(y=s(y,v.children||[]),y.return=E,y)}function h(E,y,v,b,M){return y===null||y.tag!==7?(y=$s(v,E.mode,b,M),y.return=E,y):(y=s(y,v),y.return=E,y)}function f(E,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Qd(""+y,E.mode,v),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yl:return v=$u(y.type,y.key,y.props,null,E.mode,v),v.ref=qo(E,null,y),v.return=E,v;case Ti:return y=Yd(y,E.mode,v),y.return=E,y;case Or:var b=y._init;return f(E,b(y._payload),v)}if(Zo(y)||jo(y))return y=$s(y,E.mode,v,null),y.return=E,y;au(E,y)}return null}function p(E,y,v,b){var M=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return M!==null?null:a(E,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yl:return v.key===M?u(E,y,v,b):null;case Ti:return v.key===M?c(E,y,v,b):null;case Or:return M=v._init,p(E,y,M(v._payload),b)}if(Zo(v)||jo(v))return M!==null?null:h(E,y,v,b,null);au(E,v)}return null}function g(E,y,v,b,M){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(v)||null,a(y,E,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yl:return E=E.get(b.key===null?v:b.key)||null,u(y,E,b,M);case Ti:return E=E.get(b.key===null?v:b.key)||null,c(y,E,b,M);case Or:var F=b._init;return g(E,y,v,F(b._payload),M)}if(Zo(b)||jo(b))return E=E.get(v)||null,h(y,E,b,M,null);au(y,b)}return null}function S(E,y,v,b){for(var M=null,F=null,_=y,w=y=0,A=null;_!==null&&w<v.length;w++){_.index>w?(A=_,_=null):A=_.sibling;var C=p(E,_,v[w],b);if(C===null){_===null&&(_=A);break}t&&_&&C.alternate===null&&e(E,_),y=i(C,y,w),F===null?M=C:F.sibling=C,F=C,_=A}if(w===v.length)return n(E,_),xe&&Ss(E,w),M;if(_===null){for(;w<v.length;w++)_=f(E,v[w],b),_!==null&&(y=i(_,y,w),F===null?M=_:F.sibling=_,F=_);return xe&&Ss(E,w),M}for(_=r(E,_);w<v.length;w++)A=g(_,E,w,v[w],b),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?w:A.key),y=i(A,y,w),F===null?M=A:F.sibling=A,F=A);return t&&_.forEach(function(R){return e(E,R)}),xe&&Ss(E,w),M}function T(E,y,v,b){var M=jo(v);if(typeof M!="function")throw Error(j(150));if(v=M.call(v),v==null)throw Error(j(151));for(var F=M=null,_=y,w=y=0,A=null,C=v.next();_!==null&&!C.done;w++,C=v.next()){_.index>w?(A=_,_=null):A=_.sibling;var R=p(E,_,C.value,b);if(R===null){_===null&&(_=A);break}t&&_&&R.alternate===null&&e(E,_),y=i(R,y,w),F===null?M=R:F.sibling=R,F=R,_=A}if(C.done)return n(E,_),xe&&Ss(E,w),M;if(_===null){for(;!C.done;w++,C=v.next())C=f(E,C.value,b),C!==null&&(y=i(C,y,w),F===null?M=C:F.sibling=C,F=C);return xe&&Ss(E,w),M}for(_=r(E,_);!C.done;w++,C=v.next())C=g(_,E,w,C.value,b),C!==null&&(t&&C.alternate!==null&&_.delete(C.key===null?w:C.key),y=i(C,y,w),F===null?M=C:F.sibling=C,F=C);return t&&_.forEach(function(P){return e(E,P)}),xe&&Ss(E,w),M}function k(E,y,v,b){if(typeof v=="object"&&v!==null&&v.type===Ai&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Yl:e:{for(var M=v.key,F=y;F!==null;){if(F.key===M){if(M=v.type,M===Ai){if(F.tag===7){n(E,F.sibling),y=s(F,v.props.children),y.return=E,E=y;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Or&&yw(M)===F.type){n(E,F.sibling),y=s(F,v.props),y.ref=qo(E,F,v),y.return=E,E=y;break e}n(E,F);break}else e(E,F);F=F.sibling}v.type===Ai?(y=$s(v.props.children,E.mode,b,v.key),y.return=E,E=y):(b=$u(v.type,v.key,v.props,null,E.mode,b),b.ref=qo(E,y,v),b.return=E,E=b)}return o(E);case Ti:e:{for(F=v.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(E,y.sibling),y=s(y,v.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=Yd(v,E.mode,b),y.return=E,E=y}return o(E);case Or:return F=v._init,k(E,y,F(v._payload),b)}if(Zo(v))return S(E,y,v,b);if(jo(v))return T(E,y,v,b);au(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,v),y.return=E,E=y):(n(E,y),y=Qd(v,E.mode,b),y.return=E,E=y),o(E)):n(E,y)}return k}var Ji=kI(!0),xI=kI(!1),vc=ds(null),Ec=null,Oi=null,Vm=null;function Fm(){Vm=Oi=Ec=null}function $m(t){var e=vc.current;ke(vc),t._currentValue=e}function rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zi(t,e){Ec=t,Vm=Oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(Vm!==t)if(t={context:t,memoizedValue:e,next:null},Oi===null){if(Ec===null)throw Error(j(308));Oi=t,Ec.dependencies={lanes:0,firstContext:t}}else Oi=Oi.next=t;return e}var Ns=null;function Um(t){Ns===null?Ns=[t]:Ns.push(t)}function bI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Um(e)):(n.next=s.next,s.next=n),e.interleaved=n,fr(t,r)}function fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dr=!1;function jm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fr(t,n)}return s=r.interleaved,s===null?(e.next=e,Um(r)):(e.next=s.next,s.next=e),r.interleaved=e,fr(t,n)}function Ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rm(t,n)}}function _w(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ic(t,e,n,r){var s=t.updateQueue;Dr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,h=c=u=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,T=a;switch(p=e,g=n,T.tag){case 1:if(S=T.payload,typeof S=="function"){f=S.call(g,f,p);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=T.payload,p=typeof S=="function"?S.call(g,f,p):S,p==null)break e;f=De({},f,p);break e;case 2:Dr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hs|=o,t.lanes=o,t.memoizedState=f}}function ww(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var wl={},Un=ds(wl),Qa=ds(wl),Ya=ds(wl);function Os(t){if(t===wl)throw Error(j(174));return t}function Bm(t,e){switch(Te(Ya,e),Te(Qa,t),Te(Un,wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vf(e,t)}ke(Un),Te(Un,e)}function Zi(){ke(Un),ke(Qa),ke(Ya)}function NI(t){Os(Ya.current);var e=Os(Un.current),n=Vf(e,t.type);e!==n&&(Te(Qa,t),Te(Un,n))}function zm(t){Qa.current===t&&(ke(Un),ke(Qa))}var Pe=ds(0);function Sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function Wm(){for(var t=0;t<zd.length;t++)zd[t]._workInProgressVersionPrimary=null;zd.length=0}var Du=Er.ReactCurrentDispatcher,Wd=Er.ReactCurrentBatchConfig,Ws=0,Oe=null,Qe=null,rt=null,Tc=!1,Ia=!1,Xa=0,qx=0;function yt(){throw Error(j(321))}function Hm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function qm(t,e,n,r,s,i){if(Ws=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?Yx:Xx,t=n(r,s),Ia){i=0;do{if(Ia=!1,Xa=0,25<=i)throw Error(j(301));i+=1,rt=Qe=null,e.updateQueue=null,Du.current=Jx,t=n(r,s)}while(Ia)}if(Du.current=Ac,e=Qe!==null&&Qe.next!==null,Ws=0,rt=Qe=Oe=null,Tc=!1,e)throw Error(j(300));return t}function Km(){var t=Xa!==0;return Xa=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Oe.memoizedState=rt=t:rt=rt.next=t,rt}function dn(){if(Qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Oe.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(j(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Oe.memoizedState=rt=t:rt=rt.next=t}return rt}function Ja(t,e){return typeof e=="function"?e(t):e}function Hd(t){var e=dn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((Ws&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Oe.lanes|=h,Hs|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,In(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=dn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);In(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function OI(){}function DI(t,e){var n=Oe,r=dn(),s=e(),i=!In(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Gm(VI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Za(9,MI.bind(null,n,r,s,e),void 0,null),it===null)throw Error(j(349));Ws&30||LI(n,e,s)}return s}function LI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MI(t,e,n,r){e.value=n,e.getSnapshot=r,FI(e)&&$I(t)}function VI(t,e,n){return n(function(){FI(e)&&$I(t)})}function FI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function $I(t){var e=fr(t,1);e!==null&&En(e,t,1,-1)}function vw(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=Qx.bind(null,Oe,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function UI(){return dn().memoizedState}function Lu(t,e,n,r){var s=On();Oe.flags|=t,s.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function _h(t,e,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Hm(r,o.deps)){s.memoizedState=Za(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Za(1|e,n,i,r)}function Ew(t,e){return Lu(8390656,8,t,e)}function Gm(t,e){return _h(2048,8,t,e)}function jI(t,e){return _h(4,2,t,e)}function BI(t,e){return _h(4,4,t,e)}function zI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WI(t,e,n){return n=n!=null?n.concat([t]):null,_h(4,4,zI.bind(null,e,t),n)}function Qm(){}function HI(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qI(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KI(t,e,n){return Ws&21?(In(n,e)||(n=JE(),Oe.lanes|=n,Hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function Kx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Wd.transition;Wd.transition={};try{t(!1),e()}finally{ve=n,Wd.transition=r}}function GI(){return dn().memoizedState}function Gx(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QI(t))YI(e,n);else if(n=bI(t,e,n,r),n!==null){var s=Pt();En(n,t,r,s),XI(n,e,r)}}function Qx(t,e,n){var r=Yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QI(t))YI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,In(a,o)){var u=e.interleaved;u===null?(s.next=s,Um(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=bI(t,e,s,r),n!==null&&(s=Pt(),En(n,t,r,s),XI(n,e,r))}}function QI(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function YI(t,e){Ia=Tc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rm(t,n)}}var Ac={readContext:hn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Yx={readContext:hn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:Ew,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lu(4194308,4,zI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lu(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gx.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:vw,useDebugValue:Qm,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=vw(!1),e=t[0];return t=Kx.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=On();if(xe){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),it===null)throw Error(j(349));Ws&30||LI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ew(VI.bind(null,r,i,t),[t]),r.flags|=2048,Za(9,MI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=On(),e=it.identifierPrefix;if(xe){var n=nr,r=tr;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xx={readContext:hn,useCallback:HI,useContext:hn,useEffect:Gm,useImperativeHandle:WI,useInsertionEffect:jI,useLayoutEffect:BI,useMemo:qI,useReducer:Hd,useRef:UI,useState:function(){return Hd(Ja)},useDebugValue:Qm,useDeferredValue:function(t){var e=dn();return KI(e,Qe.memoizedState,t)},useTransition:function(){var t=Hd(Ja)[0],e=dn().memoizedState;return[t,e]},useMutableSource:OI,useSyncExternalStore:DI,useId:GI,unstable_isNewReconciler:!1},Jx={readContext:hn,useCallback:HI,useContext:hn,useEffect:Gm,useImperativeHandle:WI,useInsertionEffect:jI,useLayoutEffect:BI,useMemo:qI,useReducer:qd,useRef:UI,useState:function(){return qd(Ja)},useDebugValue:Qm,useDeferredValue:function(t){var e=dn();return Qe===null?e.memoizedState=t:KI(e,Qe.memoizedState,t)},useTransition:function(){var t=qd(Ja)[0],e=dn().memoizedState;return[t,e]},useMutableSource:OI,useSyncExternalStore:DI,useId:GI,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wh={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Yr(t),i=or(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(En(e,t,s,r),Ou(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=Yr(t),i=or(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(En(e,t,s,r),Ou(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Yr(t),s=or(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gr(t,s,r),e!==null&&(En(e,t,r,n),Ou(e,t,r))}};function Iw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ha(n,r)||!Ha(s,i):!0}function JI(t,e,n){var r=!1,s=rs,i=e.contextType;return typeof i=="object"&&i!==null?i=hn(i):(s=$t(e)?Bs:St.current,r=e.contextTypes,i=(r=r!=null)?Yi(t,s):rs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Sw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wh.enqueueReplaceState(e,e.state,null)}function ip(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=hn(i):(i=$t(e)?Bs:St.current,s.context=Yi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wh.enqueueReplaceState(s,s.state,null),Ic(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function eo(t,e){try{var n="",r=e;do n+=Rk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function op(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zx=typeof WeakMap=="function"?WeakMap:Map;function ZI(t,e,n){n=or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cc||(Cc=!0,gp=r),op(t,e)},n}function eS(t,e,n){n=or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){op(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){op(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Tw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fb.bind(null,t,e,n),e.then(t,t))}function Aw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=or(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var eb=Er.ReactCurrentOwner,Vt=!1;function bt(t,e,n,r){e.child=t===null?xI(e,null,n,r):Ji(e,t.child,n,r)}function Cw(t,e,n,r,s){n=n.render;var i=e.ref;return zi(e,s),r=qm(t,e,n,r,i,s),n=Km(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pr(t,e,s)):(xe&&n&&Dm(e),e.flags|=1,bt(t,e,r,s),e.child)}function kw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tS(t,e,i,r,s)):(t=$u(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(o,r)&&t.ref===e.ref)return pr(t,e,s)}return e.flags|=1,t=Xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function tS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ha(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,pr(t,e,s)}return ap(t,e,n,r,s)}function nS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Li,Kt),Kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Li,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Li,Kt),Kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Li,Kt),Kt|=r;return bt(t,e,s,n),e.child}function rS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ap(t,e,n,r,s){var i=$t(n)?Bs:St.current;return i=Yi(e,i),zi(e,s),n=qm(t,e,n,r,i,s),r=Km(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pr(t,e,s)):(xe&&r&&Dm(e),e.flags|=1,bt(t,e,n,s),e.child)}function xw(t,e,n,r,s){if($t(n)){var i=!0;yc(e)}else i=!1;if(zi(e,s),e.stateNode===null)Mu(t,e),JI(e,n,r),ip(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=$t(n)?Bs:St.current,c=Yi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Sw(e,o,r,c),Dr=!1;var p=e.memoizedState;o.state=p,Ic(e,r,o,s),u=e.memoizedState,a!==r||p!==u||Ft.current||Dr?(typeof h=="function"&&(sp(e,n,h,r),u=e.memoizedState),(a=Dr||Iw(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,PI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=$t(n)?Bs:St.current,u=Yi(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&Sw(e,o,r,u),Dr=!1,p=e.memoizedState,o.state=p,Ic(e,r,o,s);var S=e.memoizedState;a!==f||p!==S||Ft.current||Dr?(typeof g=="function"&&(sp(e,n,g,r),S=e.memoizedState),(c=Dr||Iw(e,n,c,r,p,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return lp(t,e,n,r,i,s)}function lp(t,e,n,r,s,i){rS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&pw(e,n,!1),pr(t,e,i);r=e.stateNode,eb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ji(e,t.child,null,i),e.child=Ji(e,null,a,i)):bt(t,e,a,i),e.memoizedState=r.state,s&&pw(e,n,!0),e.child}function sS(t){var e=t.stateNode;e.pendingContext?fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fw(t,e.context,!1),Bm(t,e.containerInfo)}function bw(t,e,n,r,s){return Xi(),Mm(s),e.flags|=256,bt(t,e,n,r),e.child}var up={dehydrated:null,treeContext:null,retryLane:0};function cp(t){return{baseLanes:t,cachePool:null,transitions:null}}function iS(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Pe,s&1),t===null)return np(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ih(o,r,0,null),t=$s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cp(n),e.memoizedState=up,t):Ym(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tb(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xr(a,i):(i=$s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=up,r}return i=t.child,t=i.sibling,r=Xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ym(t,e){return e=Ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,r){return r!==null&&Mm(r),Ji(e,t.child,null,n),t=Ym(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(j(422))),lu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ih({mode:"visible",children:r.children},s,0,null),i=$s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ji(e,t.child,null,o),e.child.memoizedState=cp(o),e.memoizedState=up,i);if(!(e.mode&1))return lu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(j(419)),r=Kd(i,r,void 0),lu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vt||a){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fr(t,s),En(r,t,s,-1))}return ng(),r=Kd(Error(j(421))),lu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qt=Kr(s.nextSibling),Yt=e,xe=!0,yn=null,t!==null&&(tn[nn++]=tr,tn[nn++]=nr,tn[nn++]=zs,tr=t.id,nr=t.overflow,zs=e),e=Ym(e,r.children),e.flags|=4096,e)}function Pw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rp(t.return,e,n)}function Gd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function oS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pw(t,n,e);else if(t.tag===19)Pw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gd(e,!0,n,null,i);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nb(t,e,n){switch(e.tag){case 3:sS(e),Xi();break;case 5:NI(e);break;case 1:$t(e.type)&&yc(e);break;case 4:Bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(vc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?iS(t,e,n):(Te(Pe,Pe.current&1),t=pr(t,e,n),t!==null?t.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return oS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,nS(t,e,n)}return pr(t,e,n)}var aS,hp,lS,uS;aS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hp=function(){};lS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Os(Un.current);var i=null;switch(n){case"input":s=Of(t,s),r=Of(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Mf(t,s),r=Mf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mc)}Ff(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Re("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};uS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ko(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rb(t,e,n){var r=e.pendingProps;switch(Lm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return $t(e.type)&&gc(),_t(e),null;case 3:return r=e.stateNode,Zi(),ke(Ft),ke(St),Wm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(wp(yn),yn=null))),hp(t,e),_t(e),null;case 5:zm(e);var s=Os(Ya.current);if(n=e.type,t!==null&&e.stateNode!=null)lS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return _t(e),null}if(t=Os(Un.current),ou(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mn]=e,r[Ga]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<ta.length;s++)Re(ta[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":U_(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":B_(r,i),Re("invalid",r)}Ff(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&iu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&iu(r.textContent,a,t),s=["children",""+a]):Fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Xl(r),j_(r,i,!0);break;case"textarea":Xl(r),z_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Ga]=r,aS(t,e,!1,!1),e.stateNode=t;e:{switch(o=$f(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<ta.length;s++)Re(ta[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":U_(t,r),s=Of(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Re("invalid",t);break;case"textarea":B_(t,r),s=Mf(t,r),Re("invalid",t);break;default:s=r}Ff(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?UE(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&FE(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$a(t,u):typeof u=="number"&&$a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",t):u!=null&&vm(t,i,u,o))}switch(n){case"input":Xl(t),j_(t,r,!1);break;case"textarea":Xl(t),z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ns(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$i(t,!!r.multiple,i,!1):r.defaultValue!=null&&$i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)uS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Os(Ya.current),Os(Un.current),ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(i=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return _t(e),null;case 13:if(ke(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Qt!==null&&e.mode&1&&!(e.flags&128))CI(),Xi(),e.flags|=98560,i=!1;else if(i=ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Mn]=e}else Xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else yn!==null&&(wp(yn),yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Xe===0&&(Xe=3):ng())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Zi(),hp(t,e),t===null&&qa(e.stateNode.containerInfo),_t(e),null;case 10:return $m(e.type._context),_t(e),null;case 17:return $t(e.type)&&gc(),_t(e),null;case 19:if(ke(Pe),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ko(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sc(t),o!==null){for(e.flags|=128,Ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>to&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return _t(e),null}else 2*Ue()-i.renderingStartTime>to&&n!==1073741824&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return tg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function sb(t,e){switch(Lm(e),e.tag){case 1:return $t(e.type)&&gc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zi(),ke(Ft),ke(St),Wm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zm(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return Zi(),null;case 10:return $m(e.type._context),null;case 22:case 23:return tg(),null;case 24:return null;default:return null}}var uu=!1,Et=!1,ib=typeof WeakSet=="function"?WeakSet:Set,q=null;function Di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function dp(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Nw=!1;function ob(t,e){if(Qf=dc,t=pI(),Om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yf={focusedElem:t,selectionRange:n},dc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var T=S.memoizedProps,k=S.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?T:pn(e.type,T),k);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(b){Fe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return S=Nw,Nw=!1,S}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&dp(e,n,i)}s=s.next}while(s!==r)}}function vh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cS(t){var e=t.alternate;e!==null&&(t.alternate=null,cS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Ga],delete e[Zf],delete e[Bx],delete e[zx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hS(t){return t.tag===5||t.tag===3||t.tag===4}function Ow(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mc));else if(r!==4&&(t=t.child,t!==null))for(pp(t,e,n),t=t.sibling;t!==null;)pp(t,e,n),t=t.sibling}function mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mp(t,e,n),t=t.sibling;t!==null;)mp(t,e,n),t=t.sibling}var ot=null,gn=!1;function xr(t,e,n){for(n=n.child;n!==null;)dS(t,e,n),n=n.sibling}function dS(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(dh,n)}catch{}switch(n.tag){case 5:Et||Di(n,e);case 6:var r=ot,s=gn;ot=null,xr(t,e,n),ot=r,gn=s,ot!==null&&(gn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(gn?(t=ot,n=n.stateNode,t.nodeType===8?jd(t.parentNode,n):t.nodeType===1&&jd(t,n),za(t)):jd(ot,n.stateNode));break;case 4:r=ot,s=gn,ot=n.stateNode.containerInfo,gn=!0,xr(t,e,n),ot=r,gn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dp(n,e,o),s=s.next}while(s!==r)}xr(t,e,n);break;case 1:if(!Et&&(Di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,xr(t,e,n),Et=r):xr(t,e,n);break;default:xr(t,e,n)}}function Dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ib),e.forEach(function(r){var s=mb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,gn=!1;break e;case 3:ot=a.stateNode.containerInfo,gn=!0;break e;case 4:ot=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(ot===null)throw Error(j(160));dS(i,o,s),ot=null,gn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fS(e,t),e=e.sibling}function fS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Pn(t),r&4){try{Sa(3,t,t.return),vh(3,t)}catch(T){Fe(t,t.return,T)}try{Sa(5,t,t.return)}catch(T){Fe(t,t.return,T)}}break;case 1:fn(e,t),Pn(t),r&512&&n!==null&&Di(n,n.return);break;case 5:if(fn(e,t),Pn(t),r&512&&n!==null&&Di(n,n.return),t.flags&32){var s=t.stateNode;try{$a(s,"")}catch(T){Fe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&LE(s,i),$f(a,o);var c=$f(a,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?UE(s,f):h==="dangerouslySetInnerHTML"?FE(s,f):h==="children"?$a(s,f):vm(s,h,f,c)}switch(a){case"input":Df(s,i);break;case"textarea":ME(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?$i(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?$i(s,!!i.multiple,i.defaultValue,!0):$i(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ga]=i}catch(T){Fe(t,t.return,T)}}break;case 6:if(fn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Fe(t,t.return,T)}}break;case 3:if(fn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(T){Fe(t,t.return,T)}break;case 4:fn(e,t),Pn(t);break;case 13:fn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zm=Ue())),r&4&&Dw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(c=Et)||h,fn(e,t),Et=c):fn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(f=q=h;q!==null;){switch(p=q,g=p.child,p.tag){case 0:case 11:case 14:case 15:Sa(4,p,p.return);break;case 1:Di(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(T){Fe(r,n,T)}}break;case 5:Di(p,p.return);break;case 22:if(p.memoizedState!==null){Mw(f);continue}}g!==null?(g.return=p,q=g):Mw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=$E("display",o))}catch(T){Fe(t,t.return,T)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(T){Fe(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fn(e,t),Pn(t),r&4&&Dw(t);break;case 21:break;default:fn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hS(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var i=Ow(t);mp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ow(t);pp(t,a,o);break;default:throw Error(j(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ab(t,e,n){q=t,pS(t)}function pS(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||uu;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Et;a=uu;var c=Et;if(uu=o,(Et=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Vw(s):u!==null?(u.return=o,q=u):Vw(s);for(;i!==null;)q=i,pS(i),i=i.sibling;q=s,uu=a,Et=c}Lw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Lw(t)}}function Lw(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||vh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ww(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ww(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Et||e.flags&512&&fp(e)}catch(p){Fe(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Mw(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Vw(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vh(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Fe(e,s,u)}}var i=e.return;try{fp(e)}catch(u){Fe(e,i,u)}break;case 5:var o=e.return;try{fp(e)}catch(u){Fe(e,o,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var lb=Math.ceil,Rc=Er.ReactCurrentDispatcher,Xm=Er.ReactCurrentOwner,un=Er.ReactCurrentBatchConfig,ye=0,it=null,Be=null,ht=0,Kt=0,Li=ds(0),Xe=0,el=null,Hs=0,Eh=0,Jm=0,Ta=null,Mt=null,Zm=0,to=1/0,Zn=null,Cc=!1,gp=null,Qr=null,cu=!1,Br=null,kc=0,Aa=0,yp=null,Vu=-1,Fu=0;function Pt(){return ye&6?Ue():Vu!==-1?Vu:Vu=Ue()}function Yr(t){return t.mode&1?ye&2&&ht!==0?ht&-ht:Hx.transition!==null?(Fu===0&&(Fu=JE()),Fu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:iI(t.type)),t):1}function En(t,e,n,r){if(50<Aa)throw Aa=0,yp=null,Error(j(185));gl(t,n,r),(!(ye&2)||t!==it)&&(t===it&&(!(ye&2)&&(Eh|=n),Xe===4&&Mr(t,ht)),Ut(t,r),n===1&&ye===0&&!(e.mode&1)&&(to=Ue()+500,yh&&fs()))}function Ut(t,e){var n=t.callbackNode;Hk(t,e);var r=hc(t,t===it?ht:0);if(r===0)n!==null&&q_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&q_(n),e===1)t.tag===0?Wx(Fw.bind(null,t)):TI(Fw.bind(null,t)),Ux(function(){!(ye&6)&&fs()}),n=null;else{switch(ZE(r)){case 1:n=Am;break;case 4:n=YE;break;case 16:n=cc;break;case 536870912:n=XE;break;default:n=cc}n=IS(n,mS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mS(t,e){if(Vu=-1,Fu=0,ye&6)throw Error(j(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=hc(t,t===it?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xc(t,r);else{e=r;var s=ye;ye|=2;var i=yS();(it!==t||ht!==e)&&(Zn=null,to=Ue()+500,Fs(t,e));do try{hb();break}catch(a){gS(t,a)}while(!0);Fm(),Rc.current=i,ye=s,Be!==null?e=0:(it=null,ht=0,e=Xe)}if(e!==0){if(e===2&&(s=Wf(t),s!==0&&(r=s,e=_p(t,s))),e===1)throw n=el,Fs(t,0),Mr(t,r),Ut(t,Ue()),n;if(e===6)Mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ub(s)&&(e=xc(t,r),e===2&&(i=Wf(t),i!==0&&(r=i,e=_p(t,i))),e===1))throw n=el,Fs(t,0),Mr(t,r),Ut(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Ts(t,Mt,Zn);break;case 3:if(Mr(t,r),(r&130023424)===r&&(e=Zm+500-Ue(),10<e)){if(hc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jf(Ts.bind(null,t,Mt,Zn),e);break}Ts(t,Mt,Zn);break;case 4:if(Mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lb(r/1960))-r,10<r){t.timeoutHandle=Jf(Ts.bind(null,t,Mt,Zn),r);break}Ts(t,Mt,Zn);break;case 5:Ts(t,Mt,Zn);break;default:throw Error(j(329))}}}return Ut(t,Ue()),t.callbackNode===n?mS.bind(null,t):null}function _p(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=xc(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&wp(e)),t}function wp(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function ub(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!In(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(t,e){for(e&=~Jm,e&=~Eh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function Fw(t){if(ye&6)throw Error(j(327));Wi();var e=hc(t,0);if(!(e&1))return Ut(t,Ue()),null;var n=xc(t,e);if(t.tag!==0&&n===2){var r=Wf(t);r!==0&&(e=r,n=_p(t,r))}if(n===1)throw n=el,Fs(t,0),Mr(t,e),Ut(t,Ue()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,Mt,Zn),Ut(t,Ue()),null}function eg(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(to=Ue()+500,yh&&fs())}}function qs(t){Br!==null&&Br.tag===0&&!(ye&6)&&Wi();var e=ye;ye|=1;var n=un.transition,r=ve;try{if(un.transition=null,ve=1,t)return t()}finally{ve=r,un.transition=n,ye=e,!(ye&6)&&fs()}}function tg(){Kt=Li.current,ke(Li)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$x(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Lm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gc();break;case 3:Zi(),ke(Ft),ke(St),Wm();break;case 5:zm(r);break;case 4:Zi();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:$m(r.type._context);break;case 22:case 23:tg()}n=n.return}if(it=t,Be=t=Xr(t.current,null),ht=Kt=e,Xe=0,el=null,Jm=Eh=Hs=0,Mt=Ta=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ns=null}return t}function gS(t,e){do{var n=Be;try{if(Fm(),Du.current=Ac,Tc){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tc=!1}if(Ws=0,rt=Qe=Oe=null,Ia=!1,Xa=0,Xm.current=null,n===null||n.return===null){Xe=1,el=e,Be=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Aw(o);if(g!==null){g.flags&=-257,Rw(g,o,a,i,e),g.mode&1&&Tw(i,c,e),e=g,u=c;var S=e.updateQueue;if(S===null){var T=new Set;T.add(u),e.updateQueue=T}else S.add(u);break e}else{if(!(e&1)){Tw(i,c,e),ng();break e}u=Error(j(426))}}else if(xe&&a.mode&1){var k=Aw(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Rw(k,o,a,i,e),Mm(eo(u,a));break e}}i=u=eo(u,a),Xe!==4&&(Xe=2),Ta===null?Ta=[i]:Ta.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=ZI(i,u,e);_w(i,E);break e;case 1:a=u;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Qr===null||!Qr.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=eS(i,a,e);_w(i,b);break e}}i=i.return}while(i!==null)}wS(n)}catch(M){e=M,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function yS(){var t=Rc.current;return Rc.current=Ac,t===null?Ac:t}function ng(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),it===null||!(Hs&268435455)&&!(Eh&268435455)||Mr(it,ht)}function xc(t,e){var n=ye;ye|=2;var r=yS();(it!==t||ht!==e)&&(Zn=null,Fs(t,e));do try{cb();break}catch(s){gS(t,s)}while(!0);if(Fm(),ye=n,Rc.current=r,Be!==null)throw Error(j(261));return it=null,ht=0,Xe}function cb(){for(;Be!==null;)_S(Be)}function hb(){for(;Be!==null&&!Mk();)_S(Be)}function _S(t){var e=ES(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?wS(t):Be=e,Xm.current=null}function wS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sb(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Be=null;return}}else if(n=rb(n,e,Kt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Xe===0&&(Xe=5)}function Ts(t,e,n){var r=ve,s=un.transition;try{un.transition=null,ve=1,db(t,e,n,r)}finally{un.transition=s,ve=r}return null}function db(t,e,n,r){do Wi();while(Br!==null);if(ye&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qk(t,i),t===it&&(Be=it=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cu||(cu=!0,IS(cc,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=un.transition,un.transition=null;var o=ve;ve=1;var a=ye;ye|=4,Xm.current=null,ob(t,n),fS(n,t),Nx(Yf),dc=!!Qf,Yf=Qf=null,t.current=n,ab(n),Vk(),ye=a,ve=o,un.transition=i}else t.current=n;if(cu&&(cu=!1,Br=t,kc=s),i=t.pendingLanes,i===0&&(Qr=null),Uk(n.stateNode),Ut(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cc)throw Cc=!1,t=gp,gp=null,t;return kc&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===yp?Aa++:(Aa=0,yp=t):Aa=0,fs(),null}function Wi(){if(Br!==null){var t=ZE(kc),e=un.transition,n=ve;try{if(un.transition=null,ve=16>t?16:t,Br===null)var r=!1;else{if(t=Br,Br=null,kc=0,ye&6)throw Error(j(331));var s=ye;for(ye|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Sa(8,h,i)}var f=h.child;if(f!==null)f.return=h,q=f;else for(;q!==null;){h=q;var p=h.sibling,g=h.return;if(cS(h),h===c){q=null;break}if(p!==null){p.return=g,q=p;break}q=g}}}var S=i.alternate;if(S!==null){var T=S.child;if(T!==null){S.child=null;do{var k=T.sibling;T.sibling=null,T=k}while(T!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sa(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var y=t.current;for(q=y;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=y;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vh(9,a)}}catch(M){Fe(a,a.return,M)}if(a===o){q=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,q=b;break e}q=a.return}}if(ye=s,fs(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(dh,t)}catch{}r=!0}return r}finally{ve=n,un.transition=e}}return!1}function $w(t,e,n){e=eo(n,e),e=ZI(t,e,1),t=Gr(t,e,1),e=Pt(),t!==null&&(gl(t,1,e),Ut(t,e))}function Fe(t,e,n){if(t.tag===3)$w(t,t,n);else for(;e!==null;){if(e.tag===3){$w(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=eo(n,t),t=eS(e,t,1),e=Gr(e,t,1),t=Pt(),e!==null&&(gl(e,1,t),Ut(e,t));break}}e=e.return}}function fb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ht&n)===n&&(Xe===4||Xe===3&&(ht&130023424)===ht&&500>Ue()-Zm?Fs(t,0):Jm|=n),Ut(t,e)}function vS(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=Pt();t=fr(t,e),t!==null&&(gl(t,e,n),Ut(t,n))}function pb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vS(t,n)}function mb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),vS(t,n)}var ES;ES=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,nb(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,xe&&e.flags&1048576&&AI(e,wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mu(t,e),t=e.pendingProps;var s=Yi(e,St.current);zi(e,n),s=qm(null,e,r,t,s,n);var i=Km();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(i=!0,yc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jm(e),s.updater=wh,e.stateNode=s,s._reactInternals=e,ip(e,r,t,n),e=lp(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Dm(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yb(r),t=pn(r,t),s){case 0:e=ap(null,e,r,t,n);break e;case 1:e=xw(null,e,r,t,n);break e;case 11:e=Cw(null,e,r,t,n);break e;case 14:e=kw(null,e,r,pn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),ap(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),xw(t,e,r,s,n);case 3:e:{if(sS(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,PI(t,e),Ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=eo(Error(j(423)),e),e=bw(t,e,r,n,s);break e}else if(r!==s){s=eo(Error(j(424)),e),e=bw(t,e,r,n,s);break e}else for(Qt=Kr(e.stateNode.containerInfo.firstChild),Yt=e,xe=!0,yn=null,n=xI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xi(),r===s){e=pr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return NI(e),t===null&&np(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xf(r,s)?o=null:i!==null&&Xf(r,i)&&(e.flags|=32),rS(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&np(e),null;case 13:return iS(t,e,n);case 4:return Bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ji(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Cw(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(vc,r._currentValue),r._currentValue=o,i!==null)if(In(i.value,o)){if(i.children===s.children&&!Ft.current){e=pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=or(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),rp(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zi(e,n),s=hn(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=pn(r,e.pendingProps),s=pn(r.type,s),kw(t,e,r,s,n);case 15:return tS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Mu(t,e),e.tag=1,$t(r)?(t=!0,yc(e)):t=!1,zi(e,n),JI(e,r,s),ip(e,r,s,n),lp(null,e,r,!0,t,n);case 19:return oS(t,e,n);case 22:return nS(t,e,n)}throw Error(j(156,e.tag))};function IS(t,e){return QE(t,e)}function gb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new gb(t,e,n,r)}function rg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yb(t){if(typeof t=="function")return rg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Im)return 11;if(t===Sm)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $u(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ai:return $s(n.children,s,i,e);case Em:o=8,s|=8;break;case xf:return t=an(12,n,e,s|2),t.elementType=xf,t.lanes=i,t;case bf:return t=an(13,n,e,s),t.elementType=bf,t.lanes=i,t;case Pf:return t=an(19,n,e,s),t.elementType=Pf,t.lanes=i,t;case NE:return Ih(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bE:o=10;break e;case PE:o=9;break e;case Im:o=11;break e;case Sm:o=14;break e;case Or:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=an(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $s(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function Ih(t,e,n,r){return t=an(22,t,r,e),t.elementType=NE,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function Yd(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _b(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sg(t,e,n,r,s,i,o,a,u){return t=new _b(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=an(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jm(i),t}function wb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SS(t){if(!t)return rs;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if($t(n))return SI(t,n,e)}return e}function TS(t,e,n,r,s,i,o,a,u){return t=sg(n,r,!0,t,s,i,o,a,u),t.context=SS(null),n=t.current,r=Pt(),s=Yr(n),i=or(r,s),i.callback=e??null,Gr(n,i,s),t.current.lanes=s,gl(t,s,r),Ut(t,r),t}function Sh(t,e,n,r){var s=e.current,i=Pt(),o=Yr(s);return n=SS(n),e.context===null?e.context=n:e.pendingContext=n,e=or(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(s,e,o),t!==null&&(En(t,s,o,i),Ou(t,s,o)),o}function bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ig(t,e){Uw(t,e),(t=t.alternate)&&Uw(t,e)}function vb(){return null}var AS=typeof reportError=="function"?reportError:function(t){console.error(t)};function og(t){this._internalRoot=t}Th.prototype.render=og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Sh(t,e,null,null)};Th.prototype.unmount=og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qs(function(){Sh(null,t,null,null)}),e[dr]=null}};function Th(t){this._internalRoot=t}Th.prototype.unstable_scheduleHydration=function(t){if(t){var e=nI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&sI(t)}};function ag(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jw(){}function Eb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=bc(o);i.call(c)}}var o=TS(e,r,t,0,null,!1,!1,"",jw);return t._reactRootContainer=o,t[dr]=o.current,qa(t.nodeType===8?t.parentNode:t),qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=bc(u);a.call(c)}}var u=sg(t,0,!1,null,null,!1,!1,"",jw);return t._reactRootContainer=u,t[dr]=u.current,qa(t.nodeType===8?t.parentNode:t),qs(function(){Sh(e,u,n,r)}),u}function Rh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=bc(o);a.call(u)}}Sh(e,o,t,s)}else o=Eb(n,e,t,s,r);return bc(o)}eI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ea(e.pendingLanes);n!==0&&(Rm(e,n|1),Ut(e,Ue()),!(ye&6)&&(to=Ue()+500,fs()))}break;case 13:qs(function(){var r=fr(t,1);if(r!==null){var s=Pt();En(r,t,1,s)}}),ig(t,1)}};Cm=function(t){if(t.tag===13){var e=fr(t,134217728);if(e!==null){var n=Pt();En(e,t,134217728,n)}ig(t,134217728)}};tI=function(t){if(t.tag===13){var e=Yr(t),n=fr(t,e);if(n!==null){var r=Pt();En(n,t,e,r)}ig(t,e)}};nI=function(){return ve};rI=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};jf=function(t,e,n){switch(e){case"input":if(Df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gh(r);if(!s)throw Error(j(90));DE(r),Df(r,s)}}}break;case"textarea":ME(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};zE=eg;WE=qs;var Ib={usingClientEntryPoint:!1,Events:[_l,xi,gh,jE,BE,eg]},Go={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sb={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KE(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||vb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{dh=hu.inject(Sb),$n=hu}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ib;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ag(e))throw Error(j(200));return wb(t,e,null,n)};Zt.createRoot=function(t,e){if(!ag(t))throw Error(j(299));var n=!1,r="",s=AS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sg(t,1,!1,null,null,n,!1,r,s),t[dr]=e.current,qa(t.nodeType===8?t.parentNode:t),new og(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=KE(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return qs(t)};Zt.hydrate=function(t,e,n){if(!Ah(e))throw Error(j(200));return Rh(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!ag(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=AS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TS(e,null,t,1,n??null,s,!1,i,o),t[dr]=e.current,qa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Th(e)};Zt.render=function(t,e,n){if(!Ah(e))throw Error(j(200));return Rh(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Ah(t))throw Error(j(40));return t._reactRootContainer?(qs(function(){Rh(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1};Zt.unstable_batchedUpdates=eg;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ah(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Rh(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function RS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RS)}catch(t){console.error(t)}}RS(),RE.exports=Zt;var Tb=RE.exports,CS,Bw=Tb;CS=Bw.createRoot,Bw.hydrateRoot;const kS="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/manifest.json",rr="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/articles_text2/",zw="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/articles_text_withurls/";function mr(t){return Array.isArray?Array.isArray(t):PS(t)==="[object Array]"}function Ab(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Rb(t){return t==null?"":Ab(t)}function Vn(t){return typeof t=="string"}function xS(t){return typeof t=="number"}function Cb(t){return t===!0||t===!1||kb(t)&&PS(t)=="[object Boolean]"}function bS(t){return typeof t=="object"}function kb(t){return bS(t)&&t!==null}function Gt(t){return t!=null}function Xd(t){return!t.trim().length}function PS(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xb="Incorrect 'index' type",bb=t=>`Invalid value for key ${t}`,Pb=t=>`Pattern length exceeds max of ${t}.`,Nb=t=>`Missing ${t} property in key`,Ob=t=>`Property 'weight' in key '${t}' must be a positive integer`,Ww=Object.prototype.hasOwnProperty;class Db{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=NS(r);n+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function NS(t){let e=null,n=null,r=null,s=1,i=null;if(Vn(t)||mr(t))r=t,e=Hw(t),n=vp(t);else{if(!Ww.call(t,"name"))throw new Error(Nb("name"));const o=t.name;if(r=o,Ww.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Ob(o));e=Hw(o),n=vp(o),i=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:i}}function Hw(t){return mr(t)?t:t.split(".")}function vp(t){return mr(t)?t.join("."):t}function Lb(t,e){let n=[],r=!1;const s=(i,o,a)=>{if(Gt(i))if(!o[a])n.push(i);else{let u=o[a];const c=i[u];if(!Gt(c))return;if(a===o.length-1&&(Vn(c)||xS(c)||Cb(c)))n.push(Rb(c));else if(mr(c)){r=!0;for(let h=0,f=c.length;h<f;h+=1)s(c[h],o,a+1)}else o.length&&s(c,o,a+1)}};return s(t,Vn(e)?e.split("."):e,0),r?n:n[0]}const Mb={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Vb={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Fb={location:0,threshold:.6,distance:100},$b={useExtendedSearch:!1,getFn:Lb,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ae={...Vb,...Mb,...Fb,...$b};const Ub=/[^ ]+/g;function jb(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(Ub).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class lg{constructor({getFn:e=ae.getFn,fieldNormWeight:n=ae.fieldNormWeight}={}){this.norm=jb(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Vn(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Vn(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Gt(e)||Xd(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(Gt(o)){if(mr(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:h}=u.pop();if(Gt(h))if(Vn(h)&&!Xd(h)){let f={v:h,i:c,n:this.norm.get(h)};a.push(f)}else mr(h)&&h.forEach((f,p)=>{u.push({nestedArrIndex:p,value:f})})}r.$[i]=a}else if(Vn(o)&&!Xd(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function OS(t,e,{getFn:n=ae.getFn,fieldNormWeight:r=ae.fieldNormWeight}={}){const s=new lg({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(NS)),s.setSources(e),s.create(),s}function Bb(t,{getFn:e=ae.getFn,fieldNormWeight:n=ae.fieldNormWeight}={}){const{keys:r,records:s}=t,i=new lg({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function du(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=ae.distance,ignoreLocation:i=ae.ignoreLocation}={}){const o=e/t.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function zb(t=[],e=ae.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let a=t[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}const ks=32;function Wb(t,e,n,{location:r=ae.location,distance:s=ae.distance,threshold:i=ae.threshold,findAllMatches:o=ae.findAllMatches,minMatchCharLength:a=ae.minMatchCharLength,includeMatches:u=ae.includeMatches,ignoreLocation:c=ae.ignoreLocation}={}){if(e.length>ks)throw new Error(Pb(ks));const h=e.length,f=t.length,p=Math.max(0,Math.min(r,f));let g=i,S=p;const T=a>1||u,k=T?Array(f):[];let E;for(;(E=t.indexOf(e,S))>-1;){let _=du(e,{currentLocation:E,expectedLocation:p,distance:s,ignoreLocation:c});if(g=Math.min(_,g),S=E+h,T){let w=0;for(;w<h;)k[E+w]=1,w+=1}}S=-1;let y=[],v=1,b=h+f;const M=1<<h-1;for(let _=0;_<h;_+=1){let w=0,A=b;for(;w<A;)du(e,{errors:_,currentLocation:p+A,expectedLocation:p,distance:s,ignoreLocation:c})<=g?w=A:b=A,A=Math.floor((b-w)/2+w);b=A;let C=Math.max(1,p-A+1),R=o?f:Math.min(p+A,f)+h,P=Array(R+2);P[R+1]=(1<<_)-1;for(let ie=R;ie>=C;ie-=1){let Ee=ie-1,mt=n[t.charAt(Ee)];if(T&&(k[Ee]=+!!mt),P[ie]=(P[ie+1]<<1|1)&mt,_&&(P[ie]|=(y[ie+1]|y[ie])<<1|1|y[ie+1]),P[ie]&M&&(v=du(e,{errors:_,currentLocation:Ee,expectedLocation:p,distance:s,ignoreLocation:c}),v<=g)){if(g=v,S=Ee,S<=p)break;C=Math.max(1,2*p-S)}}if(du(e,{errors:_+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>g)break;y=P}const F={isMatch:S>=0,score:Math.max(.001,v)};if(T){const _=zb(k,a);_.length?u&&(F.indices=_):F.isMatch=!1}return F}function Hb(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class DS{constructor(e,{location:n=ae.location,threshold:r=ae.threshold,distance:s=ae.distance,includeMatches:i=ae.includeMatches,findAllMatches:o=ae.findAllMatches,minMatchCharLength:a=ae.minMatchCharLength,isCaseSensitive:u=ae.isCaseSensitive,ignoreLocation:c=ae.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(p,g)=>{this.chunks.push({pattern:p,alphabet:Hb(p),startIndex:g})},f=this.pattern.length;if(f>ks){let p=0;const g=f%ks,S=f-g;for(;p<S;)h(this.pattern.substr(p,ks),p),p+=ks;if(g){const T=f-ks;h(this.pattern.substr(T),T)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let S={isMatch:!0,score:0};return r&&(S.indices=[[0,e.length-1]]),S}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:c}=this.options;let h=[],f=0,p=!1;this.chunks.forEach(({pattern:S,alphabet:T,startIndex:k})=>{const{isMatch:E,score:y,indices:v}=Wb(e,S,T,{location:s+k,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:c});E&&(p=!0),f+=y,E&&v&&(h=[...h,...v])});let g={isMatch:p,score:p?f/this.chunks.length:1};return p&&r&&(g.indices=h),g}}class ps{constructor(e){this.pattern=e}static isMultiMatch(e){return qw(e,this.multiRegex)}static isSingleMatch(e){return qw(e,this.singleRegex)}search(){}}function qw(t,e){const n=t.match(e);return n?n[1]:null}class qb extends ps{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Kb extends ps{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Gb extends ps{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Qb extends ps{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Yb extends ps{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Xb extends ps{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class LS extends ps{constructor(e,{location:n=ae.location,threshold:r=ae.threshold,distance:s=ae.distance,includeMatches:i=ae.includeMatches,findAllMatches:o=ae.findAllMatches,minMatchCharLength:a=ae.minMatchCharLength,isCaseSensitive:u=ae.isCaseSensitive,ignoreLocation:c=ae.ignoreLocation}={}){super(e),this._bitapSearch=new DS(e,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class MS extends ps{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Ep=[qb,MS,Gb,Qb,Xb,Yb,Kb,LS],Kw=Ep.length,Jb=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Zb="|";function eP(t,e={}){return t.split(Zb).map(n=>{let r=n.trim().split(Jb).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let u=!1,c=-1;for(;!u&&++c<Kw;){const h=Ep[c];let f=h.isMultiMatch(a);f&&(s.push(new h(f,e)),u=!0)}if(!u)for(c=-1;++c<Kw;){const h=Ep[c];let f=h.isSingleMatch(a);if(f){s.push(new h(f,e));break}}}return s})}const tP=new Set([LS.type,MS.type]);class nP{constructor(e,{isCaseSensitive:n=ae.isCaseSensitive,includeMatches:r=ae.includeMatches,minMatchCharLength:s=ae.minMatchCharLength,ignoreLocation:i=ae.ignoreLocation,findAllMatches:o=ae.findAllMatches,location:a=ae.location,threshold:u=ae.threshold,distance:c=ae.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:u,distance:c},this.pattern=n?e:e.toLowerCase(),this.query=eP(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,o=[],a=0;for(let u=0,c=n.length;u<c;u+=1){const h=n[u];o.length=0,i=0;for(let f=0,p=h.length;f<p;f+=1){const g=h[f],{isMatch:S,indices:T,score:k}=g.search(e);if(S){if(i+=1,a+=k,r){const E=g.constructor.type;tP.has(E)?o=[...o,...T]:o.push(T)}}else{a=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:a/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Ip=[];function rP(...t){Ip.push(...t)}function Sp(t,e){for(let n=0,r=Ip.length;n<r;n+=1){let s=Ip[n];if(s.condition(t,e))return new s(t,e)}return new DS(t,e)}const Pc={AND:"$and",OR:"$or"},Tp={PATH:"$path",PATTERN:"$val"},Ap=t=>!!(t[Pc.AND]||t[Pc.OR]),sP=t=>!!t[Tp.PATH],iP=t=>!mr(t)&&bS(t)&&!Ap(t),Gw=t=>({[Pc.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function VS(t,e,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=sP(s);if(!o&&i.length>1&&!Ap(s))return r(Gw(s));if(iP(s)){const u=o?s[Tp.PATH]:i[0],c=o?s[Tp.PATTERN]:s[u];if(!Vn(c))throw new Error(bb(u));const h={keyId:vp(u),pattern:c};return n&&(h.searcher=Sp(c,e)),h}let a={children:[],operator:i[0]};return i.forEach(u=>{const c=s[u];mr(c)&&c.forEach(h=>{a.children.push(r(h))})}),a};return Ap(t)||(t=Gw(t)),r(t)}function oP(t,{ignoreFieldNorm:e=ae.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),n.score=r})}function aP(t,e){const n=t.matches;e.matches=[],Gt(n)&&n.forEach(r=>{if(!Gt(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function lP(t,e){e.score=t.score}function uP(t,e,{includeMatches:n=ae.includeMatches,includeScore:r=ae.includeScore}={}){const s=[];return n&&s.push(aP),r&&s.push(lP),t.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return s.length&&s.forEach(u=>{u(i,a)}),a})}class ar{constructor(e,n={},r){this.options={...ae,...n},this.options.useExtendedSearch,this._keyStore=new Db(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof lg))throw new Error(xb);this._myIndex=n||OS(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Gt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let u=Vn(e)?Vn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return oP(u,{ignoreFieldNorm:a}),i&&u.sort(o),xS(n)&&n>-1&&(u=u.slice(0,n)),uP(u,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const n=Sp(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!Gt(i))return;const{isMatch:u,score:c,indices:h}=n.searchIn(i);u&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:a,indices:h}]})}),s}_searchLogical(e){const n=VS(e,this.options),r=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:p});return g&&g.length?[{idx:c,item:u,matches:g}]:[]}const h=[];for(let f=0,p=a.children.length;f<p;f+=1){const g=a.children[f],S=r(g,u,c);if(S.length)h.push(...S);else if(a.operator===Pc.AND)return[]}return h},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:u})=>{if(Gt(a)){let c=r(n,a,u);c.length&&(i[u]||(i[u]={idx:u,item:a,matches:[]},o.push(i[u])),c.forEach(({matches:h})=>{i[u].matches.push(...h)}))}}),o}_searchObjectList(e){const n=Sp(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!Gt(o))return;let u=[];r.forEach((c,h)=>{u.push(...this._findMatches({key:c,value:o[h],searcher:n}))}),u.length&&i.push({idx:a,item:o,matches:u})}),i}_findMatches({key:e,value:n,searcher:r}){if(!Gt(n))return[];let s=[];if(mr(n))n.forEach(({v:i,i:o,n:a})=>{if(!Gt(i))return;const{isMatch:u,score:c,indices:h}=r.searchIn(i);u&&s.push({score:c,key:e,value:i,idx:o,norm:a,indices:h})});else{const{v:i,n:o}=n,{isMatch:a,score:u,indices:c}=r.searchIn(i);a&&s.push({score:u,key:e,value:i,norm:o,indices:c})}return s}}ar.version="6.6.2";ar.createIndex=OS;ar.parseIndex=Bb;ar.config=ae;ar.parseQuery=VS;rP(nP);function re(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function L(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let FS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return FS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Rp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Cp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class J extends Error{}class ft extends J{constructor(e,n,r,s){super(`${ft.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Ch({message:r,cause:Cp(n)});const i=n==null?void 0:n.error;return e===400?new $S(e,i,r,s):e===401?new US(e,i,r,s):e===403?new jS(e,i,r,s):e===404?new BS(e,i,r,s):e===409?new zS(e,i,r,s):e===422?new WS(e,i,r,s):e===429?new HS(e,i,r,s):e>=500?new qS(e,i,r,s):new ft(e,i,r,s)}}class ln extends ft{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ch extends ft{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class ug extends Ch{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $S extends ft{}class US extends ft{}class jS extends ft{}class BS extends ft{}class zS extends ft{}class WS extends ft{}class HS extends ft{}class qS extends ft{}class KS extends J{constructor(){super("Could not parse response content as the length limit was reached")}}class GS extends J{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class na extends Error{constructor(e){super(e)}}const cP=/^[a-z][a-z0-9+.-]*:/i,hP=t=>cP.test(t);let Lt=t=>(Lt=Array.isArray,Lt(t)),Qw=Lt;function QS(t){return typeof t!="object"?{}:t??{}}function dP(t){if(!t)return!0;for(const e in t)return!1;return!0}function fP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const pP=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new J(`${t} must be an integer`);if(e<0)throw new J(`${t} must be a positive integer`);return e},mP=t=>{try{return JSON.parse(t)}catch{return}},vl=t=>new Promise(e=>setTimeout(e,t)),yi="6.1.0",gP=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function yP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const _P=()=>{var n;const t=yP();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":Xw(Deno.build.os),"X-Stainless-Arch":Yw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":Xw(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Yw(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=wP();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":yi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wP(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const Yw=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Xw=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Jw;const vP=()=>Jw??(Jw=_P());function EP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function YS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function XS(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return YS({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function JS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function IP(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const SP=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),ZS="RFC3986",eT=t=>String(t),Zw={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:eT},TP="RFC1738";let kp=(t,e)=>(kp=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),kp(t,e));const Nn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Zd=1024,AP=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=Zd){const u=i.length>=Zd?i.slice(a,a+Zd):i,c=[];for(let h=0;h<u.length;++h){let f=u.charCodeAt(h);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===TP&&(f===40||f===41)){c[c.length]=u.charAt(h);continue}if(f<128){c[c.length]=Nn[f];continue}if(f<2048){c[c.length]=Nn[192|f>>6]+Nn[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=Nn[224|f>>12]+Nn[128|f>>6&63]+Nn[128|f&63];continue}h+=1,f=65536+((f&1023)<<10|u.charCodeAt(h)&1023),c[c.length]=Nn[240|f>>18]+Nn[128|f>>12&63]+Nn[128|f>>6&63]+Nn[128|f&63]}o+=c.join("")}return o};function RP(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function ev(t,e){if(Lt(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const tT={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},nT=function(t,e){Array.prototype.push.apply(t,Lt(e)?e:[e])};let tv;const Ge={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:AP,encodeValuesOnly:!1,format:ZS,formatter:eT,indices:!1,serializeDate(t){return(tv??(tv=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function CP(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const ef={};function rT(t,e,n,r,s,i,o,a,u,c,h,f,p,g,S,T,k,E){let y=t,v=E,b=0,M=!1;for(;(v=v.get(ef))!==void 0&&!M;){const C=v.get(t);if(b+=1,typeof C<"u"){if(C===b)throw new RangeError("Cyclic object value");M=!0}typeof v.get(ef)>"u"&&(b=0)}if(typeof c=="function"?y=c(e,y):y instanceof Date?y=p==null?void 0:p(y):n==="comma"&&Lt(y)&&(y=ev(y,function(C){return C instanceof Date?p==null?void 0:p(C):C})),y===null){if(i)return u&&!T?u(e,Ge.encoder,k,"key",g):e;y=""}if(CP(y)||RP(y)){if(u){const C=T?e:u(e,Ge.encoder,k,"key",g);return[(S==null?void 0:S(C))+"="+(S==null?void 0:S(u(y,Ge.encoder,k,"value",g)))]}return[(S==null?void 0:S(e))+"="+(S==null?void 0:S(String(y)))]}const F=[];if(typeof y>"u")return F;let _;if(n==="comma"&&Lt(y))T&&u&&(y=ev(y,u)),_=[{value:y.length>0?y.join(",")||null:void 0}];else if(Lt(c))_=c;else{const C=Object.keys(y);_=h?C.sort(h):C}const w=a?String(e).replace(/\./g,"%2E"):String(e),A=r&&Lt(y)&&y.length===1?w+"[]":w;if(s&&Lt(y)&&y.length===0)return A+"[]";for(let C=0;C<_.length;++C){const R=_[C],P=typeof R=="object"&&typeof R.value<"u"?R.value:y[R];if(o&&P===null)continue;const x=f&&a?R.replace(/\./g,"%2E"):R,ie=Lt(y)?typeof n=="function"?n(A,x):A:A+(f?"."+x:"["+x+"]");E.set(t,b);const Ee=new WeakMap;Ee.set(ef,E),nT(F,rT(P,ie,n,r,s,i,o,a,n==="comma"&&T&&Lt(y)?null:u,c,h,f,p,g,S,T,k,Ee))}return F}function kP(t=Ge){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ge.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=ZS;if(typeof t.format<"u"){if(!kp(Zw,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Zw[n];let s=Ge.filter;(typeof t.filter=="function"||Lt(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in tT?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ge.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ge.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ge.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ge.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ge.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ge.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ge.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ge.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ge.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ge.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ge.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ge.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ge.strictNullHandling}}function xP(t,e={}){let n=t;const r=kP(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Lt(r.filter)&&(i=r.filter,s=i);const o=[];if(typeof n!="object"||n===null)return"";const a=tT[r.arrayFormat],u=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let p=0;p<s.length;++p){const g=s[p];r.skipNulls&&n[g]===null||nT(o,rT(n[g],g,a,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const h=o.join(r.delimiter);let f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""}function bP(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let nv;function cg(t){let e;return(nv??(e=new globalThis.TextEncoder,nv=e.encode.bind(e)))(t)}let rv;function sv(t){let e;return(rv??(e=new globalThis.TextDecoder,rv=e.decode.bind(e)))(t)}var Wt,Ht;class kh{constructor(){Wt.set(this,void 0),Ht.set(this,void 0),re(this,Wt,new Uint8Array),re(this,Ht,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?cg(e):e;re(this,Wt,bP([L(this,Wt,"f"),n]));const r=[];let s;for(;(s=PP(L(this,Wt,"f"),L(this,Ht,"f")))!=null;){if(s.carriage&&L(this,Ht,"f")==null){re(this,Ht,s.index);continue}if(L(this,Ht,"f")!=null&&(s.index!==L(this,Ht,"f")+1||s.carriage)){r.push(sv(L(this,Wt,"f").subarray(0,L(this,Ht,"f")-1))),re(this,Wt,L(this,Wt,"f").subarray(L(this,Ht,"f"))),re(this,Ht,null);continue}const i=L(this,Ht,"f")!==null?s.preceding-1:s.preceding,o=sv(L(this,Wt,"f").subarray(0,i));r.push(o),re(this,Wt,L(this,Wt,"f").subarray(s.index)),re(this,Ht,null)}return r}flush(){return L(this,Wt,"f").length?this.decode(`
`):[]}}Wt=new WeakMap,Ht=new WeakMap;kh.NEWLINE_CHARS=new Set([`
`,"\r"]);kh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PP(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function NP(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Nc={off:0,error:200,warn:300,info:400,debug:500},iv=(t,e,n)=>{if(t){if(fP(Nc,t))return t;at(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Nc))}`)}};function ra(){}function fu(t,e,n){return!e||Nc[t]>Nc[n]?ra:e[t].bind(e)}const OP={error:ra,warn:ra,info:ra,debug:ra};let ov=new WeakMap;function at(t){const e=t.logger,n=t.logLevel??"off";if(!e)return OP;const r=ov.get(e);if(r&&r[0]===n)return r[1];const s={error:fu("error",e,n),warn:fu("warn",e,n),info:fu("info",e,n),debug:fu("debug",e,n)};return ov.set(e,[n,s]),s}const As=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Qo;class Fn{constructor(e,n,r){this.iterator=e,Qo.set(this,void 0),this.controller=n,re(this,Qo,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?at(r):console;async function*o(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const u of DP(e,n))if(!a){if(u.data.startsWith("[DONE]")){a=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let c;try{c=JSON.parse(u.data)}catch(h){throw i.error("Could not parse message into JSON:",u.data),i.error("From chunk:",u.raw),h}if(c&&c.error)throw new ft(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(u.data)}catch(h){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),h}if(u.event=="error")throw new ft(void 0,c.error,c.message,void 0);yield{event:u.event,data:c}}}a=!0}catch(u){if(Rp(u))return;throw u}finally{a||n.abort()}}return new Fn(o,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const a=new kh,u=JS(e);for await(const c of u)for(const h of a.decode(c))yield h;for(const c of a.flush())yield c}async function*o(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const u of i())a||u&&(yield JSON.parse(u));a=!0}catch(u){if(Rp(u))return;throw u}finally{a||n.abort()}}return new Fn(o,n,r)}[(Qo=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Fn(()=>s(e),this.controller,L(this,Qo,"f")),new Fn(()=>s(n),this.controller,L(this,Qo,"f"))]}toReadableStream(){const e=this;let n;return YS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=cg(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*DP(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new J("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new J("Attempted to iterate over a response with no body");const n=new MP,r=new kh,s=JS(t.body);for await(const i of LP(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*LP(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?cg(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=NP(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class MP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=VP(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function VP(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function sT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var f;if(e.options.stream)return at(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Fn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),u=(f=a==null?void 0:a.split(";")[0])==null?void 0:f.trim();if((u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))){const p=await n.json();return iT(p,n)}return await n.text()})();return at(t).debug(`[${r}] response parsed`,As({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function iT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var sa;class xh extends Promise{constructor(e,n,r=sT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,sa.set(this,void 0),re(this,sa,e)}_thenUnwrap(e){return new xh(L(this,sa,"f"),this.responsePromise,async(n,r)=>iT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(L(this,sa,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}sa=new WeakMap;var pu;class hg{constructor(e,n,r,s){pu.set(this,void 0),re(this,pu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new J("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await L(this,pu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(pu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class FP extends xh{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await sT(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class bh extends hg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class We extends hg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...QS(this.options.query),after:n}}:null}}class $P extends hg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...QS(this.options.query),after:e}}:null}}const oT=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ra(t,e,n){return oT(),new File(t,e??"unknown_file",n)}function Uu(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const aT=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Ks=async(t,e)=>({...t,body:await jP(t.body,e)}),av=new WeakMap;function UP(t){const e=typeof t=="function"?t:t.fetch,n=av.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return av.set(e,r),r}const jP=async(t,e)=>{if(!await UP(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>xp(n,r,s))),n},BP=t=>t instanceof Blob&&"name"in t,xp=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ra([await n.blob()],Uu(n)));else if(aT(n))t.append(e,Ra([await new Response(XS(n)).blob()],Uu(n)));else if(BP(n))t.append(e,n,Uu(n));else if(Array.isArray(n))await Promise.all(n.map(r=>xp(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>xp(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},lT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",zP=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&lT(t),WP=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function HP(t,e,n){if(oT(),t=await t,zP(t))return t instanceof File?t:Ra([await t.arrayBuffer()],t.name);if(WP(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ra(await bp(s),e,n)}const r=await bp(t);if(e||(e=Uu(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Ra(r,e,n)}async function bp(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(lT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(aT(t))for await(const r of t)e.push(...await bp(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${qP(t)}`)}return e}function qP(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ee{constructor(e){this._client=e}}function uT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const lv=Object.freeze(Object.create(null)),KP=(t=uT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((h,f,p)=>{var T;/[?#]/.test(f)&&(s=!0);const g=r[p];let S=(s?encodeURIComponent:t)(""+g);return p!==r.length&&(g==null||typeof g=="object"&&g.toString===((T=Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??lv)??lv))==null?void 0:T.toString))&&(S=g+"",i.push({start:h.length+f.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),h+f+(p===r.length?"":S)},""),a=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((h,f)=>h.start-f.start),i.length>0){let h=0;const f=i.reduce((p,g)=>{const S=" ".repeat(g.start-h),T="^".repeat(g.length);return h=g.start+g.length,p+S+T},"");throw new J(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${o}
${f}`)}return o},B=KP(uT);let cT=class extends ee{list(e,n={},r){return this._client.getAPIList(B`/chat/completions/${e}/messages`,We,{query:n,...r})}};function Oc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function dg(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function El(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function GP(t,e){return!e||!hT(e)?{...t,choices:t.choices.map(n=>(dT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:fg(t,e)}function fg(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new KS;if(r.finish_reason==="content_filter")throw new GS;return dT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>YP(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?QP(e,r.message.content):null}}});return{...t,choices:n}}function QP(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function YP(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Oc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:El(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function XP(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Oc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return Oc(n)&&(El(n)||(n==null?void 0:n.function.strict)||!1)}function hT(t){var e;return dg(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>El(n)||n.type==="function"&&n.function.strict===!0))??!1}function dT(t){for(const e of t||[])if(e.type!=="function")throw new J(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function JP(t){for(const e of t??[]){if(e.type!=="function")throw new J(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new J(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Dc=t=>(t==null?void 0:t.role)==="assistant",fT=t=>(t==null?void 0:t.role)==="tool";var Pp,ju,Bu,ia,oa,zu,aa,Jn,la,Lc,Mc,_i,pT;class pg{constructor(){Pp.add(this),this.controller=new AbortController,ju.set(this,void 0),Bu.set(this,()=>{}),ia.set(this,()=>{}),oa.set(this,void 0),zu.set(this,()=>{}),aa.set(this,()=>{}),Jn.set(this,{}),la.set(this,!1),Lc.set(this,!1),Mc.set(this,!1),_i.set(this,!1),re(this,ju,new Promise((e,n)=>{re(this,Bu,e,"f"),re(this,ia,n,"f")})),re(this,oa,new Promise((e,n)=>{re(this,zu,e,"f"),re(this,aa,n,"f")})),L(this,ju,"f").catch(()=>{}),L(this,oa,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},L(this,Pp,"m",pT).bind(this))},0)}_connected(){this.ended||(L(this,Bu,"f").call(this),this._emit("connect"))}get ended(){return L(this,la,"f")}get errored(){return L(this,Lc,"f")}get aborted(){return L(this,Mc,"f")}abort(){this.controller.abort()}on(e,n){return(L(this,Jn,"f")[e]||(L(this,Jn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=L(this,Jn,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(L(this,Jn,"f")[e]||(L(this,Jn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{re(this,_i,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){re(this,_i,!0),await L(this,oa,"f")}_emit(e,...n){if(L(this,la,"f"))return;e==="end"&&(re(this,la,!0),L(this,zu,"f").call(this));const r=L(this,Jn,"f")[e];if(r&&(L(this,Jn,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!L(this,_i,"f")&&!(r!=null&&r.length)&&Promise.reject(s),L(this,ia,"f").call(this,s),L(this,aa,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!L(this,_i,"f")&&!(r!=null&&r.length)&&Promise.reject(s),L(this,ia,"f").call(this,s),L(this,aa,"f").call(this,s),this._emit("end")}}_emitFinal(){}}ju=new WeakMap,Bu=new WeakMap,ia=new WeakMap,oa=new WeakMap,zu=new WeakMap,aa=new WeakMap,Jn=new WeakMap,la=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,_i=new WeakMap,Pp=new WeakSet,pT=function(e){if(re(this,Lc,!0),e instanceof Error&&e.name==="AbortError"&&(e=new ln),e instanceof ln)return re(this,Mc,!0),this._emit("abort",e);if(e instanceof J)return this._emit("error",e);if(e instanceof Error){const n=new J(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new J(String(e)))};function ZP(t){return typeof t.parse=="function"}var xt,Np,Vc,Op,Dp,Lp,mT,gT;const e2=10;class yT extends pg{constructor(){super(...arguments),xt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),fT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Dc(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new J("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),L(this,xt,"m",Np).call(this)}async finalMessage(){return await this.done(),L(this,xt,"m",Vc).call(this)}async finalFunctionToolCall(){return await this.done(),L(this,xt,"m",Op).call(this)}async finalFunctionToolCallResult(){return await this.done(),L(this,xt,"m",Dp).call(this)}async totalUsage(){return await this.done(),L(this,xt,"m",Lp).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=L(this,xt,"m",Vc).call(this);n&&this._emit("finalMessage",n);const r=L(this,xt,"m",Np).call(this);r&&this._emit("finalContent",r);const s=L(this,xt,"m",Op).call(this);s&&this._emit("finalFunctionToolCall",s);const i=L(this,xt,"m",Dp).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",L(this,xt,"m",Lp).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,xt,"m",mT).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(fg(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var g,S,T;const s="tool",{tool_choice:i="auto",stream:o,...a}=n,u=typeof i!="string"&&i.type==="function"&&((g=i==null?void 0:i.function)==null?void 0:g.name),{maxChatCompletions:c=e2}=r||{},h=n.tools.map(k=>{if(El(k)){if(!k.$callback)throw new J("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:k.$callback,name:k.function.name,description:k.function.description||"",parameters:k.function.parameters,parse:k.$parseRaw,strict:!0}}}return k}),f={};for(const k of h)k.type==="function"&&(f[k.function.name||k.function.function.name]=k.function);const p="tools"in n?h.map(k=>k.type==="function"?{type:"function",function:{name:k.function.name||k.function.function.name,parameters:k.function.parameters,description:k.function.description,strict:k.function.strict}}:k):void 0;for(const k of n.messages)this._addMessage(k,!1);for(let k=0;k<c;++k){const y=(S=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:S.message;if(!y)throw new J("missing message in ChatCompletion response");if(!((T=y.tool_calls)!=null&&T.length))return;for(const v of y.tool_calls){if(v.type!=="function")continue;const b=v.id,{name:M,arguments:F}=v.function,_=f[M];if(_){if(u&&u!==M){const R=`Invalid tool_call: ${JSON.stringify(M)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:s,tool_call_id:b,content:R});continue}}else{const R=`Invalid tool_call: ${JSON.stringify(M)}. Available options are: ${Object.keys(f).map(P=>JSON.stringify(P)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:b,content:R});continue}let w;try{w=ZP(_)?await _.parse(F):F}catch(R){const P=R instanceof Error?R.message:String(R);this._addMessage({role:s,tool_call_id:b,content:P});continue}const A=await _.function(w,this),C=L(this,xt,"m",gT).call(this,A);if(this._addMessage({role:s,tool_call_id:b,content:C}),u)return}}}}xt=new WeakSet,Np=function(){return L(this,xt,"m",Vc).call(this).content??null},Vc=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Dc(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new J("stream ended without producing a ChatCompletionMessage with role=assistant")},Op=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(Dc(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},Dp=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(fT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Lp=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},mT=function(e){if(e.n!=null&&e.n>1)throw new J("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},gT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class mg extends yT{static runTools(e,n,r){const s=new mg,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),Dc(e)&&e.content&&this._emit("content",e.content)}}const _T=1,wT=2,vT=4,ET=8,IT=16,ST=32,TT=64,AT=128,RT=256,CT=AT|RT,kT=IT|ST|CT|TT,xT=_T|wT|kT,bT=vT|ET,t2=xT|bT,tt={STR:_T,NUM:wT,ARR:vT,OBJ:ET,NULL:IT,BOOL:ST,NAN:TT,INFINITY:AT,MINUS_INFINITY:RT,INF:CT,SPECIAL:kT,ATOM:xT,COLLECTION:bT,ALL:t2};class n2 extends Error{}class r2 extends Error{}function s2(t,e=tt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return i2(t.trim(),e)}const i2=(t,e)=>{const n=t.length;let r=0;const s=p=>{throw new n2(`${p} at position ${r}`)},i=p=>{throw new r2(`${p} at position ${r}`)},o=()=>(f(),r>=n&&s("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?u():t[r]==="["?c():t.substring(r,r+4)==="null"||tt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||tt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||tt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||tt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||tt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||tt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):h()),a=()=>{const p=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(g)))}catch(S){i(String(S))}else if(tt.STR&e)try{return JSON.parse(t.substring(p,r-Number(g))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},u=()=>{r++,f();const p={};try{for(;t[r]!=="}";){if(f(),r>=n&&tt.OBJ&e)return p;const g=a();f(),r++;try{const S=o();Object.defineProperty(p,g,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(tt.OBJ&e)return p;throw S}f(),t[r]===","&&r++}}catch{if(tt.OBJ&e)return p;s("Expected '}' at end of object")}return r++,p},c=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(o()),f(),t[r]===","&&r++}catch{if(tt.ARR&e)return p;s("Expected ']' at end of array")}return r++,p},h=()=>{if(r===0){t==="-"&&tt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(tt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(g))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(tt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&tt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(S){i(String(S))}}},f=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},uv=t=>s2(t,tt.ALL^tt.NUM);var Ke,Xn,pi,br,tf,mu,nf,rf,sf,gu,of,cv;class tl extends yT{constructor(e){super(),Ke.add(this),Xn.set(this,void 0),pi.set(this,void 0),br.set(this,void 0),re(this,Xn,e),re(this,pi,[])}get currentChatCompletionSnapshot(){return L(this,br,"f")}static fromReadableStream(e){const n=new tl(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new tl(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,Ke,"m",tf).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)L(this,Ke,"m",nf).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new ln;return this._addChatCompletion(L(this,Ke,"m",gu).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),L(this,Ke,"m",tf).call(this),this._connected();const s=Fn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(L(this,Ke,"m",gu).call(this)),L(this,Ke,"m",nf).call(this,a),i=a.id;if((o=s.controller.signal)!=null&&o.aborted)throw new ln;return this._addChatCompletion(L(this,Ke,"m",gu).call(this))}[(Xn=new WeakMap,pi=new WeakMap,br=new WeakMap,Ke=new WeakSet,tf=function(){this.ended||re(this,br,void 0)},mu=function(n){let r=L(this,pi,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},L(this,pi,"f")[n.index]=r,r)},nf=function(n){var s,i,o,a,u,c,h,f,p,g,S,T,k,E,y;if(this.ended)return;const r=L(this,Ke,"m",cv).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const b=r.choices[v.index];v.delta.content!=null&&((s=b.message)==null?void 0:s.role)==="assistant"&&((i=b.message)!=null&&i.content)&&(this._emit("content",v.delta.content,b.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:b.message.content,parsed:b.message.parsed})),v.delta.refusal!=null&&((o=b.message)==null?void 0:o.role)==="assistant"&&((a=b.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:b.message.refusal}),((u=v.logprobs)==null?void 0:u.content)!=null&&((c=b.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=v.logprobs)==null?void 0:h.content,snapshot:((f=b.logprobs)==null?void 0:f.content)??[]}),((p=v.logprobs)==null?void 0:p.refusal)!=null&&((g=b.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=v.logprobs)==null?void 0:S.refusal,snapshot:((T=b.logprobs)==null?void 0:T.refusal)??[]});const M=L(this,Ke,"m",mu).call(this,b);b.finish_reason&&(L(this,Ke,"m",sf).call(this,b),M.current_tool_call_index!=null&&L(this,Ke,"m",rf).call(this,b,M.current_tool_call_index));for(const F of v.delta.tool_calls??[])M.current_tool_call_index!==F.index&&(L(this,Ke,"m",sf).call(this,b),M.current_tool_call_index!=null&&L(this,Ke,"m",rf).call(this,b,M.current_tool_call_index)),M.current_tool_call_index=F.index;for(const F of v.delta.tool_calls??[]){const _=(k=b.message.tool_calls)==null?void 0:k[F.index];_!=null&&_.type&&((_==null?void 0:_.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(E=_.function)==null?void 0:E.name,index:F.index,arguments:_.function.arguments,parsed_arguments:_.function.parsed_arguments,arguments_delta:((y=F.function)==null?void 0:y.arguments)??""}):(_==null||_.type,void 0))}}},rf=function(n,r){var o,a,u;if(L(this,Ke,"m",mu).call(this,n).done_tool_calls.has(r))return;const i=(o=n.message.tool_calls)==null?void 0:o[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const c=(u=(a=L(this,Xn,"f"))==null?void 0:a.tools)==null?void 0:u.find(h=>Oc(h)&&h.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:El(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},sf=function(n){var s,i;const r=L(this,Ke,"m",mu).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=L(this,Ke,"m",of).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},gu=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=L(this,br,"f");if(!n)throw new J("request ended without sending any chunks");return re(this,br,void 0),re(this,pi,[]),o2(n,L(this,Xn,"f"))},of=function(){var r;const n=(r=L(this,Xn,"f"))==null?void 0:r.response_format;return dg(n)?n:null},cv=function(n){var r,s,i,o;let a=L(this,br,"f");const{choices:u,...c}=n;a?Object.assign(a,c):a=re(this,br,{...c,choices:[]});for(const{delta:h,finish_reason:f,index:p,logprobs:g=null,...S}of n.choices){let T=a.choices[p];if(T||(T=a.choices[p]={finish_reason:f,index:p,message:{},logprobs:g,...S}),g)if(!T.logprobs)T.logprobs=Object.assign({},g);else{const{content:F,refusal:_,...w}=g;Object.assign(T.logprobs,w),F&&((r=T.logprobs).content??(r.content=[]),T.logprobs.content.push(...F)),_&&((s=T.logprobs).refusal??(s.refusal=[]),T.logprobs.refusal.push(..._))}if(f&&(T.finish_reason=f,L(this,Xn,"f")&&hT(L(this,Xn,"f")))){if(f==="length")throw new KS;if(f==="content_filter")throw new GS}if(Object.assign(T,S),!h)continue;const{content:k,refusal:E,function_call:y,role:v,tool_calls:b,...M}=h;if(Object.assign(T.message,M),E&&(T.message.refusal=(T.message.refusal||"")+E),v&&(T.message.role=v),y&&(T.message.function_call?(y.name&&(T.message.function_call.name=y.name),y.arguments&&((i=T.message.function_call).arguments??(i.arguments=""),T.message.function_call.arguments+=y.arguments)):T.message.function_call=y),k&&(T.message.content=(T.message.content||"")+k,!T.message.refusal&&L(this,Ke,"m",of).call(this)&&(T.message.parsed=uv(T.message.content))),b){T.message.tool_calls||(T.message.tool_calls=[]);for(const{index:F,id:_,type:w,function:A,...C}of b){const R=(o=T.message.tool_calls)[F]??(o[F]={});Object.assign(R,C),_&&(R.id=_),w&&(R.type=w),A&&(R.function??(R.function={name:A.name??"",arguments:""})),A!=null&&A.name&&(R.function.name=A.name),A!=null&&A.arguments&&(R.function.arguments+=A.arguments,XP(L(this,Xn,"f"),R)&&(R.function.parsed_arguments=uv(R.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function o2(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:o,...a}=t,u={...a,id:n,choices:r.map(({message:c,finish_reason:h,index:f,logprobs:p,...g})=>{if(!h)throw new J(`missing finish_reason for choice ${f}`);const{content:S=null,function_call:T,tool_calls:k,...E}=c,y=c.role;if(!y)throw new J(`missing role for choice ${f}`);if(T){const{arguments:v,name:b}=T;if(v==null)throw new J(`missing function_call.arguments for choice ${f}`);if(!b)throw new J(`missing function_call.name for choice ${f}`);return{...g,message:{content:S,function_call:{arguments:v,name:b},role:y,refusal:c.refusal??null},finish_reason:h,index:f,logprobs:p}}return k?{...g,index:f,finish_reason:h,logprobs:p,message:{...E,role:y,content:S,refusal:c.refusal??null,tool_calls:k.map((v,b)=>{const{function:M,type:F,id:_,...w}=v,{arguments:A,name:C,...R}=M||{};if(_==null)throw new J(`missing choices[${f}].tool_calls[${b}].id
${yu(t)}`);if(F==null)throw new J(`missing choices[${f}].tool_calls[${b}].type
${yu(t)}`);if(C==null)throw new J(`missing choices[${f}].tool_calls[${b}].function.name
${yu(t)}`);if(A==null)throw new J(`missing choices[${f}].tool_calls[${b}].function.arguments
${yu(t)}`);return{...w,id:_,type:F,function:{...R,name:C,arguments:A}}})}}:{...g,message:{...E,content:S,role:y,refusal:c.refusal??null},finish_reason:h,index:f,logprobs:p}}),created:s,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return GP(u,e)}function yu(t){return JSON.stringify(t)}class Fc extends tl{static fromReadableStream(e){const n=new Fc(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Fc(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let gg=class extends ee{constructor(){super(...arguments),this.messages=new cT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(B`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(B`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",We,{query:e,...n})}delete(e,n){return this._client.delete(B`/chat/completions/${e}`,n)}parse(e,n){return JP(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>fg(r,e))}runTools(e,n){return e.stream?Fc.runTools(this._client,e,n):mg.runTools(this._client,e,n)}stream(e,n){return tl.createChatCompletion(this._client,e,n)}};gg.Messages=cT;class yg extends ee{constructor(){super(...arguments),this.completions=new gg(this._client)}}yg.Completions=gg;const PT=Symbol("brand.privateNullableHeaders");function*a2(t){if(!t)return;if(PT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Qw(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Qw(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Q=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of a2(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[PT]:!0,values:e,nulls:n}};class NT extends ee{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Q([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class OT extends ee{create(e,n){return this._client.post("/audio/transcriptions",Ks({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class DT extends ee{create(e,n){return this._client.post("/audio/translations",Ks({body:e,...n,__metadata:{model:e.model}},this._client))}}class Il extends ee{constructor(){super(...arguments),this.transcriptions=new OT(this._client),this.translations=new DT(this._client),this.speech=new NT(this._client)}}Il.Transcriptions=OT;Il.Translations=DT;Il.Speech=NT;class LT extends ee{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(B`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",We,{query:e,...n})}cancel(e,n){return this._client.post(B`/batches/${e}/cancel`,n)}}class MT extends ee{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/assistants/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/assistants/${e}`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",We,{query:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(B`/assistants/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class VT extends ee{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class FT extends ee{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let Ph=class extends ee{constructor(){super(...arguments),this.sessions=new VT(this._client),this.transcriptionSessions=new FT(this._client)}};Ph.Sessions=VT;Ph.TranscriptionSessions=FT;class $T extends ee{create(e,n,r){return this._client.post(B`/threads/${e}/messages`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(B`/threads/${s}/messages/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/messages/${e}`,{body:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/threads/${e}/messages`,We,{query:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(B`/threads/${s}/messages/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class UT extends ee{retrieve(e,n,r){const{thread_id:s,run_id:i,...o}=n;return this._client.get(B`/threads/${s}/runs/${i}/steps/${e}`,{query:o,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(B`/threads/${s}/runs/${e}/steps`,We,{query:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const l2=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var af={};const mi=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=af==null?void 0:af[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var lt,Ds,Mp,Dn,Wu,mn,Ls,Mi,xs,$c,qt,Hu,qu,Ca,ua,ca,hv,dv,fv,pv,mv,gv,yv;class ka extends pg{constructor(){super(...arguments),lt.add(this),Mp.set(this,[]),Dn.set(this,{}),Wu.set(this,{}),mn.set(this,void 0),Ls.set(this,void 0),Mi.set(this,void 0),xs.set(this,void 0),$c.set(this,void 0),qt.set(this,void 0),Hu.set(this,void 0),qu.set(this,void 0),Ca.set(this,void 0)}[(Mp=new WeakMap,Dn=new WeakMap,Wu=new WeakMap,mn=new WeakMap,Ls=new WeakMap,Mi=new WeakMap,xs=new WeakMap,$c=new WeakMap,qt=new WeakMap,Hu=new WeakMap,qu=new WeakMap,Ca=new WeakMap,lt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Ds;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Fn.fromReadableStream(e,this.controller);for await(const o of s)L(this,lt,"m",ua).call(this,o);if((i=s.controller.signal)!=null&&i.aborted)throw new ln;return this._addRun(L(this,lt,"m",ca).call(this))}toReadableStream(){return new Fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new Ds;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){var u;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...s,signal:this.controller.signal});this._connected();for await(const c of a)L(this,lt,"m",ua).call(this,c);if((u=a.controller.signal)!=null&&u.aborted)throw new ln;return this._addRun(L(this,lt,"m",ca).call(this))}static createThreadAssistantStream(e,n,r){const s=new Ds;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new Ds;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return L(this,Hu,"f")}currentRun(){return L(this,qu,"f")}currentMessageSnapshot(){return L(this,mn,"f")}currentRunStepSnapshot(){return L(this,Ca,"f")}async finalRunSteps(){return await this.done(),Object.values(L(this,Dn,"f"))}async finalMessages(){return await this.done(),Object.values(L(this,Wu,"f"))}async finalRun(){if(await this.done(),!L(this,Ls,"f"))throw Error("Final run was not received.");return L(this,Ls,"f")}async _createThreadAssistantStream(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const u of o)L(this,lt,"m",ua).call(this,u);if((a=o.controller.signal)!=null&&a.aborted)throw new ln;return this._addRun(L(this,lt,"m",ca).call(this))}async _createAssistantStream(e,n,r,s){var u;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const c of a)L(this,lt,"m",ua).call(this,c);if((u=a.controller.signal)!=null&&u.aborted)throw new ln;return this._addRun(L(this,lt,"m",ca).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(Jd(i)&&Jd(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...s);continue}for(const o of s){if(!Jd(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const u=i[a];u==null?i.push(o):i[a]=this.accumulateDelta(u,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}Ds=ka,ua=function(e){if(!this.ended)switch(re(this,Hu,e),L(this,lt,"m",fv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":L(this,lt,"m",yv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":L(this,lt,"m",dv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":L(this,lt,"m",hv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ca=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");if(!L(this,Ls,"f"))throw Error("Final run has not been received");return L(this,Ls,"f")},hv=function(e){const[n,r]=L(this,lt,"m",mv).call(this,e,L(this,mn,"f"));re(this,mn,n),L(this,Wu,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=L(this,Mi,"f")){if(L(this,xs,"f"))switch(L(this,xs,"f").type){case"text":this._emit("textDone",L(this,xs,"f").text,L(this,mn,"f"));break;case"image_file":this._emit("imageFileDone",L(this,xs,"f").image_file,L(this,mn,"f"));break}re(this,Mi,s.index)}re(this,xs,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(L(this,Mi,"f")!==void 0){const s=e.data.content[L(this,Mi,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,L(this,mn,"f"));break;case"text":this._emit("textDone",s.text,L(this,mn,"f"));break}}L(this,mn,"f")&&this._emit("messageDone",e.data),re(this,mn,void 0)}},dv=function(e){const n=L(this,lt,"m",pv).call(this,e);switch(re(this,Ca,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==L(this,$c,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(L(this,qt,"f")&&this._emit("toolCallDone",L(this,qt,"f")),re(this,$c,i.index),re(this,qt,n.step_details.tool_calls[i.index]),L(this,qt,"f")&&this._emit("toolCallCreated",L(this,qt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":re(this,Ca,void 0),e.data.step_details.type=="tool_calls"&&L(this,qt,"f")&&(this._emit("toolCallDone",L(this,qt,"f")),re(this,qt,void 0)),this._emit("runStepDone",e.data,n);break}},fv=function(e){L(this,Mp,"f").push(e),this._emit("event",e)},pv=function(e){switch(e.event){case"thread.run.step.created":return L(this,Dn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=L(this,Dn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Ds.accumulateDelta(n,r.delta);L(this,Dn,"f")[e.data.id]=s}return L(this,Dn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":L(this,Dn,"f")[e.data.id]=e.data;break}if(L(this,Dn,"f")[e.data.id])return L(this,Dn,"f")[e.data.id];throw new Error("No snapshot available")},mv=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=L(this,lt,"m",gv).call(this,i,o)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},gv=function(e,n){return Ds.accumulateDelta(n,e)},yv=function(e){switch(re(this,qu,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":re(this,Ls,e.data),L(this,qt,"f")&&(this._emit("toolCallDone",L(this,qt,"f")),re(this,qt,void 0));break}};let _g=class extends ee{constructor(){super(...arguments),this.steps=new UT(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(B`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(B`/threads/${s}/runs/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/runs/${e}`,{body:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/threads/${e}/runs`,We,{query:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(B`/threads/${s}/runs/${e}/cancel`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return ka.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i;const s=Q([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=a.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await vl(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return ka.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return ka.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};_g.Steps=UT;class Nh extends ee{constructor(){super(...arguments),this.runs=new _g(this._client),this.messages=new $T(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/threads/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/threads/${e}`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(B`/threads/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return ka.createThreadAssistantStream(e,this._client.beta.threads,n)}}Nh.Runs=_g;Nh.Messages=$T;class Sl extends ee{constructor(){super(...arguments),this.realtime=new Ph(this._client),this.assistants=new MT(this._client),this.threads=new Nh(this._client)}}Sl.Realtime=Ph;Sl.Assistants=MT;Sl.Threads=Nh;class jT extends ee{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class BT extends ee{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(B`/containers/${s}/files/${e}/content`,{...r,headers:Q([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let wg=class extends ee{constructor(){super(...arguments),this.content=new BT(this._client)}create(e,n,r){return this._client.post(B`/containers/${e}/files`,Ks({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(B`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(B`/containers/${e}/files`,We,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(B`/containers/${s}/files/${e}`,{...r,headers:Q([{Accept:"*/*"},r==null?void 0:r.headers])})}};wg.Content=BT;class vg extends ee{constructor(){super(...arguments),this.files=new wg(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(B`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",We,{query:e,...n})}delete(e,n){return this._client.delete(B`/containers/${e}`,{...n,headers:Q([{Accept:"*/*"},n==null?void 0:n.headers])})}}vg.Files=wg;class zT extends ee{create(e,n,r){const{include:s,...i}=n;return this._client.post(B`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(B`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(B`/conversations/${e}/items`,$P,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(B`/conversations/${s}/items/${e}`,r)}}class Eg extends ee{constructor(){super(...arguments),this.items=new zT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(B`/conversations/${e}`,n)}update(e,n,r){return this._client.post(B`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(B`/conversations/${e}`,n)}}Eg.Items=zT;class WT extends ee{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&at(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(at(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const u=a.embedding;a.embedding=l2(u)}),o)))}}class HT extends ee{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(B`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(B`/evals/${s}/runs/${e}/output_items`,We,{query:i,...r})}}class Ig extends ee{constructor(){super(...arguments),this.outputItems=new HT(this._client)}create(e,n,r){return this._client.post(B`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(B`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(B`/evals/${e}/runs`,We,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(B`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(B`/evals/${s}/runs/${e}`,r)}}Ig.OutputItems=HT;class Sg extends ee{constructor(){super(...arguments),this.runs=new Ig(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(B`/evals/${e}`,n)}update(e,n,r){return this._client.post(B`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",We,{query:e,...n})}delete(e,n){return this._client.delete(B`/evals/${e}`,n)}}Sg.Runs=Ig;let qT=class extends ee{create(e,n){return this._client.post("/files",Ks({body:e,...n},this._client))}retrieve(e,n){return this._client.get(B`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",We,{query:e,...n})}delete(e,n){return this._client.delete(B`/files/${e}`,n)}content(e,n){return this._client.get(B`/files/${e}/content`,{...n,headers:Q([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await vl(n),o=await this.retrieve(e),Date.now()-i>r)throw new ug({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class KT extends ee{}let GT=class extends ee{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Tg extends ee{constructor(){super(...arguments),this.graders=new GT(this._client)}}Tg.Graders=GT;class QT extends ee{create(e,n,r){return this._client.getAPIList(B`/fine_tuning/checkpoints/${e}/permissions`,bh,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(B`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(B`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Ag=class extends ee{constructor(){super(...arguments),this.permissions=new QT(this._client)}};Ag.Permissions=QT;class YT extends ee{list(e,n={},r){return this._client.getAPIList(B`/fine_tuning/jobs/${e}/checkpoints`,We,{query:n,...r})}}class Rg extends ee{constructor(){super(...arguments),this.checkpoints=new YT(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(B`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",We,{query:e,...n})}cancel(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(B`/fine_tuning/jobs/${e}/events`,We,{query:n,...r})}pause(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/resume`,n)}}Rg.Checkpoints=YT;class ho extends ee{constructor(){super(...arguments),this.methods=new KT(this._client),this.jobs=new Rg(this._client),this.checkpoints=new Ag(this._client),this.alpha=new Tg(this._client)}}ho.Methods=KT;ho.Jobs=Rg;ho.Checkpoints=Ag;ho.Alpha=Tg;class XT extends ee{}class Cg extends ee{constructor(){super(...arguments),this.graderModels=new XT(this._client)}}Cg.GraderModels=XT;class JT extends ee{createVariation(e,n){return this._client.post("/images/variations",Ks({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ks({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class ZT extends ee{retrieve(e,n){return this._client.get(B`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",bh,e)}delete(e,n){return this._client.delete(B`/models/${e}`,n)}}class e1 extends ee{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class t1 extends ee{accept(e,n,r){return this._client.post(B`/realtime/calls/${e}/accept`,{body:n,...r,headers:Q([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(B`/realtime/calls/${e}/hangup`,{...n,headers:Q([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(B`/realtime/calls/${e}/refer`,{body:n,...r,headers:Q([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(B`/realtime/calls/${e}/reject`,{body:n,...r,headers:Q([{Accept:"*/*"},r==null?void 0:r.headers])})}}class n1 extends ee{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Oh extends ee{constructor(){super(...arguments),this.clientSecrets=new n1(this._client),this.calls=new t1(this._client)}}Oh.ClientSecrets=n1;Oh.Calls=t1;function u2(t,e){return!e||!h2(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:r1(t,e)}function r1(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:p2(e,s)};if(s.type==="message"){const i=s.content.map(o=>o.type==="output_text"?{...o,parsed:c2(e,o.text)}:o);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Vp(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function c2(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function h2(t){var e;return!!dg((e=t.text)==null?void 0:e.format)}function d2(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function f2(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function p2(t,e){const n=f2(t.tools??[],e.name);return{...e,...e,parsed_arguments:d2(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Vp(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var gi,_u,Pr,wu,_v,wv,vv,Ev;class kg extends pg{constructor(e){super(),gi.add(this),_u.set(this,void 0),Pr.set(this,void 0),wu.set(this,void 0),re(this,_u,e)}static createResponse(e,n,r){const s=new kg(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,gi,"m",_v).call(this);let i,o=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of i)L(this,gi,"m",wv).call(this,u,o);if((a=i.controller.signal)!=null&&a.aborted)throw new ln;return L(this,gi,"m",vv).call(this)}[(_u=new WeakMap,Pr=new WeakMap,wu=new WeakMap,gi=new WeakSet,_v=function(){this.ended||re(this,Pr,void 0)},wv=function(n,r){if(this.ended)return;const s=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},i=L(this,gi,"m",Ev).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new J(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new J(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new J(`expected content to be 'output_text', got ${a.type}`);s("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new J(`missing output at index ${n.output_index}`);o.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:s(n.type,n);break}},vv=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=L(this,Pr,"f");if(!n)throw new J("request ended without sending any events");re(this,Pr,void 0);const r=m2(n,L(this,_u,"f"));return re(this,wu,r),r},Ev=function(n){var s;let r=L(this,Pr,"f");if(!r){if(n.type!=="response.created")throw new J(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=re(this,Pr,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);const o=i.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?i.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(a));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new J(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new J(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const o=(s=i.content)==null?void 0:s[n.content_index];if(!o)throw new J(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new J(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{re(this,Pr,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=L(this,wu,"f");if(!e)throw new J("stream ended without producing a ChatCompletion");return e}}function m2(t,e){return u2(t,e)}class s1 extends ee{list(e,n={},r){return this._client.getAPIList(B`/responses/${e}/input_items`,We,{query:n,...r})}}class xg extends ee{constructor(){super(...arguments),this.inputItems=new s1(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Vp(r),r))}retrieve(e,n={},r){return this._client.get(B`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Vp(s),s))}delete(e,n){return this._client.delete(B`/responses/${e}`,{...n,headers:Q([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>r1(r,e))}stream(e,n){return kg.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(B`/responses/${e}/cancel`,n)}}xg.InputItems=s1;class i1 extends ee{create(e,n,r){return this._client.post(B`/uploads/${e}/parts`,Ks({body:n,...r},this._client))}}class bg extends ee{constructor(){super(...arguments),this.parts=new i1(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(B`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(B`/uploads/${e}/complete`,{body:n,...r})}}bg.Parts=i1;const g2=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class o1 extends ee{create(e,n,r){return this._client.post(B`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(B`/vector_stores/${s}/file_batches/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(B`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(B`/vector_stores/${s}/file_batches/${e}/files`,We,{query:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i;const s=Q([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(o.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=a.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await vl(u);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(i,n.length),a=this._client,u=n.values(),c=[...r];async function h(p){for(let g of p){const S=await a.files.create({file:g,purpose:"assistants"},s);c.push(S.id)}}const f=Array(o).fill(u).map(h);return await g2(f),await this.createAndPoll(e,{file_ids:c})}}class a1 extends ee{create(e,n,r){return this._client.post(B`/vector_stores/${e}/files`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(B`/vector_stores/${s}/files/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(B`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/vector_stores/${e}/files`,We,{query:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(B`/vector_stores/${s}/files/${e}`,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){var i;const s=Q([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),a=o.data;switch(a.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=o.response.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await vl(u);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(B`/vector_stores/${s}/files/${e}/content`,bh,{...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Dh extends ee{constructor(){super(...arguments),this.files=new a1(this._client),this.fileBatches=new o1(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/vector_stores/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/vector_stores/${e}`,{body:n,...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",We,{query:e,...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(B`/vector_stores/${e}`,{...n,headers:Q([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(B`/vector_stores/${e}/search`,bh,{body:n,method:"post",...r,headers:Q([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}Dh.Files=a1;Dh.FileBatches=o1;var wi,l1,Ku;class u1 extends ee{constructor(){super(...arguments),wi.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");L(this,wi,"m",l1).call(this,r);const i=Q([n]).values,o=L(this,wi,"m",Ku).call(this,i,"webhook-signature"),a=L(this,wi,"m",Ku).call(this,i,"webhook-timestamp"),u=L(this,wi,"m",Ku).call(this,i,"webhook-id"),c=parseInt(a,10);if(isNaN(c))throw new na("Invalid webhook timestamp format");const h=Math.floor(Date.now()/1e3);if(h-c>s)throw new na("Webhook timestamp is too old");if(c>h+s)throw new na("Webhook timestamp is too new");const f=o.split(" ").map(T=>T.startsWith("v1,")?T.substring(3):T),p=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=u?`${u}.${a}.${e}`:`${a}.${e}`,S=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const T of f)try{const k=Buffer.from(T,"base64");if(await crypto.subtle.verify("HMAC",S,k,new TextEncoder().encode(g)))return}catch{continue}throw new na("The given webhook signature does not match the expected signature")}}wi=new WeakSet,l1=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ku=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Fp,Pg,Gu,c1;class ce{constructor({baseURL:e=mi("OPENAI_BASE_URL"),apiKey:n=mi("OPENAI_API_KEY"),organization:r=mi("OPENAI_ORG_ID")??null,project:s=mi("OPENAI_PROJECT_ID")??null,webhookSecret:i=mi("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(Fp.add(this),Gu.set(this,void 0),this.completions=new jT(this),this.chat=new yg(this),this.embeddings=new WT(this),this.files=new qT(this),this.images=new JT(this),this.audio=new Il(this),this.moderations=new e1(this),this.models=new ZT(this),this.fineTuning=new ho(this),this.graders=new Cg(this),this.vectorStores=new Dh(this),this.webhooks=new u1(this),this.beta=new Sl(this),this.batches=new LT(this),this.uploads=new bg(this),this.responses=new xg(this),this.realtime=new Oh(this),this.conversations=new Eg(this),this.evals=new Sg(this),this.containers=new vg(this),n===void 0)throw new J("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:s,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&gP())throw new J(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??Pg.DEFAULT_TIMEOUT,this.logger=a.logger??console;const u="warn";this.logLevel=u,this.logLevel=iv(a.logLevel,"ClientOptions.logLevel",this)??iv(mi("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??EP(),re(this,Gu,SP),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Q([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return xP(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${yi}`}defaultIdempotencyKey(){return`stainless-node-retry-${FS()}`}makeStatusError(e,n,r,s){return ft.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof J?r:new J(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new J(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!L(this,Fp,"m",c1).call(this)&&r||this.baseURL,i=hP(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return dP(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new xh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var E,y;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:o,url:a,timeout:u}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(o,{url:a,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if(at(this).debug(`[${c}] sending request`,As({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:o.headers})),(E=s.signal)!=null&&E.aborted)throw new ln;const p=new AbortController,g=await this.fetchWithTimeout(a,o,u,p).catch(Cp),S=Date.now();if(g instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if((y=s.signal)!=null&&y.aborted)throw new ln;const b=Rp(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return at(this).info(`[${c}] connection ${b?"timed out":"failed"} - ${v}`),at(this).debug(`[${c}] connection ${b?"timed out":"failed"} (${v})`,As({retryOfRequestLogID:r,url:a,durationMs:S-f,message:g.message})),this.retryRequest(s,n,r??c);throw at(this).info(`[${c}] connection ${b?"timed out":"failed"} - error; no more retries left`),at(this).debug(`[${c}] connection ${b?"timed out":"failed"} (error; no more retries left)`,As({retryOfRequestLogID:r,url:a,durationMs:S-f,message:g.message})),b?new ug:new Ch({cause:g})}const T=[...g.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,b])=>", "+v+": "+JSON.stringify(b)).join(""),k=`[${c}${h}${T}] ${o.method} ${a} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${S-f}ms`;if(!g.ok){const v=await this.shouldRetry(g);if(n&&v){const A=`retrying, ${n} attempts remaining`;return await IP(g.body),at(this).info(`${k} - ${A}`),at(this).debug(`[${c}] response error (${A})`,As({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:S-f})),this.retryRequest(s,n,r??c,g.headers)}const b=v?"error; no more retries left":"error; not retryable";at(this).info(`${k} - ${b}`);const M=await g.text().catch(A=>Cp(A).message),F=mP(M),_=F?void 0:M;throw at(this).debug(`[${c}] response error (${b})`,As({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:_,durationMs:Date.now()-f})),this.makeStatusError(g.status,F,_,g.headers)}return at(this).info(k),at(this).debug(`[${c}] response start`,As({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:S-f})),{response:g,options:s,controller:p,requestLogID:c,retryOfRequestLogID:r,startTime:f}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new FP(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:o,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,h={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...a};o&&(h.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const o=s==null?void 0:s.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(i=u)}const a=s==null?void 0:s.get("retry-after");if(a&&!i){const u=parseFloat(a);Number.isNaN(u)?i=Date.parse(a)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){const u=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await vl(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:o,defaultBaseURL:a}=r,u=this.buildURL(i,o,a);"timeout"in r&&pP("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:h}=this.buildBody({options:r}),f=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:f,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"},...h&&{body:h},...this.fetchOptions??{},...r.fetchOptions??{}},url:u,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=Q([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...vP(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Q([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:XS(e)}:L(this,Gu,"f").call(this,{body:e,headers:r})}}Pg=ce,Gu=new WeakMap,Fp=new WeakSet,c1=function(){return this.baseURL!=="https://api.openai.com/v1"};ce.OpenAI=Pg;ce.DEFAULT_TIMEOUT=6e5;ce.OpenAIError=J;ce.APIError=ft;ce.APIConnectionError=Ch;ce.APIConnectionTimeoutError=ug;ce.APIUserAbortError=ln;ce.NotFoundError=BS;ce.ConflictError=zS;ce.RateLimitError=HS;ce.BadRequestError=$S;ce.AuthenticationError=US;ce.InternalServerError=qS;ce.PermissionDeniedError=jS;ce.UnprocessableEntityError=WS;ce.InvalidWebhookSignatureError=na;ce.toFile=HP;ce.Completions=jT;ce.Chat=yg;ce.Embeddings=WT;ce.Files=qT;ce.Images=JT;ce.Audio=Il;ce.Moderations=e1;ce.Models=ZT;ce.FineTuning=ho;ce.Graders=Cg;ce.VectorStores=Dh;ce.Webhooks=u1;ce.Beta=Sl;ce.Batches=LT;ce.Uploads=bg;ce.Responses=xg;ce.Realtime=Oh;ce.Conversations=Eg;ce.Evals=Sg;ce.Containers=vg;var ms={exports:{}};const y2={},_2=Object.freeze(Object.defineProperty({__proto__:null,default:y2},Symbol.toStringTag,{value:"Module"})),Lh=JC(_2),w2="17.2.3",v2={version:w2};var Us={};const $p=Lh,Uc=Lh,E2=Lh,I2=Lh,S2=v2,Ng=S2.version,Iv=[" encrypt with Dotenvx: https://dotenvx.com"," prevent committing .env to code: https://dotenvx.com/precommit"," prevent building .env in docker: https://dotenvx.com/prebuild"," add observability to secrets: https://dotenvx.com/ops"," sync secrets across teammates & machines: https://dotenvx.com/ops"," backup and recover secrets: https://dotenvx.com/ops"," audit secrets and track compliance: https://dotenvx.com/ops"," add secrets lifecycle management: https://dotenvx.com/ops"," add access controls to secrets: https://dotenvx.com/ops","  run anywhere with `dotenvx run -- yourcommand`","  specify custom .env file path with { path: '/custom/path/.env' }","  enable debug logging with { debug: true }","  override existing env vars with { override: true }","  suppress all logs with { quiet: true }","  write to custom object with { processEnv: myObject }","  load multiple .env files with { path: ['.env.local', '.env'] }"];function T2(){return Iv[Math.floor(Math.random()*Iv.length)]}function Vi(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function A2(){return process.stdout.isTTY}function R2(t){return A2()?`\x1B[2m${t}\x1B[0m`:t}const C2=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function k2(t){const e={};let n=t.toString();n=n.replace(/\r\n?/mg,`
`);let r;for(;(r=C2.exec(n))!=null;){const s=r[1];let i=r[2]||"";i=i.trim();const o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[s]=i}return e}function x2(t){t=t||{};const e=f1(t);t.path=e;const n=Je.configDotenv(t);if(!n.parsed){const o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}const r=d1(t).split(","),s=r.length;let i;for(let o=0;o<s;o++)try{const a=r[o].trim(),u=P2(n,a);i=Je.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=s)throw a}return Je.parse(i)}function b2(t){console.error(`[dotenv@${Ng}][WARN] ${t}`)}function xa(t){console.log(`[dotenv@${Ng}][DEBUG] ${t}`)}function h1(t){console.log(`[dotenv@${Ng}] ${t}`)}function d1(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:Us.DOTENV_KEY&&Us.DOTENV_KEY.length>0?Us.DOTENV_KEY:""}function P2(t,e){let n;try{n=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){const u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}const r=n.password;if(!r){const a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}const s=n.searchParams.get("environment");if(!s){const a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}const i=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[i];if(!o){const a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:r}}function f1(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(const n of t.path)$p.existsSync(n)&&(e=n.endsWith(".vault")?n:`${n}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=Uc.resolve(process.cwd(),".env.vault");return $p.existsSync(e)?e:null}function Sv(t){return t[0]==="~"?Uc.join(E2.homedir(),t.slice(1)):t}function N2(t){const e=Vi(Us.DOTENV_CONFIG_DEBUG||t&&t.debug),n=Vi(Us.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!n)&&h1("Loading env from encrypted .env.vault");const r=Je._parseVault(t);let s=Us;return t&&t.processEnv!=null&&(s=t.processEnv),Je.populate(s,r,t),{parsed:r}}function O2(t){const e=Uc.resolve(process.cwd(),".env");let n="utf8",r=Us;t&&t.processEnv!=null&&(r=t.processEnv);let s=Vi(r.DOTENV_CONFIG_DEBUG||t&&t.debug),i=Vi(r.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?n=t.encoding:s&&xa("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Sv(t.path)];else{o=[];for(const h of t.path)o.push(Sv(h))}let a;const u={};for(const h of o)try{const f=Je.parse($p.readFileSync(h,{encoding:n}));Je.populate(u,f,t)}catch(f){s&&xa(`Failed to load ${h} ${f.message}`),a=f}const c=Je.populate(r,u,t);if(s=Vi(r.DOTENV_CONFIG_DEBUG||s),i=Vi(r.DOTENV_CONFIG_QUIET||i),s||!i){const h=Object.keys(c).length,f=[];for(const p of o)try{const g=Uc.relative(process.cwd(),p);f.push(g)}catch(g){s&&xa(`Failed to load ${p} ${g.message}`),a=g}h1(`injecting env (${h}) from ${f.join(",")} ${R2(`-- tip: ${T2()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function D2(t){if(d1(t).length===0)return Je.configDotenv(t);const e=f1(t);return e?Je._configVault(t):(b2(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Je.configDotenv(t))}function L2(t,e){const n=Buffer.from(e.slice(-64),"hex");let r=Buffer.from(t,"base64");const s=r.subarray(0,12),i=r.subarray(-16);r=r.subarray(12,-16);try{const o=I2.createDecipheriv("aes-256-gcm",n,s);return o.setAuthTag(i),`${o.update(r)}${o.final()}`}catch(o){const a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){const h=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw h.code="INVALID_DOTENV_KEY",h}else if(c){const h=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw h.code="DECRYPTION_FAILED",h}else throw o}}function M2(t,e,n={}){const r=!!(n&&n.debug),s=!!(n&&n.override),i={};if(typeof e!="object"){const o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(const o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(s===!0&&(t[o]=e[o],i[o]=e[o]),r&&xa(s===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],i[o]=e[o]);return i}const Je={configDotenv:O2,_configVault:N2,_parseVault:x2,config:D2,decrypt:L2,parse:k2,populate:M2};ms.exports.configDotenv=Je.configDotenv;ms.exports._configVault=Je._configVault;ms.exports._parseVault=Je._parseVault;ms.exports.config=Je.config;ms.exports.decrypt=Je.decrypt;ms.exports.parse=Je.parse;ms.exports.populate=Je.populate;ms.exports=Je;async function Tv(t,e){var n,r,s,i;try{const o=localStorage.getItem("openai_api_key");console.log("Current API Key:",o);const u=await new ce({apiKey:o,dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-4.1-nano",messages:[{role:"system",content:t},{role:"user",content:e}]});return console.log(((r=(n=u.choices[0].message)==null?void 0:n.content)==null?void 0:r.trim())||""),((i=(s=u.choices[0].message)==null?void 0:s.content)==null?void 0:i.trim())||""}catch(o){console.error("Error calling GPT:",o.message||o)}return"ERROR"}/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Av="popstate";function V2(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Up("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nl(s)}return $2(e,n,null,t)}function be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F2(){return Math.random().toString(36).substring(2,10)}function Rv(t,e){return{usr:t.state,key:t.key,idx:e}}function Up(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fo(e):e,state:n,key:e&&e.key||r||F2()}}function nl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let k=h(),E=k==null?null:k-c;c=k,u&&u({action:a,location:T.location,delta:E})}function p(k,E){a="PUSH";let y=Up(T.location,k,E);c=h()+1;let v=Rv(y,c),b=T.createHref(y);try{o.pushState(v,"",b)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(b)}i&&u&&u({action:a,location:T.location,delta:1})}function g(k,E){a="REPLACE";let y=Up(T.location,k,E);c=h();let v=Rv(y,c),b=T.createHref(y);o.replaceState(v,"",b),i&&u&&u({action:a,location:T.location,delta:0})}function S(k){return U2(k)}let T={get action(){return a},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Av,f),u=k,()=>{s.removeEventListener(Av,f),u=null}},createHref(k){return e(s,k)},createURL:S,encodeLocation(k){let E=S(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:g,go(k){return o.go(k)}};return T}function U2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:nl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function p1(t,e,n="/"){return j2(t,e,n,!1)}function j2(t,e,n,r){let s=typeof e=="string"?fo(e):e,i=gr(s.pathname||"/",n);if(i==null)return null;let o=m1(t);B2(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Z2(i);a=X2(o[u],c,r)}return a}function m1(t,e=[],n=[],r="",s=!1){let i=(o,a,u=s,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;be(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=lr([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),m1(o.children,e,p,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Q2(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of g1(o.path))i(o,a,!0,c)}),e}function g1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=g1(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function B2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Y2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var z2=/^:[\w-]+$/,W2=3,H2=2,q2=1,K2=10,G2=-2,Cv=t=>t==="*";function Q2(t,e){let n=t.split("/"),r=n.length;return n.some(Cv)&&(r+=G2),e&&(r+=H2),n.filter(s=>!Cv(s)).reduce((s,i)=>s+(z2.test(i)?W2:i===""?q2:K2),r)}function Y2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=jc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=jc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:lr([i,f.pathname]),pathnameBase:rN(lr([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=lr([i,f.pathnameBase]))}return o}function jc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=J2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let S=a[p]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function J2(t,e=!1,n=!0){Sn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Z2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function gr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function eN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?fo(t):t;return{pathname:n?n.startsWith("/")?n:tN(n,e):e,search:sN(r),hash:iN(s)}}function tN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lf(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Og(t){let e=nN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Dg(t,e,n,r=!1){let s;typeof t=="string"?s=fo(t):(s={...t},be(!s.pathname||!s.pathname.includes("?"),lf("?","pathname","search",s)),be(!s.pathname||!s.pathname.includes("#"),lf("#","pathname","hash",s)),be(!s.search||!s.search.includes("#"),lf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=eN(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var lr=t=>t.join("/").replace(/\/\/+/g,"/"),rN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var y1=["POST","PUT","PATCH","DELETE"];new Set(y1);var aN=["GET",...y1];new Set(aN);var po=O.createContext(null);po.displayName="DataRouter";var Mh=O.createContext(null);Mh.displayName="DataRouterState";O.createContext(!1);var _1=O.createContext({isTransitioning:!1});_1.displayName="ViewTransition";var lN=O.createContext(new Map);lN.displayName="Fetchers";var uN=O.createContext(null);uN.displayName="Await";var Rn=O.createContext(null);Rn.displayName="Navigation";var Tl=O.createContext(null);Tl.displayName="Location";var Cn=O.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var Lg=O.createContext(null);Lg.displayName="RouteError";function cN(t,{relative:e}={}){be(mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(Rn),{hash:s,pathname:i,search:o}=Al(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:lr([n,i])),r.createHref({pathname:a,search:o,hash:s})}function mo(){return O.useContext(Tl)!=null}function Yn(){return be(mo(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Tl).location}var w1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v1(t){O.useContext(Rn).static||O.useLayoutEffect(t)}function go(){let{isDataRoute:t}=O.useContext(Cn);return t?TN():hN()}function hN(){be(mo(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(po),{basename:e,navigator:n}=O.useContext(Rn),{matches:r}=O.useContext(Cn),{pathname:s}=Yn(),i=JSON.stringify(Og(r)),o=O.useRef(!1);return v1(()=>{o.current=!0}),O.useCallback((u,c={})=>{if(Sn(o.current,w1),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Dg(u,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:lr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,i,s,t])}O.createContext(null);function dN(){let{matches:t}=O.useContext(Cn),e=t[t.length-1];return e?e.params:{}}function Al(t,{relative:e}={}){let{matches:n}=O.useContext(Cn),{pathname:r}=Yn(),s=JSON.stringify(Og(n));return O.useMemo(()=>Dg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function fN(t,e){return E1(t,e)}function E1(t,e,n,r,s){var y;be(mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(Rn),{matches:o}=O.useContext(Cn),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let v=f&&f.path||"";I1(c,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let p=Yn(),g;if(e){let v=typeof e=="string"?fo(e):e;be(h==="/"||((y=v.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=p;let S=g.pathname||"/",T=S;if(h!=="/"){let v=h.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(v.length).join("/")}let k=p1(t,{pathname:T});Sn(f||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Sn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=_N(k&&k.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:lr([h,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:lr([h,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,s);return e&&E?O.createElement(Tl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function pN(){let t=SN(),e=oN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:i},"ErrorBoundary")," or"," ",O.createElement("code",{style:i},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,o)}var mN=O.createElement(pN,null),gN=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?O.createElement(Cn.Provider,{value:this.props.routeContext},O.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yN({routeContext:t,match:e,children:n}){let r=O.useContext(po);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Cn.Provider,{value:t},n)}function _N(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let c=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);be(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(n)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,h,f)=>{let p,g=!1,S=null,T=null;n&&(p=o&&h.route.id?o[h.route.id]:void 0,S=h.route.errorElement||mN,a&&(u<0&&f===0?(I1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,T=null):u===f&&(g=!0,T=h.route.hydrateFallbackElement||null)));let k=e.concat(i.slice(0,f+1)),E=()=>{let y;return p?y=S:g?y=T:h.route.Component?y=O.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,O.createElement(yN,{match:h,routeContext:{outlet:c,matches:k,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?O.createElement(gN,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:E(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):E()},null)}function Mg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(t){let e=O.useContext(po);return be(e,Mg(t)),e}function vN(t){let e=O.useContext(Mh);return be(e,Mg(t)),e}function EN(t){let e=O.useContext(Cn);return be(e,Mg(t)),e}function Vg(t){let e=EN(t),n=e.matches[e.matches.length-1];return be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function IN(){return Vg("useRouteId")}function SN(){var r;let t=O.useContext(Lg),e=vN("useRouteError"),n=Vg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function TN(){let{router:t}=wN("useNavigate"),e=Vg("useNavigate"),n=O.useRef(!1);return v1(()=>{n.current=!0}),O.useCallback(async(s,i={})=>{Sn(n.current,w1),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var kv={};function I1(t,e,n){!e&&!kv[t]&&(kv[t]=!0,Sn(!1,n))}O.memo(AN);function AN({routes:t,future:e,state:n,unstable_onError:r}){return E1(t,void 0,n,r,e)}function RN({to:t,replace:e,state:n,relative:r}){be(mo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=O.useContext(Rn);Sn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=O.useContext(Cn),{pathname:o}=Yn(),a=go(),u=Dg(t,Og(i),o,r==="path"),c=JSON.stringify(u);return O.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Rs(t){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){be(!mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=O.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=fo(n));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=n,g=O.useMemo(()=>{let S=gr(u,o);return S==null?null:{location:{pathname:S,search:c,hash:h,state:f,key:p},navigationType:r}},[o,u,c,h,f,p,r]);return Sn(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:O.createElement(Rn.Provider,{value:a},O.createElement(Tl.Provider,{children:e,value:g}))}function kN({children:t,location:e}){return fN(jp(t),e)}function jp(t,e=[]){let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,jp(r.props.children,i));return}be(r.type===Rs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jp(r.props.children,i)),n.push(o)}),n}var Qu="get",Yu="application/x-www-form-urlencoded";function Vh(t){return t!=null&&typeof t.tagName=="string"}function xN(t){return Vh(t)&&t.tagName.toLowerCase()==="button"}function bN(t){return Vh(t)&&t.tagName.toLowerCase()==="form"}function PN(t){return Vh(t)&&t.tagName.toLowerCase()==="input"}function NN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ON(t,e){return t.button===0&&(!e||e==="_self")&&!NN(t)}var vu=null;function DN(){if(vu===null)try{new FormData(document.createElement("form"),0),vu=!1}catch{vu=!0}return vu}var LN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uf(t){return t!=null&&!LN.has(t)?(Sn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yu}"`),null):t}function MN(t,e){let n,r,s,i,o;if(bN(t)){let a=t.getAttribute("action");r=a?gr(a,e):null,n=t.getAttribute("method")||Qu,s=uf(t.getAttribute("enctype"))||Yu,i=new FormData(t)}else if(xN(t)||PN(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?gr(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Qu,s=uf(t.getAttribute("formenctype"))||uf(a.getAttribute("enctype"))||Yu,i=new FormData(a,t),!DN()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,f)}}else{if(Vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qu,r=null,s=Yu,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&gr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function FN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $N(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UN(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await FN(i,n);return o.links?o.links():[]}return[]}));return WN(r.flat(1).filter($N).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xv(t,e,n,r,s,i){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var h;return n[c].pathname!==u.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):i==="data"?e.filter((u,c)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function jN(t,e,{includeHydrateFallback:n}={}){return BN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function BN(t){return[...new Set(t)]}function zN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function WN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(zN(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function S1(){let t=O.useContext(po);return Fg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HN(){let t=O.useContext(Mh);return Fg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $g=O.createContext(void 0);$g.displayName="FrameworkContext";function T1(){let t=O.useContext($g);return Fg(t,"You must render this element inside a <HydratedRouter> element"),t}function qN(t,e){let n=O.useContext($g),[r,s]=O.useState(!1),[i,o]=O.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=O.useRef(null);O.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=E=>{E.forEach(y=>{o(y.isIntersecting)})},k=new IntersectionObserver(T,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[t]),O.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let g=()=>{s(!0)},S=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Yo(a,g),onBlur:Yo(u,S),onMouseEnter:Yo(c,g),onMouseLeave:Yo(h,S),onTouchStart:Yo(f,g)}]:[!1,p,{}]}function Yo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function KN({page:t,...e}){let{router:n}=S1(),r=O.useMemo(()=>p1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?O.createElement(QN,{page:t,matches:r,...e}):null}function GN(t){let{manifest:e,routeModules:n}=T1(),[r,s]=O.useState([]);return O.useEffect(()=>{let i=!1;return UN(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function QN({page:t,matches:e,...n}){let r=Yn(),{manifest:s,routeModules:i}=T1(),{basename:o}=S1(),{loaderData:a,matches:u}=HN(),c=O.useMemo(()=>xv(t,e,u,s,r,"data"),[t,e,u,s,r]),h=O.useMemo(()=>xv(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=O.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,T=!1;if(e.forEach(E=>{var v;let y=s.routes[E.route.id];!y||!y.hasLoader||(!c.some(b=>b.route.id===E.route.id)&&E.route.id in a&&((v=i[E.route.id])!=null&&v.shouldRevalidate)||y.hasClientLoader?T=!0:S.add(E.route.id))}),S.size===0)return[];let k=VN(t,o,"data");return T&&S.size>0&&k.searchParams.set("_routes",e.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[o,a,r,s,c,e,t,i]),p=O.useMemo(()=>jN(h,s),[h,s]),g=GN(h);return O.createElement(O.Fragment,null,f.map(S=>O.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),p.map(S=>O.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),g.map(({key:S,link:T})=>O.createElement("link",{key:S,nonce:n.nonce,...T})))}function YN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var A1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A1&&(window.__reactRouterVersion="7.9.3")}catch{}function XN({basename:t,children:e,window:n}){let r=O.useRef();r.current==null&&(r.current=V2({window:n,v5Compat:!0}));let s=r.current,[i,o]=O.useState({action:s.action,location:s.location}),a=O.useCallback(u=>{O.startTransition(()=>o(u))},[o]);return O.useLayoutEffect(()=>s.listen(a),[s,a]),O.createElement(CN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var R1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yo=O.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:S}=O.useContext(Rn),T=typeof c=="string"&&R1.test(c),k,E=!1;if(typeof c=="string"&&T&&(k=c,A1))try{let A=new URL(window.location.href),C=c.startsWith("//")?new URL(A.protocol+c):new URL(c),R=gr(C.pathname,S);C.origin===A.origin&&R!=null?c=R+C.search+C.hash:E=!0}catch{Sn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=cN(c,{relative:s}),[v,b,M]=qN(r,p),F=tO(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:f});function _(A){e&&e(A),A.defaultPrevented||F(A)}let w=O.createElement("a",{...p,...M,href:k||y,onClick:E||i?e:_,ref:YN(g,b),target:u,"data-discover":!T&&n==="render"?"true":void 0});return v&&!T?O.createElement(O.Fragment,null,w,O.createElement(KN,{page:y})):w});yo.displayName="Link";var JN=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:u,...c},h){let f=Al(o,{relative:c.relative}),p=Yn(),g=O.useContext(Mh),{navigator:S,basename:T}=O.useContext(Rn),k=g!=null&&oO(f)&&a===!0,E=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,y=p.pathname,v=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),v=v?v.toLowerCase():null,E=E.toLowerCase()),v&&T&&(v=gr(v,T)||v);const b=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=y===E||!s&&y.startsWith(E)&&y.charAt(b)==="/",F=v!=null&&(v===E||!s&&v.startsWith(E)&&v.charAt(E.length)==="/"),_={isActive:M,isPending:F,isTransitioning:k},w=M?e:void 0,A;typeof r=="function"?A=r(_):A=[r,M?"active":null,F?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(_):i;return O.createElement(yo,{...c,"aria-current":w,className:A,ref:h,style:C,to:o,viewTransition:a},typeof u=="function"?u(_):u)});JN.displayName="NavLink";var ZN=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Qu,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let S=sO(),T=iO(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",E=typeof a=="string"&&R1.test(a),y=v=>{if(u&&u(v),v.defaultPrevented)return;v.preventDefault();let b=v.nativeEvent.submitter,M=(b==null?void 0:b.getAttribute("formmethod"))||o;S(b||v.currentTarget,{fetcherKey:e,method:M,navigate:n,replace:s,state:i,relative:c,preventScrollReset:h,viewTransition:f})};return O.createElement("form",{ref:g,method:k,action:T,onSubmit:r?u:y,...p,"data-discover":!E&&t==="render"?"true":void 0})});ZN.displayName="Form";function eO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C1(t){let e=O.useContext(po);return be(e,eO(t)),e}function tO(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=go(),u=Yn(),c=Al(t,{relative:i});return O.useCallback(h=>{if(ON(h,e)){h.preventDefault();let f=n!==void 0?n:nl(u)===nl(c);a(t,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,a,c,n,r,e,t,s,i,o])}var nO=0,rO=()=>`__${String(++nO)}__`;function sO(){let{router:t}=C1("useSubmit"),{basename:e}=O.useContext(Rn),n=IN();return O.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:u,body:c}=MN(r,e);if(s.navigate===!1){let h=s.fetcherKey||rO();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function iO(t,{relative:e}={}){let{basename:n}=O.useContext(Rn),r=O.useContext(Cn);be(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Al(t||".",{relative:e})},o=Yn();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:lr([n,i.pathname])),nl(i)}function oO(t,{relative:e}={}){let n=O.useContext(_1);be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=C1("useViewTransitionState"),s=Al(t,{relative:e});if(!n.isTransitioning)return!1;let i=gr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=gr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jc(s.pathname,o)!=null||jc(s.pathname,i)!=null}const aO=()=>{};var bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new uO;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cO=function(t){const e=k1(t);return x1.encodeByteArray(e,!0)},Bc=function(t){return cO(t).replace(/\./g,"")},b1=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=()=>hO().__FIREBASE_DEFAULTS__,fO=()=>{if(typeof process>"u"||typeof bv>"u")return;const t=bv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b1(t[1]);return e&&JSON.parse(e)},Fh=()=>{try{return aO()||dO()||fO()||pO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P1=t=>{var e,n;return(n=(e=Fh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mO=t=>{const e=P1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N1=()=>{var t;return(t=Fh())==null?void 0:t.config},O1=t=>{var e;return(e=Fh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const ba={};function _O(){const t={prod:[],emulator:[]};for(const e of Object.keys(ba))ba[e]?t.emulator.push(e):t.prod.push(e);return t}function wO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pv=!1;function L1(t,e){if(typeof window>"u"||typeof document>"u"||!_o(window.location.host)||ba[t]===e||ba[t]||Pv)return;ba[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=_O().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Pv=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=wO(r),g=n("text"),S=document.getElementById(g)||document.createElement("span"),T=n("learnmore"),k=document.getElementById(T)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),h(k,T);const b=c();u(y,E),v.append(y,S,k,b),document.body.appendChild(v)}i?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function EO(){var e;const t=(e=Fh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function M1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TO(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AO(){return!EO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V1(){try{return typeof indexedDB=="object"}catch{return!1}}function F1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function RO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="FirebaseError";class kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CO,Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ri.prototype.create)}}class ri{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kO(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new kn(s,a,r)}}function kO(t,e){return t.replace(xO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xO=/\{\$([^}]+)}/g;function bO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ss(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Nv(i)&&Nv(o)){if(!ss(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ha(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function da(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PO(t,e){const n=new NO(t,e);return n.subscribe.bind(n)}class NO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cf),s.error===void 0&&(s.error=cf),s.complete===void 0&&(s.complete=cf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1e3,LO=2,MO=4*60*60*1e3,VO=.5;function Ov(t,e=DO,n=LO){const r=e*Math.pow(n,t),s=Math.round(VO*r*(Math.random()-.5)*2);return Math.min(MO,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class Tn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(t){return t===Cs?void 0:t}function UO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const BO={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},zO=fe.INFO,WO={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},HO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=zO,this._logHandler=HO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const qO=(t,e)=>e.some(n=>t instanceof n);let Dv,Lv;function KO(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GO(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $1=new WeakMap,Bp=new WeakMap,U1=new WeakMap,hf=new WeakMap,Ug=new WeakMap;function QO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$1.set(n,t)}).catch(()=>{}),Ug.set(e,t),e}function YO(t){if(Bp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bp.set(t,e)}let zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||U1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XO(t){zp=t(zp)}function JO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(df(this),e,...n);return U1.set(r,e.sort?e.sort():[e]),Jr(r)}:GO().includes(t)?function(...e){return t.apply(df(this),e),Jr($1.get(this))}:function(...e){return Jr(t.apply(df(this),e))}}function ZO(t){return typeof t=="function"?JO(t):(t instanceof IDBTransaction&&YO(t),qO(t,KO())?new Proxy(t,zp):t)}function Jr(t){if(t instanceof IDBRequest)return QO(t);if(hf.has(t))return hf.get(t);const e=ZO(t);return e!==t&&(hf.set(t,e),Ug.set(e,t)),e}const df=t=>Ug.get(t);function j1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jr(o.result),u.oldVersion,u.newVersion,Jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const eD=["get","getKey","getAll","getAllKeys","count"],tD=["put","add","delete","clear"],ff=new Map;function Mv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eD.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return ff.set(e,i),i}XO(t=>({...t,get:(e,n,r)=>Mv(e,n)||t.get(e,n,r),has:(e,n)=>!!Mv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",Vv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new $h("@firebase/app"),sD="@firebase/app-compat",iD="@firebase/analytics-compat",oD="@firebase/analytics",aD="@firebase/app-check-compat",lD="@firebase/app-check",uD="@firebase/auth",cD="@firebase/auth-compat",hD="@firebase/database",dD="@firebase/data-connect",fD="@firebase/database-compat",pD="@firebase/functions",mD="@firebase/functions-compat",gD="@firebase/installations",yD="@firebase/installations-compat",_D="@firebase/messaging",wD="@firebase/messaging-compat",vD="@firebase/performance",ED="@firebase/performance-compat",ID="@firebase/remote-config",SD="@firebase/remote-config-compat",TD="@firebase/storage",AD="@firebase/storage-compat",RD="@firebase/firestore",CD="@firebase/ai",kD="@firebase/firestore-compat",xD="firebase",bD="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",PD={[Wp]:"fire-core",[sD]:"fire-core-compat",[oD]:"fire-analytics",[iD]:"fire-analytics-compat",[lD]:"fire-app-check",[aD]:"fire-app-check-compat",[uD]:"fire-auth",[cD]:"fire-auth-compat",[hD]:"fire-rtdb",[dD]:"fire-data-connect",[fD]:"fire-rtdb-compat",[pD]:"fire-fn",[mD]:"fire-fn-compat",[gD]:"fire-iid",[yD]:"fire-iid-compat",[_D]:"fire-fcm",[wD]:"fire-fcm-compat",[vD]:"fire-perf",[ED]:"fire-perf-compat",[ID]:"fire-rc",[SD]:"fire-rc-compat",[TD]:"fire-gcs",[AD]:"fire-gcs-compat",[RD]:"fire-fst",[kD]:"fire-fst-compat",[CD]:"fire-vertex","fire-js":"fire-js",[xD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,ND=new Map,qp=new Map;function Fv(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kn(t){const e=t.name;if(qp.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;qp.set(e,t);for(const n of zc.values())Fv(n,t);for(const n of ND.values())Fv(n,t);return!0}function si(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new ri("app","Firebase",OD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=bD;function jg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Hp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=N1()),!n)throw Zr.create("no-options");const i=zc.get(s);if(i){if(ss(n,i.options)&&ss(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new jO(s);for(const u of qp.values())o.addComponent(u);const a=new DD(n,r,o);return zc.set(s,a),a}function Bg(t=Hp){const e=zc.get(t);if(!e&&t===Hp&&N1())return jg();if(!e)throw Zr.create("no-app",{appName:t});return e}function cn(t,e,n){let r=PD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(o.join(" "));return}Kn(new Tn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",MD=1,rl="firebase-heartbeat-store";let pf=null;function B1(){return pf||(pf=j1(LD,MD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),pf}async function VD(t){try{const n=(await B1()).transaction(rl),r=await n.objectStore(rl).get(z1(t));return await n.done,r}catch(e){if(e instanceof kn)yr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function $v(t,e){try{const r=(await B1()).transaction(rl,"readwrite");await r.objectStore(rl).put(e,z1(t)),await r.done}catch(n){if(n instanceof kn)yr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(r.message)}}}function z1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1024,$D=30;class UD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Uv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$D){const o=zD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uv(),{heartbeatsToSend:r,unsentEntries:s}=jD(this._heartbeatsCache.heartbeats),i=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yr.warn(n),""}}}function Uv(){return new Date().toISOString().substring(0,10)}function jD(t,e=FD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),jv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V1()?F1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jv(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function zD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){Kn(new Tn("platform-logger",e=>new nD(e),"PRIVATE")),Kn(new Tn("heartbeat",e=>new UD(e),"PRIVATE")),cn(Wp,Vv,t),cn(Wp,Vv,"esm2020"),cn("fire-js","")}WD("");function W1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HD=W1,H1=new ri("auth","Firebase",W1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new $h("@firebase/auth");function qD(t,...e){Wc.logLevel<=fe.WARN&&Wc.warn(`Auth (${wo}): ${t}`,...e)}function Xu(t,...e){Wc.logLevel<=fe.ERROR&&Wc.error(`Auth (${wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw zg(t,...e)}function jn(t,...e){return zg(t,...e)}function q1(t,e,n){const r={...HD(),[e]:n};return new ri("auth","Firebase",r).create(e,{appName:t.name})}function ur(t){return q1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return H1.create(t,...e)}function te(t,e,...n){if(!t)throw zg(e,...n)}function sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xu(e),new Error(e)}function _r(t,e){t||sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function KD(){return Bv()==="http:"||Bv()==="https:"}function Bv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KD()||M1()||"connection"in navigator)?navigator.onLine:!0}function QD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=vO()||SO()}get(){return GD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t,e){_r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JD=new Cl(3e4,6e4);function gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ys(t,e,n,r,s={}){return G1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Rl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return IO()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&_o(t.emulatorConfig.host)&&(c.credentials="include"),K1.fetch()(await Q1(t,t.config.apiHost,n,a),c)})}async function G1(t,e,n){t._canInitEmulator=!1;const r={...YD,...e};try{const s=new eL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Eu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Eu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Eu(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw q1(t,h,c);An(t,h)}}catch(s){if(s instanceof kn)throw s;An(t,"network-request-failed",{message:String(s)})}}async function kl(t,e,n,r,s={}){const i=await ys(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Q1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Wg(t.config,s):`${t.config.apiScheme}://${s}`;return XD.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ZD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jn(this.auth,"network-request-failed")),JD.get())})}}function Eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jn(t,e,r);return s.customData._tokenResponse=n,s}function zv(t){return t!==void 0&&t.enterprise!==void 0}class tL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nL(t,e){return ys(t,"GET","/v2/recaptchaConfig",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){return ys(t,"POST","/v1/accounts:delete",e)}async function Hc(t,e){return ys(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sL(t,e=!1){const n=At(t),r=await n.getIdToken(e),s=Hg(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pa(mf(s.auth_time)),issuedAtTime:Pa(mf(s.iat)),expirationTime:Pa(mf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mf(t){return Number(t)*1e3}function Hg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xu("JWT malformed, contained fewer than 3 sections"),null;try{const s=b1(n);return s?JSON.parse(s):(Xu("Failed to decode base64 JWT payload"),null)}catch(s){return Xu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Wv(t){const e=Hg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kn&&iL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await sl(t,Hc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?Y1(s.providerUserInfo):[],o=lL(t.providerData,i),a=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function aL(t){const e=At(t);await qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Y1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){const n=await G1(t,{},async()=>{const r=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Q1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&_o(t.emulatorConfig.host)&&(u.credentials="include"),K1.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cL(t,e){return ys(t,"POST","/v2/accounts:revokeToken",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await uL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Hi;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hi,this.toJSON())}_performRefresh(){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _n{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await sl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sL(this,e)}reload(){return aL(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rn(this.auth.app))return Promise.reject(ur(this.auth));const e=await this.getIdToken();return await sl(this,rL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:S,stsTokenManager:T}=n;te(f&&T,e,"internal-error");const k=Hi.fromJSON(this.name,T);te(typeof f=="string",e,"internal-error"),Nr(r,e.name),Nr(s,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof g=="boolean",e,"internal-error"),Nr(i,e.name),Nr(o,e.name),Nr(a,e.name),Nr(u,e.name),Nr(c,e.name),Nr(h,e.name);const E=new _n({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:c,lastLoginAt:h});return S&&Array.isArray(S)&&(E.providerData=S.map(y=>({...y}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Hi;s.updateFromServerResponse(n);const i=new _n({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Y1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Hi;a.updateFromIdToken(r);const u=new _n({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Gp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function ir(t){_r(t instanceof Function,"Expected a class definition");let e=Hv.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}X1.type="NONE";const qv=X1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t,e,n){return`firebase:${t}:${e}:${n}`}class qi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ju(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ju("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hc(this.auth,{idToken:e}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qi(ir(qv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ir(qv);const o=Ju(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await Hc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await _n._fromGetAccountInfoResponse(e,p,h)}else f=_n._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new qi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new qi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rA(e))return"Blackberry";if(sA(e))return"Webos";if(Z1(e))return"Safari";if((e.includes("chrome/")||eA(e))&&!e.includes("edge/"))return"Chrome";if(nA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function J1(t=Tt()){return/firefox\//i.test(t)}function Z1(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eA(t=Tt()){return/crios\//i.test(t)}function tA(t=Tt()){return/iemobile/i.test(t)}function nA(t=Tt()){return/android/i.test(t)}function rA(t=Tt()){return/blackberry/i.test(t)}function sA(t=Tt()){return/webos/i.test(t)}function qg(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hL(t=Tt()){var e;return qg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dL(){return TO()&&document.documentMode===10}function iA(t=Tt()){return qg(t)||nA(t)||sA(t)||rA(t)||/windows phone/i.test(t)||tA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e=[]){let n;switch(t){case"Browser":n=Kv(Tt());break;case"Worker":n=`${Kv(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e={}){return ys(t,"GET","/v2/passwordPolicy",gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=6;class gL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new fL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await qi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hc(this,{idToken:e}),r=await _n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(rn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rn(this.app))return Promise.reject(ur(this));const n=e?At(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rn(this.app)?Promise.reject(ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rn(this.app)?Promise.reject(ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pL(this),n=new gL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ri("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await qi.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&qD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ii(t){return At(t)}class Gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=PO(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _L(t){Uh=t}function aA(t){return Uh.loadJS(t)}function wL(){return Uh.recaptchaEnterpriseScript}function vL(){return Uh.gapiScript}function EL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IL{constructor(){this.enterprise=new SL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TL="recaptcha-enterprise",lA="NO_RECAPTCHA";class AL{constructor(e){this.type=TL,this.auth=ii(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{nL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new tL(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;zv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(lA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&zv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=wL();u.length!==0&&(u+=a),aA(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Qv(t,e,n,r=!1,s=!1){const i=new AL(t);let o;if(s)o=lA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Qp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Qv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Qv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t,e){const n=si(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ss(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function CL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kL(t,e,n){const r=ii(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=uA(e),{host:o,port:a}=xL(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(ss(c,r.config.emulator)&&ss(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,_o(o)?(D1(`${i}//${o}${u}`),L1("Auth",!0)):bL()}function uA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xL(t){const e=uA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Yv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Yv(o)}}}function Yv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}}async function PL(t,e){return ys(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return kl(t,"POST","/v1/accounts:signInWithPassword",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return kl(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}async function DL(t,e){return kl(t,"POST","/v1/accounts:signInWithEmailLink",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends Kg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new il(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new il(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,n,"signInWithPassword",NL);case"emailLink":return OL(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qp(e,r,"signUpPassword",PL);case"emailLink":return DL(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t,e){return kl(t,"POST","/v1/accounts:signInWithIdp",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="http://localhost";class Gs extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Gs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ki(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ki(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ki(e,n)}buildRequest(){const e={requestUri:LL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VL(t){const e=ha(da(t)).link,n=e?ha(da(e)).deep_link_id:null,r=ha(da(t)).deep_link_id;return(r?ha(da(r)).link:null)||r||n||e||t}class Gg{constructor(e){const n=ha(da(e)),r=n.apiKey??null,s=n.oobCode??null,i=ML(n.mode??null);te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=VL(e);try{return new Gg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.providerId=vo.PROVIDER_ID}static credential(e,n){return il._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gg.parseLink(n);return te(r,"argument-error"),il._fromEmailAndCode(e,r.code,r.tenantId)}}vo.PROVIDER_ID="password";vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends cA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends xl{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gs._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fr.credential(n,r)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends xl{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.GITHUB_SIGN_IN_METHOD="github.com";$r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends xl{constructor(){super("twitter.com")}static credential(e,n){return Gs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e){return kl(t,"POST","/v1/accounts:signUp",gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await _n._fromIdTokenResponse(e,r,s),o=Xv(r);return new Qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Xv(r);return new Qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Xv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends kn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kc(e,n,r,s)}}function hA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(t,i,e,r):i})}async function $L(t,e,n=!1){const r=await sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e,n=!1){const{auth:r}=t;if(rn(r.app))return Promise.reject(ur(r));const s="reauthenticate";try{const i=await sl(t,hA(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Hg(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),Qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e,n=!1){if(rn(t.app))return Promise.reject(ur(t));const r="signIn",s=await hA(t,r,e),i=await Qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jL(t,e){return dA(ii(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t){const e=ii(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BL(t,e,n){if(rn(t.app))return Promise.reject(ur(t));const r=ii(t),o=await Qp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fA(t),u}),a=await Qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function zL(t,e,n){return rn(t.app)?Promise.reject(ur(t)):jL(At(t),vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e){return At(t).setPersistence(e)}function WL(t,e,n,r){return At(t).onIdTokenChanged(e,n,r)}function HL(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function Qg(t,e,n,r){return At(t).onAuthStateChanged(e,n,r)}function qL(t){return At(t).signOut()}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,GL=10;class gA extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gA.type="LOCAL";const Yg=gA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yA.type="SESSION";const _A=yA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await QL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Xg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return window}function XL(t){Bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}async function JL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eM(){return wA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebaseLocalStorageDb",tM=1,Qc="firebaseLocalStorage",EA="fbase_key";class bl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function nM(){const t=indexedDB.deleteDatabase(vA);return new bl(t).toPromise()}function Yp(){const t=indexedDB.open(vA,tM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qc,{keyPath:EA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),await nM(),e(await Yp()))})})}async function Jv(t,e,n){const r=Bh(t,!0).put({[EA]:e,value:n});return new bl(r).toPromise()}async function rM(t,e){const n=Bh(t,!1).get(e),r=await new bl(n).toPromise();return r===void 0?null:r.value}function Zv(t,e){const n=Bh(t,!0).delete(e);return new bl(n).toPromise()}const sM=800,iM=3;class IA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(eM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JL(),!this.activeServiceWorker)return;this.sender=new YL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await Jv(e,Gc,"1"),await Zv(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Bh(s,!1).getAll();return new bl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IA.type="LOCAL";const oM=IA;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){return e?ir(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ki(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ki(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lM(t){return dA(t.auth,new Jg(t),t.bypassAuthState)}function uM(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),UL(n,new Jg(t),t.bypassAuthState)}async function cM(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),$L(n,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lM;case"linkViaPopup":case"linkViaRedirect":return cM;case"reauthViaPopup":case"reauthViaRedirect":return uM;default:An(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new Cl(2e3,1e4);class Fi extends SA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Fi.currentPopupAction&&Fi.currentPopupAction.cancel(),Fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hM.get())};e()}}Fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="pendingRedirect",Zu=new Map;class fM extends SA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const r=await pM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pM(t,e){const n=yM(e),r=gM(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mM(t,e){Zu.set(t._key(),e)}function gM(t){return ir(t._redirectPersistence)}function yM(t){return Ju(dM,t.config.apiKey,t.name)}async function _M(t,e,n=!1){if(rn(t.app))return Promise.reject(ur(t));const r=ii(t),s=aM(r,e),o=await new fM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=10*60*1e3;class vM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TA(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wM&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e={}){return ys(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TM=/^https?/;async function AM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IM(t);for(const n of e)try{if(RM(n))return}catch{}An(t,"unauthorized-domain")}function RM(t){const e=Kp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TM.test(n))return!1;if(SM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Cl(3e4,6e4);function t0(){const t=Bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kM(t){return new Promise((e,n)=>{var s,i,o;function r(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(jn(t,"network-request-failed"))},timeout:CM.get()})}if((i=(s=Bn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Bn().gapi)!=null&&o.load)r();else{const a=EL("iframefcb");return Bn()[a]=()=>{gapi.load?r():n(jn(t,"network-request-failed"))},aA(`${vL()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ec=null,e})}let ec=null;function xM(t){return ec=ec||kM(t),ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new Cl(5e3,15e3),PM="__/auth/iframe",NM="emulator/auth/iframe",OM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LM(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wg(e,NM):`https://${t.config.authDomain}/${PM}`,r={apiKey:e.apiKey,appName:t.name,v:wo},s=DM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Rl(r).slice(1)}`}async function MM(t){const e=await xM(t),n=Bn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:LM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jn(t,"network-request-failed"),a=Bn().setTimeout(()=>{i(o)},bM.get());function u(){Bn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FM=500,$M=600,UM="_blank",jM="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BM(t,e,n,r=FM,s=$M){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...VM,width:r.toString(),height:s.toString(),top:i,left:o},c=Tt().toLowerCase();n&&(a=eA(c)?UM:n),J1(c)&&(e=e||jM,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,S])=>`${p}${g}=${S},`,"");if(hL(c)&&a!=="_self")return zM(e||"",a),new n0(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new n0(f)}function zM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",HM="emulator/auth/handler",qM=encodeURIComponent("fac");async function r0(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wo,eventId:s};if(e instanceof cA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof xl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${qM}=${encodeURIComponent(u)}`:"";return`${KM(t)}?${Rl(a).slice(1)}${c}`}function KM({config:t}){return t.emulator?Wg(t,HM):`https://${t.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class GM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_A,this._completeRedirectFn=_M,this._overrideRedirectResult=mM}async _openPopup(e,n,r,s){var o;_r((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await r0(e,n,r,Kp(),s);return BM(e,i,Xg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await r0(e,n,r,Kp(),s);return XL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_r(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MM(e),r=new vM(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gf,{type:gf},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[gf];i!==void 0&&n(!!i),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iA()||Z1()||qg()}}const QM=GM;var s0="@firebase/auth",i0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JM(t){Kn(new Tn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(t)},c=new yL(r,s,i,u);return CL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kn(new Tn("auth-internal",e=>{const n=ii(e.getProvider("auth").getImmediate());return(r=>new YM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(s0,i0,XM(t)),cn(s0,i0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=5*60,eV=O1("authIdTokenMaxAge")||ZM;let o0=null;const tV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eV)return;const s=n==null?void 0:n.token;o0!==s&&(o0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ys(t=Bg()){const e=si(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RL(t,{popupRedirectResolver:QM,persistence:[oM,Yg,_A]}),r=O1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=tV(i.toString());HL(n,o,()=>o(n.currentUser)),WL(n,a=>o(a))}}const s=P1("auth");return s&&kL(n,`http://${s}`),n}function nV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_L({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JM("Browser");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,AA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,w){function A(){}A.prototype=w.prototype,_.F=w.prototype,_.prototype=new A,_.prototype.constructor=_,_.D=function(C,R,P){for(var x=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)x[ie-2]=arguments[ie];return w.prototype[R].apply(C,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,w,A){A||(A=0);const C=Array(16);if(typeof w=="string")for(var R=0;R<16;++R)C[R]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(R=0;R<16;++R)C[R]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=_.g[0],A=_.g[1],R=_.g[2];let P=_.g[3],x;x=w+(P^A&(R^P))+C[0]+3614090360&4294967295,w=A+(x<<7&4294967295|x>>>25),x=P+(R^w&(A^R))+C[1]+3905402710&4294967295,P=w+(x<<12&4294967295|x>>>20),x=R+(A^P&(w^A))+C[2]+606105819&4294967295,R=P+(x<<17&4294967295|x>>>15),x=A+(w^R&(P^w))+C[3]+3250441966&4294967295,A=R+(x<<22&4294967295|x>>>10),x=w+(P^A&(R^P))+C[4]+4118548399&4294967295,w=A+(x<<7&4294967295|x>>>25),x=P+(R^w&(A^R))+C[5]+1200080426&4294967295,P=w+(x<<12&4294967295|x>>>20),x=R+(A^P&(w^A))+C[6]+2821735955&4294967295,R=P+(x<<17&4294967295|x>>>15),x=A+(w^R&(P^w))+C[7]+4249261313&4294967295,A=R+(x<<22&4294967295|x>>>10),x=w+(P^A&(R^P))+C[8]+1770035416&4294967295,w=A+(x<<7&4294967295|x>>>25),x=P+(R^w&(A^R))+C[9]+2336552879&4294967295,P=w+(x<<12&4294967295|x>>>20),x=R+(A^P&(w^A))+C[10]+4294925233&4294967295,R=P+(x<<17&4294967295|x>>>15),x=A+(w^R&(P^w))+C[11]+2304563134&4294967295,A=R+(x<<22&4294967295|x>>>10),x=w+(P^A&(R^P))+C[12]+1804603682&4294967295,w=A+(x<<7&4294967295|x>>>25),x=P+(R^w&(A^R))+C[13]+4254626195&4294967295,P=w+(x<<12&4294967295|x>>>20),x=R+(A^P&(w^A))+C[14]+2792965006&4294967295,R=P+(x<<17&4294967295|x>>>15),x=A+(w^R&(P^w))+C[15]+1236535329&4294967295,A=R+(x<<22&4294967295|x>>>10),x=w+(R^P&(A^R))+C[1]+4129170786&4294967295,w=A+(x<<5&4294967295|x>>>27),x=P+(A^R&(w^A))+C[6]+3225465664&4294967295,P=w+(x<<9&4294967295|x>>>23),x=R+(w^A&(P^w))+C[11]+643717713&4294967295,R=P+(x<<14&4294967295|x>>>18),x=A+(P^w&(R^P))+C[0]+3921069994&4294967295,A=R+(x<<20&4294967295|x>>>12),x=w+(R^P&(A^R))+C[5]+3593408605&4294967295,w=A+(x<<5&4294967295|x>>>27),x=P+(A^R&(w^A))+C[10]+38016083&4294967295,P=w+(x<<9&4294967295|x>>>23),x=R+(w^A&(P^w))+C[15]+3634488961&4294967295,R=P+(x<<14&4294967295|x>>>18),x=A+(P^w&(R^P))+C[4]+3889429448&4294967295,A=R+(x<<20&4294967295|x>>>12),x=w+(R^P&(A^R))+C[9]+568446438&4294967295,w=A+(x<<5&4294967295|x>>>27),x=P+(A^R&(w^A))+C[14]+3275163606&4294967295,P=w+(x<<9&4294967295|x>>>23),x=R+(w^A&(P^w))+C[3]+4107603335&4294967295,R=P+(x<<14&4294967295|x>>>18),x=A+(P^w&(R^P))+C[8]+1163531501&4294967295,A=R+(x<<20&4294967295|x>>>12),x=w+(R^P&(A^R))+C[13]+2850285829&4294967295,w=A+(x<<5&4294967295|x>>>27),x=P+(A^R&(w^A))+C[2]+4243563512&4294967295,P=w+(x<<9&4294967295|x>>>23),x=R+(w^A&(P^w))+C[7]+1735328473&4294967295,R=P+(x<<14&4294967295|x>>>18),x=A+(P^w&(R^P))+C[12]+2368359562&4294967295,A=R+(x<<20&4294967295|x>>>12),x=w+(A^R^P)+C[5]+4294588738&4294967295,w=A+(x<<4&4294967295|x>>>28),x=P+(w^A^R)+C[8]+2272392833&4294967295,P=w+(x<<11&4294967295|x>>>21),x=R+(P^w^A)+C[11]+1839030562&4294967295,R=P+(x<<16&4294967295|x>>>16),x=A+(R^P^w)+C[14]+4259657740&4294967295,A=R+(x<<23&4294967295|x>>>9),x=w+(A^R^P)+C[1]+2763975236&4294967295,w=A+(x<<4&4294967295|x>>>28),x=P+(w^A^R)+C[4]+1272893353&4294967295,P=w+(x<<11&4294967295|x>>>21),x=R+(P^w^A)+C[7]+4139469664&4294967295,R=P+(x<<16&4294967295|x>>>16),x=A+(R^P^w)+C[10]+3200236656&4294967295,A=R+(x<<23&4294967295|x>>>9),x=w+(A^R^P)+C[13]+681279174&4294967295,w=A+(x<<4&4294967295|x>>>28),x=P+(w^A^R)+C[0]+3936430074&4294967295,P=w+(x<<11&4294967295|x>>>21),x=R+(P^w^A)+C[3]+3572445317&4294967295,R=P+(x<<16&4294967295|x>>>16),x=A+(R^P^w)+C[6]+76029189&4294967295,A=R+(x<<23&4294967295|x>>>9),x=w+(A^R^P)+C[9]+3654602809&4294967295,w=A+(x<<4&4294967295|x>>>28),x=P+(w^A^R)+C[12]+3873151461&4294967295,P=w+(x<<11&4294967295|x>>>21),x=R+(P^w^A)+C[15]+530742520&4294967295,R=P+(x<<16&4294967295|x>>>16),x=A+(R^P^w)+C[2]+3299628645&4294967295,A=R+(x<<23&4294967295|x>>>9),x=w+(R^(A|~P))+C[0]+4096336452&4294967295,w=A+(x<<6&4294967295|x>>>26),x=P+(A^(w|~R))+C[7]+1126891415&4294967295,P=w+(x<<10&4294967295|x>>>22),x=R+(w^(P|~A))+C[14]+2878612391&4294967295,R=P+(x<<15&4294967295|x>>>17),x=A+(P^(R|~w))+C[5]+4237533241&4294967295,A=R+(x<<21&4294967295|x>>>11),x=w+(R^(A|~P))+C[12]+1700485571&4294967295,w=A+(x<<6&4294967295|x>>>26),x=P+(A^(w|~R))+C[3]+2399980690&4294967295,P=w+(x<<10&4294967295|x>>>22),x=R+(w^(P|~A))+C[10]+4293915773&4294967295,R=P+(x<<15&4294967295|x>>>17),x=A+(P^(R|~w))+C[1]+2240044497&4294967295,A=R+(x<<21&4294967295|x>>>11),x=w+(R^(A|~P))+C[8]+1873313359&4294967295,w=A+(x<<6&4294967295|x>>>26),x=P+(A^(w|~R))+C[15]+4264355552&4294967295,P=w+(x<<10&4294967295|x>>>22),x=R+(w^(P|~A))+C[6]+2734768916&4294967295,R=P+(x<<15&4294967295|x>>>17),x=A+(P^(R|~w))+C[13]+1309151649&4294967295,A=R+(x<<21&4294967295|x>>>11),x=w+(R^(A|~P))+C[4]+4149444226&4294967295,w=A+(x<<6&4294967295|x>>>26),x=P+(A^(w|~R))+C[11]+3174756917&4294967295,P=w+(x<<10&4294967295|x>>>22),x=R+(w^(P|~A))+C[2]+718787259&4294967295,R=P+(x<<15&4294967295|x>>>17),x=A+(P^(R|~w))+C[9]+3951481745&4294967295,_.g[0]=_.g[0]+w&4294967295,_.g[1]=_.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+P&4294967295}r.prototype.v=function(_,w){w===void 0&&(w=_.length);const A=w-this.blockSize,C=this.C;let R=this.h,P=0;for(;P<w;){if(R==0)for(;P<=A;)s(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<w;)if(C[R++]=_.charCodeAt(P++),R==this.blockSize){s(this,C),R=0;break}}else for(;P<w;)if(C[R++]=_[P++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=w},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var w=1;w<_.length-8;++w)_[w]=0;w=this.o*8;for(var A=_.length-8;A<_.length;++A)_[A]=w&255,w/=256;for(this.v(_),_=Array(16),w=0,A=0;A<4;++A)for(let C=0;C<32;C+=8)_[w++]=this.g[A]>>>C&255;return _};function i(_,w){var A=a;return Object.prototype.hasOwnProperty.call(A,_)?A[_]:A[_]=w(_)}function o(_,w){this.h=w;const A=[];let C=!0;for(let R=_.length-1;R>=0;R--){const P=_[R]|0;C&&P==w||(A[R]=P,C=!1)}this.g=A}var a={};function u(_){return-128<=_&&_<128?i(_,function(w){return new o([w|0],w<0?-1:0)}):new o([_|0],_<0?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return f;if(_<0)return k(c(-_));const w=[];let A=1;for(let C=0;_>=A;C++)w[C]=_/A|0,A*=4294967296;return new o(w,0)}function h(_,w){if(_.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(_.charAt(0)=="-")return k(h(_.substring(1),w));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(w,8));let C=f;for(let P=0;P<_.length;P+=8){var R=Math.min(8,_.length-P);const x=parseInt(_.substring(P,P+R),w);R<8?(R=c(Math.pow(w,R)),C=C.j(R).add(c(x))):(C=C.j(A),C=C.add(c(x)))}return C}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-k(this).m();let _=0,w=1;for(let A=0;A<this.g.length;A++){const C=this.i(A);_+=(C>=0?C:4294967296+C)*w,w*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(T(this))return"-"+k(this).toString(_);const w=c(Math.pow(_,6));var A=this;let C="";for(;;){const R=b(A,w).g;A=E(A,R.j(w));let P=((A.g.length>0?A.g[0]:A.h)>>>0).toString(_);if(A=R,S(A))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(let w=0;w<_.g.length;w++)if(_.g[w]!=0)return!1;return!0}function T(_){return _.h==-1}t.l=function(_){return _=E(this,_),T(_)?-1:S(_)?0:1};function k(_){const w=_.g.length,A=[];for(let C=0;C<w;C++)A[C]=~_.g[C];return new o(A,~_.h).add(p)}t.abs=function(){return T(this)?k(this):this},t.add=function(_){const w=Math.max(this.g.length,_.g.length),A=[];let C=0;for(let R=0;R<=w;R++){let P=C+(this.i(R)&65535)+(_.i(R)&65535),x=(P>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);C=x>>>16,P&=65535,x&=65535,A[R]=x<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(_,w){return _.add(k(w))}t.j=function(_){if(S(this)||S(_))return f;if(T(this))return T(_)?k(this).j(k(_)):k(k(this).j(_));if(T(_))return k(this.j(k(_)));if(this.l(g)<0&&_.l(g)<0)return c(this.m()*_.m());const w=this.g.length+_.g.length,A=[];for(var C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(let R=0;R<_.g.length;R++){const P=this.i(C)>>>16,x=this.i(C)&65535,ie=_.i(R)>>>16,Ee=_.i(R)&65535;A[2*C+2*R]+=x*Ee,y(A,2*C+2*R),A[2*C+2*R+1]+=P*Ee,y(A,2*C+2*R+1),A[2*C+2*R+1]+=x*ie,y(A,2*C+2*R+1),A[2*C+2*R+2]+=P*ie,y(A,2*C+2*R+2)}for(_=0;_<w;_++)A[_]=A[2*_+1]<<16|A[2*_];for(_=w;_<2*w;_++)A[_]=0;return new o(A,0)};function y(_,w){for(;(_[w]&65535)!=_[w];)_[w+1]+=_[w]>>>16,_[w]&=65535,w++}function v(_,w){this.g=_,this.h=w}function b(_,w){if(S(w))throw Error("division by zero");if(S(_))return new v(f,f);if(T(_))return w=b(k(_),w),new v(k(w.g),k(w.h));if(T(w))return w=b(_,k(w)),new v(k(w.g),w.h);if(_.g.length>30){if(T(_)||T(w))throw Error("slowDivide_ only works with positive integers.");for(var A=p,C=w;C.l(_)<=0;)A=M(A),C=M(C);var R=F(A,1),P=F(C,1);for(C=F(C,2),A=F(A,2);!S(C);){var x=P.add(C);x.l(_)<=0&&(R=R.add(A),P=x),C=F(C,1),A=F(A,1)}return w=E(_,R.j(w)),new v(R,w)}for(R=f;_.l(w)>=0;){for(A=Math.max(1,Math.floor(_.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=c(A),x=P.j(w);T(x)||x.l(_)>0;)A-=C,P=c(A),x=P.j(w);S(P)&&(P=p),R=R.add(P),_=E(_,x)}return new v(R,_)}t.B=function(_){return b(this,_).h},t.and=function(_){const w=Math.max(this.g.length,_.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)&_.i(C);return new o(A,this.h&_.h)},t.or=function(_){const w=Math.max(this.g.length,_.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)|_.i(C);return new o(A,this.h|_.h)},t.xor=function(_){const w=Math.max(this.g.length,_.g.length),A=[];for(let C=0;C<w;C++)A[C]=this.i(C)^_.i(C);return new o(A,this.h^_.h)};function M(_){const w=_.g.length+1,A=[];for(let C=0;C<w;C++)A[C]=_.i(C)<<1|_.i(C-1)>>>31;return new o(A,_.h)}function F(_,w){const A=w>>5;w%=32;const C=_.g.length-A,R=[];for(let P=0;P<C;P++)R[P]=w>0?_.i(P+A)>>>w|_.i(P+A+1)<<32-w:_.i(P+A);return new o(R,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,es=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RA,fa,CA,tc,Xp,kA,xA,bA;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Iu=="object"&&Iu];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var D=l[I];if(!(D in m))break e;m=m[D]}l=l[l.length-1],I=m[l],d=d(I),d!=I&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(d){var m=[],I;for(I in d)Object.prototype.hasOwnProperty.call(d,I)&&m.push([I,d[I]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,m){return l.call.apply(l.bind,arguments)}function c(l,d,m){return c=u,c.apply(null,arguments)}function h(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function f(l,d){function m(){}m.prototype=d.prototype,l.Z=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(I,D,V){for(var z=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)z[ue-2]=arguments[ue];return d.prototype[D].apply(I,z)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function g(l){const d=l.length;if(d>0){const m=Array(d);for(let I=0;I<d;I++)m[I]=l[I];return m}return[]}function S(l,d){for(let I=1;I<arguments.length;I++){const D=arguments[I];var m=typeof D;if(m=m!="object"?m:D?Array.isArray(D)?"array":m:"null",m=="array"||m=="object"&&typeof D.length=="number"){m=l.length||0;const V=D.length||0;l.length=m+V;for(let z=0;z<V;z++)l[m+z]=D[z]}else l.push(D)}}class T{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(l){o.setTimeout(()=>{throw l},0)}function E(){var l=_;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class y{constructor(){this.h=this.g=null}add(d,m){const I=v.get();I.set(d,m),this.h?this.h.next=I:this.g=I,this.h=I}}var v=new T(()=>new b,l=>l.reset());class b{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,_=new y,w=()=>{const l=Promise.resolve(void 0);M=()=>{l.then(A)}};function A(){for(var l;l=E();){try{l.h.call(l.g)}catch(m){k(m)}var d=v;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}F=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return l}();function x(l){return/^[\s\xa0]*$/.test(l)}function ie(l,d){R.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}f(ie,R),ie.prototype.init=function(l,d){const m=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),mt=0;function Rt(l,d,m,I,D){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!I,this.ha=D,this.key=++mt,this.da=this.fa=!1}function W(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function G(l,d,m){for(const I in l)d.call(m,l[I],I,l)}function se(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function de(l){const d={};for(const m in l)d[m]=l[m];return d}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bt(l,d){let m,I;for(let D=1;D<arguments.length;D++){I=arguments[D];for(m in I)l[m]=I[m];for(let V=0;V<Ie.length;V++)m=Ie[V],Object.prototype.hasOwnProperty.call(I,m)&&(l[m]=I[m])}}function X(l){this.src=l,this.g={},this.h=0}X.prototype.add=function(l,d,m,I,D){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const z=_e(l,d,I,D);return z>-1?(d=l[z],m||(d.fa=!1)):(d=new Rt(d,this.src,V,!!I,D),d.fa=m,l.push(d)),d};function K(l,d){const m=d.type;if(m in l.g){var I=l.g[m],D=Array.prototype.indexOf.call(I,d,void 0),V;(V=D>=0)&&Array.prototype.splice.call(I,D,1),V&&(W(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function _e(l,d,m,I){for(let D=0;D<l.length;++D){const V=l[D];if(!V.da&&V.listener==d&&V.capture==!!m&&V.ha==I)return D}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),He={};function Ir(l,d,m,I,D){if(Array.isArray(d)){for(let V=0;V<d.length;V++)Ir(l,d[V],m,I,D);return null}return m=$y(m),l&&l[Ee]?l.J(d,m,a(I)?!!I.capture:!1,D):Ml(l,d,m,!1,I,D)}function Ml(l,d,m,I,D,V){if(!d)throw Error("Invalid event type");const z=a(D)?!!D.capture:!!D;let ue=od(l);if(ue||(l[Me]=ue=new X(l)),m=ue.add(d,m,I,z,V),m.proxy)return m;if(I=sd(),m.proxy=I,I.src=l,I.listener=m,l.addEventListener)P||(D=z),D===void 0&&(D=!1),l.addEventListener(d.toString(),I,D);else if(l.attachEvent)l.attachEvent(Fy(d.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function sd(){function l(m){return d.call(l.src,l.listener,m)}const d=AC;return l}function Vy(l,d,m,I,D){if(Array.isArray(d))for(var V=0;V<d.length;V++)Vy(l,d[V],m,I,D);else I=a(I)?!!I.capture:!!I,m=$y(m),l&&l[Ee]?(l=l.i,V=String(d).toString(),V in l.g&&(d=l.g[V],m=_e(d,m,I,D),m>-1&&(W(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete l.g[V],l.h--)))):l&&(l=od(l))&&(d=l.g[d.toString()],l=-1,d&&(l=_e(d,m,I,D)),(m=l>-1?d[l]:null)&&id(m))}function id(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ee])K(d.i,l);else{var m=l.type,I=l.proxy;d.removeEventListener?d.removeEventListener(m,I,l.capture):d.detachEvent?d.detachEvent(Fy(m),I):d.addListener&&d.removeListener&&d.removeListener(I),(m=od(d))?(K(m,l),m.h==0&&(m.src=null,d[Me]=null)):W(l)}}}function Fy(l){return l in He?He[l]:He[l]="on"+l}function AC(l,d){if(l.da)l=!0;else{d=new ie(d,this);const m=l.listener,I=l.ha||l.src;l.fa&&id(l),l=m.call(I,d)}return l}function od(l){return l=l[Me],l instanceof X?l:null}var ad="__closure_events_fn_"+(Math.random()*1e9>>>0);function $y(l){return typeof l=="function"?l:(l[ad]||(l[ad]=function(d){return l.handleEvent(d)}),l[ad])}function gt(){C.call(this),this.i=new X(this),this.M=this,this.G=null}f(gt,C),gt.prototype[Ee]=!0,gt.prototype.removeEventListener=function(l,d,m,I){Vy(this,l,d,m,I)};function Ct(l,d){var m,I=l.G;if(I)for(m=[];I;I=I.G)m.push(I);if(l=l.M,I=d.type||d,typeof d=="string")d=new R(d,l);else if(d instanceof R)d.target=d.target||l;else{var D=d;d=new R(I,l),Bt(d,D)}D=!0;let V,z;if(m)for(z=m.length-1;z>=0;z--)V=d.g=m[z],D=Vl(V,I,!0,d)&&D;if(V=d.g=l,D=Vl(V,I,!0,d)&&D,D=Vl(V,I,!1,d)&&D,m)for(z=0;z<m.length;z++)V=d.g=m[z],D=Vl(V,I,!1,d)&&D}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const m=l.g[d];for(let I=0;I<m.length;I++)W(m[I]);delete l.g[d],l.h--}}this.G=null},gt.prototype.J=function(l,d,m,I){return this.i.add(String(l),d,!1,m,I)},gt.prototype.K=function(l,d,m,I){return this.i.add(String(l),d,!0,m,I)};function Vl(l,d,m,I){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let V=0;V<d.length;++V){const z=d[V];if(z&&!z.da&&z.capture==m){const ue=z.listener,qe=z.ha||z.src;z.fa&&K(l.i,z),D=ue.call(qe,I)!==!1&&D}}return D&&!I.defaultPrevented}function RC(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function Uy(l){l.g=RC(()=>{l.g=null,l.i&&(l.i=!1,Uy(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class CC extends C{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Uy(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ao(l){C.call(this),this.h=l,this.g={}}f(Ao,C);var jy=[];function By(l){G(l.g,function(d,m){this.g.hasOwnProperty(m)&&id(d)},l),l.g={}}Ao.prototype.N=function(){Ao.Z.N.call(this),By(this)},Ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ld=o.JSON.stringify,kC=o.JSON.parse,xC=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function zy(){}function Wy(){}var Ro={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ud(){R.call(this,"d")}f(ud,R);function cd(){R.call(this,"c")}f(cd,R);var _s={},Hy=null;function Fl(){return Hy=Hy||new gt}_s.Ia="serverreachability";function qy(l){R.call(this,_s.Ia,l)}f(qy,R);function Co(l){const d=Fl();Ct(d,new qy(d))}_s.STAT_EVENT="statevent";function Ky(l,d){R.call(this,_s.STAT_EVENT,l),this.stat=d}f(Ky,R);function kt(l){const d=Fl();Ct(d,new Ky(d,l))}_s.Ja="timingevent";function Gy(l,d){R.call(this,_s.Ja,l),this.size=d}f(Gy,R);function ko(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function xo(){this.g=!0}xo.prototype.ua=function(){this.g=!1};function bC(l,d,m,I,D,V){l.info(function(){if(l.g)if(V){var z="",ue=V.split("&");for(let Se=0;Se<ue.length;Se++){var qe=ue[Se].split("=");if(qe.length>1){const et=qe[0];qe=qe[1];const bn=et.split("_");z=bn.length>=2&&bn[1]=="type"?z+(et+"="+qe+"&"):z+(et+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+I+") [attempt "+D+"]: "+d+`
`+m+`
`+z})}function PC(l,d,m,I,D,V,z){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+D+"]: "+d+`
`+m+`
`+V+" "+z})}function ci(l,d,m,I){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+OC(l,m)+(I?" "+I:"")})}function NC(l,d){l.info(function(){return"TIMEOUT: "+d})}xo.prototype.info=function(){};function OC(l,d){if(!l.g)return d;if(!d)return null;try{const V=JSON.parse(d);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var m=V[l];if(!(m.length<2)){var I=m[1];if(Array.isArray(I)&&!(I.length<1)){var D=I[0];if(D!="noop"&&D!="stop"&&D!="close")for(let z=1;z<I.length;z++)I[z]=""}}}}return ld(V)}catch{return d}}var $l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yy;function hd(){}f(hd,zy),hd.prototype.g=function(){return new XMLHttpRequest},Yy=new hd;function bo(l){return encodeURIComponent(String(l))}function DC(l){var d=1;l=l.split(":");const m=[];for(;d>0&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function Sr(l,d,m,I){this.j=l,this.i=d,this.l=m,this.S=I||1,this.V=new Ao(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Jy={},dd={};function fd(l,d,m){l.M=1,l.A=jl(xn(d)),l.u=m,l.R=!0,Zy(l,null)}function Zy(l,d){l.F=Date.now(),Ul(l),l.B=xn(l.A);var m=l.B,I=l.S;Array.isArray(I)||(I=[String(I)]),d_(m.i,"t",I),l.C=0,m=l.j.L,l.h=new Xy,l.g=b_(l.j,m?d:null,!l.u),l.P>0&&(l.O=new CC(c(l.Y,l,l.g),l.P)),d=l.V,m=l.g,I=l.ba;var D="readystatechange";Array.isArray(D)||(D&&(jy[0]=D.toString()),D=jy);for(let V=0;V<D.length;V++){const z=Ir(m,D[V],I||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=l.J?de(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Co(),bC(l.i,l.v,l.B,l.l,l.S,l.u)}Sr.prototype.ba=function(l){l=l.target;const d=this.O;d&&Rr(l)==3?d.j():this.Y(l)},Sr.prototype.Y=function(l){try{if(l==this.g)e:{const ue=Rr(this.g),qe=this.g.ya(),Se=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||w_(this.g)))){this.K||ue!=4||qe==7||(qe==8||Se<=0?Co(3):Co(2)),pd(this);var d=this.g.ca();this.X=d;var m=LC(this);if(this.o=d==200,PC(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var I,D=this.g;if((I=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(I)){var V=I;break t}}V=null}if(l=V)ci(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,md(this,l);else{this.o=!1,this.m=3,kt(12),ws(this),Po(this);break e}}if(this.R){l=!0;let et;for(;!this.K&&this.C<m.length;)if(et=MC(this,m),et==dd){ue==4&&(this.m=4,kt(14),l=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Jy){this.m=4,kt(15),ci(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else ci(this.i,this.l,et,null),md(this,et);if(e_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||m.length!=0||this.h.h||(this.m=1,kt(16),l=!1),this.o=this.o&&l,!l)ci(this.i,this.l,m,"[Invalid Chunked Response]"),ws(this),Po(this);else if(m.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Sd(z),z.P=!0,kt(11))}}else ci(this.i,this.l,m,null),md(this,m);ue==4&&ws(this),this.o&&!this.K&&(ue==4?R_(this.j,this):(this.o=!1,Ul(this)))}else YC(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),ws(this),Po(this)}}}catch{}finally{}};function LC(l){if(!e_(l))return l.g.la();const d=w_(l.g);if(d==="")return"";let m="";const I=d.length,D=Rr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ws(l),Po(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<I;V++)l.h.h=!0,m+=l.h.i.decode(d[V],{stream:!(D&&V==I-1)});return d.length=0,l.h.g+=m,l.C=0,l.h.g}function e_(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function MC(l,d){var m=l.C,I=d.indexOf(`
`,m);return I==-1?dd:(m=Number(d.substring(m,I)),isNaN(m)?Jy:(I+=1,I+m>d.length?dd:(d=d.slice(I,I+m),l.C=I+m,d)))}Sr.prototype.cancel=function(){this.K=!0,ws(this)};function Ul(l){l.T=Date.now()+l.H,t_(l,l.H)}function t_(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=ko(c(l.aa,l),d)}function pd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Sr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(NC(this.i,this.B),this.M!=2&&(Co(),kt(17)),ws(this),this.m=2,Po(this)):t_(this,this.T-l)};function Po(l){l.j.I==0||l.K||R_(l.j,l)}function ws(l){pd(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,By(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function md(l,d){try{var m=l.j;if(m.I!=0&&(m.g==l||gd(m.h,l))){if(!l.L&&gd(m.h,l)&&m.I==3){try{var I=m.Ba.g.parse(d)}catch{I=null}if(Array.isArray(I)&&I.length==3){var D=I;if(D[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)ql(m),Wl(m);else break e;Id(m),kt(18)}}else m.xa=D[1],0<m.xa-m.K&&D[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=ko(c(m.Va,m),6e3));s_(m.h)<=1&&m.ta&&(m.ta=void 0)}else Es(m,11)}else if((l.L||m.g==l)&&ql(m),!x(d))for(D=m.Ba.g.parse(d),d=0;d<D.length;d++){let Se=D[d];const et=Se[0];if(!(et<=m.K))if(m.K=et,Se=Se[1],m.I==2)if(Se[0]=="c"){m.M=Se[1],m.ba=Se[2];const bn=Se[3];bn!=null&&(m.ka=bn,m.j.info("VER="+m.ka));const Is=Se[4];Is!=null&&(m.za=Is,m.j.info("SVER="+m.za));const Cr=Se[5];Cr!=null&&typeof Cr=="number"&&Cr>0&&(I=1.5*Cr,m.O=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const kr=l.g;if(kr){const Gl=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gl){var V=I.h;V.g||Gl.indexOf("spdy")==-1&&Gl.indexOf("quic")==-1&&Gl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(yd(V,V.h),V.h=null))}if(I.G){const Td=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Td&&(I.wa=Td,Ae(I.J,I.G,Td))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),I=m;var z=l;if(I.na=x_(I,I.L?I.ba:null,I.W),z.L){i_(I.h,z);var ue=z,qe=I.O;qe&&(ue.H=qe),ue.D&&(pd(ue),Ul(ue)),I.g=z}else T_(I);m.i.length>0&&Hl(m)}else Se[0]!="stop"&&Se[0]!="close"||Es(m,7);else m.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Es(m,7):Ed(m):Se[0]!="noop"&&m.l&&m.l.qa(Se),m.A=0)}}Co(4)}catch{}}var VC=class{constructor(l,d){this.g=l,this.map=d}};function n_(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function r_(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function s_(l){return l.h?1:l.g?l.g.size:0}function gd(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function yd(l,d){l.g?l.g.add(d):l.h=d}function i_(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}n_.prototype.cancel=function(){if(this.i=o_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function o_(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.G);return d}return g(l.i)}var a_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FC(l,d){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const I=l[m].indexOf("=");let D,V=null;I>=0?(D=l[m].substring(0,I),V=l[m].substring(I+1)):D=l[m],d(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Tr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof Tr?(this.l=l.l,No(this,l.j),this.o=l.o,this.g=l.g,Oo(this,l.u),this.h=l.h,_d(this,f_(l.i)),this.m=l.m):l&&(d=String(l).match(a_))?(this.l=!1,No(this,d[1]||"",!0),this.o=Do(d[2]||""),this.g=Do(d[3]||"",!0),Oo(this,d[4]),this.h=Do(d[5]||"",!0),_d(this,d[6]||"",!0),this.m=Do(d[7]||"")):(this.l=!1,this.i=new Mo(null,this.l))}Tr.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(Lo(d,l_,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Lo(d,l_,!0),"@"),l.push(bo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Lo(m,m.charAt(0)=="/"?jC:UC,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Lo(m,zC)),l.join("")},Tr.prototype.resolve=function(l){const d=xn(this);let m=!!l.j;m?No(d,l.j):m=!!l.o,m?d.o=l.o:m=!!l.g,m?d.g=l.g:m=l.u!=null;var I=l.h;if(m)Oo(d,l.u);else if(m=!!l.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var D=d.h.lastIndexOf("/");D!=-1&&(I=d.h.slice(0,D+1)+I)}if(D=I,D==".."||D==".")I="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){I=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let z=0;z<D.length;){const ue=D[z++];ue=="."?I&&z==D.length&&V.push(""):ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),I&&z==D.length&&V.push("")):(V.push(ue),I=!0)}I=V.join("/")}else I=D}return m?d.h=I:m=l.i.toString()!=="",m?_d(d,f_(l.i)):m=!!l.m,m&&(d.m=l.m),d};function xn(l){return new Tr(l)}function No(l,d,m){l.j=m?Do(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Oo(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function _d(l,d,m){d instanceof Mo?(l.i=d,WC(l.i,l.l)):(m||(d=Lo(d,BC)),l.i=new Mo(d,l.l))}function Ae(l,d,m){l.i.set(d,m)}function jl(l){return Ae(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Do(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Lo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,$C),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function $C(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var l_=/[#\/\?@]/g,UC=/[#\?:]/g,jC=/[#\?]/g,BC=/[#\?@]/g,zC=/#/g;function Mo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function vs(l){l.g||(l.g=new Map,l.h=0,l.i&&FC(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Mo.prototype,t.add=function(l,d){vs(this),this.i=null,l=hi(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function u_(l,d){vs(l),d=hi(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function c_(l,d){return vs(l),d=hi(l,d),l.g.has(d)}t.forEach=function(l,d){vs(this),this.g.forEach(function(m,I){m.forEach(function(D){l.call(d,D,I,this)},this)},this)};function h_(l,d){vs(l);let m=[];if(typeof d=="string")c_(l,d)&&(m=m.concat(l.g.get(hi(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)m=m.concat(l[d]);return m}t.set=function(l,d){return vs(this),this.i=null,l=hi(this,l),c_(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=h_(this,l),l.length>0?String(l[0]):d):d};function d_(l,d,m){u_(l,d),m.length>0&&(l.i=null,l.g.set(hi(l,d),g(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let I=0;I<d.length;I++){var m=d[I];const D=bo(m);m=h_(this,m);for(let V=0;V<m.length;V++){let z=D;m[V]!==""&&(z+="="+bo(m[V])),l.push(z)}}return this.i=l.join("&")};function f_(l){const d=new Mo;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function hi(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function WC(l,d){d&&!l.j&&(vs(l),l.i=null,l.g.forEach(function(m,I){const D=I.toLowerCase();I!=D&&(u_(this,I),d_(this,D,m))},l)),l.j=d}function HC(l,d){const m=new xo;if(o.Image){const I=new Image;I.onload=h(Ar,m,"TestLoadImage: loaded",!0,d,I),I.onerror=h(Ar,m,"TestLoadImage: error",!1,d,I),I.onabort=h(Ar,m,"TestLoadImage: abort",!1,d,I),I.ontimeout=h(Ar,m,"TestLoadImage: timeout",!1,d,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else d(!1)}function qC(l,d){const m=new xo,I=new AbortController,D=setTimeout(()=>{I.abort(),Ar(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:I.signal}).then(V=>{clearTimeout(D),V.ok?Ar(m,"TestPingServer: ok",!0,d):Ar(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Ar(m,"TestPingServer: error",!1,d)})}function Ar(l,d,m,I,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),I(m)}catch{}}function KC(){this.g=new xC}function wd(l){this.i=l.Sb||null,this.h=l.ab||!1}f(wd,zy),wd.prototype.g=function(){return new Bl(this.i,this.h)};function Bl(l,d){gt.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bl,gt),t=Bl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Fo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;p_(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function p_(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Vo(this):Fo(this),this.readyState==3&&p_(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Vo(this))},t.Na=function(l){this.g&&(this.response=l,Vo(this))},t.ga=function(){this.g&&Vo(this)};function Vo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Fo(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Fo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function m_(l){let d="";return G(l,function(m,I){d+=I,d+=":",d+=m,d+=`\r
`}),d}function vd(l,d,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=m_(m),typeof l=="string"?m!=null&&bo(m):Ae(l,d,m))}function Ve(l){gt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ve,gt);var GC=/^https?$/i,QC=["POST","PUT"];t=Ve.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yy.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(V){g_(this,V);return}if(l=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var D in I)m.set(D,I[D]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())m.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(QC,d,void 0)>=0)||I||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of m)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){g_(this,V)}};function g_(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,y_(l),zl(l)}function y_(l){l.A||(l.A=!0,Ct(l,"complete"),Ct(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Ct(this,"complete"),Ct(this,"abort"),zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zl(this,!0)),Ve.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?__(this):this.Xa())},t.Xa=function(){__(this)};function __(l){if(l.h&&typeof i<"u"){if(l.v&&Rr(l)==4)setTimeout(l.Ca.bind(l),0);else if(Ct(l,"readystatechange"),Rr(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var I;if(I=V===0){let z=String(l.D).match(a_)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),I=!GC.test(z?z.toLowerCase():"")}m=I}if(m)Ct(l,"complete"),Ct(l,"success");else{l.o=6;try{var D=Rr(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",y_(l)}}finally{zl(l)}}}}function zl(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,d||Ct(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Rr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),kC(d)}};function w_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YC(l){const d={};l=(l.g&&Rr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(x(l[I]))continue;var m=DC(l[I]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=d[D]||[];d[D]=V,V.push(m)}se(d,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function v_(l){this.za=0,this.i=[],this.j=new xo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$o("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$o("baseRetryDelayMs",5e3,l),this.Za=$o("retryDelaySeedMs",1e4,l),this.Ta=$o("forwardChannelMaxRetries",2,l),this.va=$o("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new n_(l&&l.concurrentRequestLimit),this.Ba=new KC,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=v_.prototype,t.ka=8,t.I=1,t.connect=function(l,d,m,I){kt(0),this.W=l,this.H=d||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.J=x_(this,null,this.W),Hl(this)};function Ed(l){if(E_(l),l.I==3){var d=l.V++,m=xn(l.J);if(Ae(m,"SID",l.M),Ae(m,"RID",d),Ae(m,"TYPE","terminate"),Uo(l,m),d=new Sr(l,l.j,d),d.M=2,d.A=jl(xn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=b_(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ul(d)}k_(l)}function Wl(l){l.g&&(Sd(l),l.g.cancel(),l.g=null)}function E_(l){Wl(l),l.v&&(o.clearTimeout(l.v),l.v=null),ql(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Hl(l){if(!r_(l.h)&&!l.m){l.m=!0;var d=l.Ea;M||w(),F||(M(),F=!0),_.add(d,l),l.D=0}}function XC(l,d){return s_(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=ko(c(l.Ea,l,d),C_(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new Sr(this,this.j,l);let V=this.o;if(this.U&&(V?(V=de(V),Bt(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(d+=I,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=S_(this,D,d),m=xn(this.J),Ae(m,"RID",l),Ae(m,"CVER",22),this.G&&Ae(m,"X-HTTP-Session-Id",this.G),Uo(this,m),V&&(this.R?d="headers="+bo(m_(V))+"&"+d:this.u&&vd(m,this.u,V)),yd(this.h,D),this.Ra&&Ae(m,"TYPE","init"),this.S?(Ae(m,"$req",d),Ae(m,"SID","null"),D.U=!0,fd(D,m,null)):fd(D,m,d),this.I=2}}else this.I==3&&(l?I_(this,l):this.i.length==0||r_(this.h)||I_(this))};function I_(l,d){var m;d?m=d.l:m=l.V++;const I=xn(l.J);Ae(I,"SID",l.M),Ae(I,"RID",m),Ae(I,"AID",l.K),Uo(l,I),l.u&&l.o&&vd(I,l.u,l.o),m=new Sr(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),d&&(l.i=d.G.concat(l.i)),d=S_(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),yd(l.h,m),fd(m,I,d)}function Uo(l,d){l.H&&G(l.H,function(m,I){Ae(d,I,m)}),l.l&&G({},function(m,I){Ae(d,I,m)})}function S_(l,d,m){m=Math.min(l.i.length,m);const I=l.l?c(l.l.Ka,l.l,l):null;e:{var D=l.i;let ue=-1;for(;;){const qe=["count="+m];ue==-1?m>0?(ue=D[0].g,qe.push("ofs="+ue)):ue=0:qe.push("ofs="+ue);let Se=!0;for(let et=0;et<m;et++){var V=D[et].g;const bn=D[et].map;if(V-=ue,V<0)ue=Math.max(0,D[et].g-100),Se=!1;else try{V="req"+V+"_"||"";try{var z=bn instanceof Map?bn:Object.entries(bn);for(const[Is,Cr]of z){let kr=Cr;a(Cr)&&(kr=ld(Cr)),qe.push(V+Is+"="+encodeURIComponent(kr))}}catch(Is){throw qe.push(V+"type="+encodeURIComponent("_badmap")),Is}}catch{I&&I(bn)}}if(Se){z=qe.join("&");break e}}z=void 0}return l=l.i.splice(0,m),d.G=l,z}function T_(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;M||w(),F||(M(),F=!0),_.add(d,l),l.A=0}}function Id(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=ko(c(l.Da,l),C_(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,A_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=ko(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Wl(this),A_(this))};function Sd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function A_(l){l.g=new Sr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=xn(l.na);Ae(d,"RID","rpc"),Ae(d,"SID",l.M),Ae(d,"AID",l.K),Ae(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ae(d,"TO",l.ia),Ae(d,"TYPE","xmlhttp"),Uo(l,d),l.u&&l.o&&vd(d,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=jl(xn(d)),m.u=null,m.R=!0,Zy(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Wl(this),Id(this),kt(19))};function ql(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function R_(l,d){var m=null;if(l.g==d){ql(l),Sd(l),l.g=null;var I=2}else if(gd(l.h,d))m=d.G,i_(l.h,d),I=1;else return;if(l.I!=0){if(d.o)if(I==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var D=l.D;I=Fl(),Ct(I,new Gy(I,m)),Hl(l)}else T_(l);else if(D=d.m,D==3||D==0&&d.X>0||!(I==1&&XC(l,d)||I==2&&Id(l)))switch(m&&m.length>0&&(d=l.h,d.i=d.i.concat(m)),D){case 1:Es(l,5);break;case 4:Es(l,10);break;case 3:Es(l,6);break;default:Es(l,2)}}}function C_(l,d){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*d}function Es(l,d){if(l.j.info("Error code "+d),d==2){var m=c(l.bb,l),I=l.Ua;const D=!I;I=new Tr(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||No(I,"https"),jl(I),D?HC(I.toString(),m):qC(I.toString(),m)}else kt(2);l.I=0,l.l&&l.l.pa(d),k_(l),E_(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function k_(l){if(l.I=0,l.ja=[],l.l){const d=o_(l.h);(d.length!=0||l.i.length!=0)&&(S(l.ja,d),S(l.ja,l.i),l.h.i.length=0,g(l.i),l.i.length=0),l.l.oa()}}function x_(l,d,m){var I=m instanceof Tr?xn(m):new Tr(m);if(I.g!="")d&&(I.g=d+"."+I.g),Oo(I,I.u);else{var D=o.location;I=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;const V=new Tr(null);I&&No(V,I),d&&(V.g=d),D&&Oo(V,D),m&&(V.h=m),I=V}return m=l.G,d=l.wa,m&&d&&Ae(I,m,d),Ae(I,"VER",l.ka),Uo(l,I),I}function b_(l,d,m){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new Ve(new wd({ab:m})):new Ve(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function P_(){}t=P_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kl(){}Kl.prototype.g=function(l,d){return new zt(l,d)};function zt(l,d){gt.call(this),this.g=new v_(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!x(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new di(this)}f(zt,gt),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ed(this.g)},zt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=ld(l),l=m);d.i.push(new VC(d.Ya++,l)),d.I==3&&Hl(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,zt.Z.N.call(this)};function N_(l){ud.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}f(N_,ud);function O_(){cd.call(this),this.status=1}f(O_,cd);function di(l){this.g=l}f(di,P_),di.prototype.ra=function(){Ct(this.g,"a")},di.prototype.qa=function(l){Ct(this.g,new N_(l))},di.prototype.pa=function(l){Ct(this.g,new O_)},di.prototype.oa=function(){Ct(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,bA=function(){return new Kl},xA=function(){return Fl()},kA=_s,Xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,tc=$l,Qy.COMPLETE="complete",CA=Qy,Wy.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",gt.prototype.listen=gt.prototype.J,fa=Wy,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,RA=Ve}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore",u0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new $h("@firebase/firestore");function vi(){return Xs.logLevel}function H(t,...e){if(Xs.logLevel<=fe.DEBUG){const n=e.map(Zg);Xs.debug(`Firestore (${Eo}): ${t}`,...n)}}function wr(t,...e){if(Xs.logLevel<=fe.ERROR){const n=e.map(Zg);Xs.error(`Firestore (${Eo}): ${t}`,...n)}}function no(t,...e){if(Xs.logLevel<=fe.WARN){const n=e.map(Zg);Xs.warn(`Firestore (${Eo}): ${t}`,...n)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,PA(t,r,n)}function PA(t,e,n){let r=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wr(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||PA(e,s,r)}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class sV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iV{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ts,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ts)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new NA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new vt(e)}}class oV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Jp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return yf(s)===yf(i)?pe(s,i):yf(s)?1:-1}return pe(t.length,e.length)}const cV=55296,hV=57343;function yf(t){const e=t.charCodeAt(0);return e>=cV&&e<=hV}function ro(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class Ln{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ln.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=Ln.isNumericId(e),s=Ln.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):Jp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}}class Ne extends Ln{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const dV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Ln{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return dV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new ct([h0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ne.fromString(e))}static fromName(e){return new Z(Ne.fromString(e).popFirst(5))}static empty(){return new Z(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pV(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d0(t){if(!Z.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ty(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function ol(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ty(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function Pl(t,e){if(!OA(t))throw new Y(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=-62135596800,p0=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*p0);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<f0)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p0}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pl(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:ze("string",Ce._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Ce(0,0))}static max(){return new oe(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=-1;function mV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new is(s,Z.empty(),e)}function gV(t){return new is(t.readTime,t.key,al)}class is{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new is(oe.min(),Z.empty(),al)}static max(){return new is(oe.max(),Z.empty(),al)}}function yV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==_V)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function vV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function So(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=-1;function Wh(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function EV(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="";function IV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=m0(e)),e=SV(t.get(n),e);return m0(e)}function SV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case DA:n+="";break;default:n+=i}}return n}function m0(t){return t+DA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Su(this.root,e,this.comparator,!1)}getReverseIterator(){return new Su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Su(this.root,e,this.comparator,!0)}}class Su{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y0(this.data.getIterator())}getIteratorFrom(e){return new y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Ze(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new MA("Invalid base64 string: "+i):i}}(e);return new pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const TV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=TV.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function as(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="server_timestamp",FA="__type__",$A="__previous_value__",UA="__local_write_time__";function ry(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[FA])==null?void 0:r.stringValue)===VA}function Hh(t){const e=t.mapValue.fields[$A];return ry(e)?Hh(e):e}function ll(t){const e=os(t.mapValue.fields[UA].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,r,s,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const Xc="(default)";class ul{constructor(e,n){this.projectId=e,this.database=n||Xc}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database===Xc}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__type__",RV="__max__",Tu={mapValue:{}},BA="__vector__",Jc="value";function ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:kV(t)?9007199254740991:CV(t)?10:11:ne(28295,{value:t})}function Gn(t,e){if(t===e)return!0;const n=ls(t);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=os(s.timestampValue),a=os(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return as(s.bytesValue).isEqual(as(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),a=$e(i.doubleValue);return o===a?Yc(o)===Yc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(g0(o)!==g0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Gn(o[u],a[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function cl(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=ls(t),r=ls(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=$e(i.integerValue||i.doubleValue),u=$e(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return _0(t.timestampValue,e.timestampValue);case 4:return _0(ll(t),ll(e));case 5:return Jp(t.stringValue,e.stringValue);case 6:return function(i,o){const a=as(i),u=as(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=pe(a[c],u[c]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=pe($e(i.latitude),$e(o.latitude));return a!==0?a:pe($e(i.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,S,T;const a=i.fields||{},u=o.fields||{},c=(p=a[Jc])==null?void 0:p.arrayValue,h=(g=u[Jc])==null?void 0:g.arrayValue,f=pe(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((T=h==null?void 0:h.values)==null?void 0:T.length)||0);return f!==0?f:w0(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Tu.mapValue&&o===Tu.mapValue)return 0;if(i===Tu.mapValue)return 1;if(o===Tu.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Jp(u[f],h[f]);if(p!==0)return p;const g=so(a[u[f]],c[h[f]]);if(g!==0)return g}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function _0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=os(t),r=os(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function w0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=so(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function io(t){return Zp(t)}function Zp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=os(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return as(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zp(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function nc(t){switch(ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(t);return e?16+nc(e):16;case 5:return 2*t.stringValue.length;case 6:return as(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+nc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return oi(r.fields,(i,o)=>{s+=i.length+nc(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function em(t){return!!t&&"integerValue"in t}function sy(t){return!!t&&"arrayValue"in t}function v0(t){return!!t&&"nullValue"in t}function E0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rc(t){return!!t&&"mapValue"in t}function CV(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jA])==null?void 0:r.stringValue)===BA}function Na(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return oi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return{...t}}function kV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Na(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){oi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new sn(Na(this.value))}}function zA(t){const e=[];return oi(t.fields,(n,r)=>{const s=new ct([n]);if(rc(r)){const i=zA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,oe.min(),oe.min(),oe.min(),sn.empty(),0)}static newFoundDocument(e,n,r,s){return new It(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new It(e,2,n,oe.min(),oe.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,oe.min(),oe.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function I0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=so(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function S0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n="asc"){this.field=e,this.dir=n}}function xV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class Ye extends WA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PV(e,n,r):n==="array-contains"?new DV(e,r):n==="in"?new LV(e,r):n==="not-in"?new MV(e,r):n==="array-contains-any"?new VV(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NV(e,r):new OV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(so(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends WA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qn(e,n)}matches(e){return HA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function HA(t){return t.op==="and"}function qA(t){return bV(t)&&HA(t)}function bV(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function tm(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+io(t.value);if(qA(t))return t.filters.map(e=>tm(e)).join(",");{const e=t.filters.map(n=>tm(n)).join(",");return`${t.op}(${e})`}}function KA(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Gn(r.value,s.value)}(t,e):t instanceof Qn?function(r,s){return s instanceof Qn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&KA(o,s.filters[a]),!0):!1}(t,e):void ne(19439)}function GA(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(GA).join(" ,")+"}"}(t):"Filter"}class PV extends Ye{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class NV extends Ye{constructor(e,n){super(e,"in",n),this.keys=QA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OV extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=QA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class DV extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sy(n)&&cl(n.arrayValue,this.value)}}class LV extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cl(this.value.arrayValue,n)}}class MV extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cl(this.value.arrayValue,n)}}class VV extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function T0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new FV(t,e,n,r,s,i,o)}function iy(t){const e=le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>io(r)).join(",")),e.Te=n}return e.Te}function oy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S0(t.startAt,e.startAt)&&S0(t.endAt,e.endAt)}function nm(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $V(t,e,n,r,s,i,o,a){return new qh(t,e,n,r,s,i,o,a)}function ay(t){return new qh(t)}function A0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UV(t){return t.collectionGroup!==null}function Oa(t){const e=le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new eh(i,r))}),n.has(ct.keyField().canonicalString())||e.Ie.push(new eh(ct.keyField(),r))}return e.Ie}function zn(t){const e=le(t);return e.Ee||(e.Ee=jV(e,Oa(t))),e.Ee}function jV(t,e){if(t.limitType==="F")return T0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new eh(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return T0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rm(t,e,n){return new qh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kh(t,e){return oy(zn(t),zn(e))&&t.limitType===e.limitType}function YA(t){return`${iy(zn(t))}|lt:${t.limitType}`}function Ei(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>GA(s)).join(", ")}]`),Wh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>io(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>io(s)).join(",")),`Target(${r})`}(zn(t))}; limitType=${t.limitType})`}function Gh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Oa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=I0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Oa(r),s)||r.endAt&&!function(o,a,u){const c=I0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Oa(r),s))}(t,e)}function BV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XA(t){return(e,n)=>{let r=!1;for(const s of Oa(t)){const i=zV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zV(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?so(u,c):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Le(Z.comparator);function vr(){return WV}const JA=new Le(Z.comparator);function pa(...t){let e=JA;for(const n of t)e=e.insert(n.key,n);return e}function ZA(t){let e=JA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return Da()}function eR(){return Da()}function Da(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const HV=new Le(Z.comparator),qV=new Ze(Z.comparator);function me(...t){let e=qV;for(const n of t)e=e.add(n);return e}const KV=new Ze(pe);function GV(){return KV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function tR(t){return{integerValue:""+t}}function QV(t,e){return EV(e)?tR(e):ly(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function YV(t,e,n){return t instanceof th?function(s,i){const o={fields:{[FA]:{stringValue:VA},[UA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ry(i)&&(i=Hh(i)),i&&(o.fields[$A]=i),{mapValue:o}}(n,e):t instanceof hl?rR(t,e):t instanceof dl?sR(t,e):function(s,i){const o=nR(s,i),a=R0(o)+R0(s.Ae);return em(o)&&em(s.Ae)?tR(a):ly(s.serializer,a)}(t,e)}function XV(t,e,n){return t instanceof hl?rR(t,e):t instanceof dl?sR(t,e):n}function nR(t,e){return t instanceof nh?function(r){return em(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class th extends Qh{}class hl extends Qh{constructor(e){super(),this.elements=e}}function rR(t,e){const n=iR(e);for(const r of t.elements)n.some(s=>Gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class dl extends Qh{constructor(e){super(),this.elements=e}}function sR(t,e){let n=iR(e);for(const r of t.elements)n=n.filter(s=>!Gn(s,r));return{arrayValue:{values:n}}}class nh extends Qh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function R0(t){return $e(t.integerValue||t.doubleValue)}function iR(t){return sy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof hl&&s instanceof hl||r instanceof dl&&s instanceof dl?ro(r.elements,s.elements,Gn):r instanceof nh&&s instanceof nh?Gn(r.Ae,s.Ae):r instanceof th&&s instanceof th}(t.transform,e.transform)}class ZV{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yh{}function oR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lR(t.key,cr.none()):new Nl(t.key,t.data,cr.none());{const n=t.data,r=sn.empty();let s=new Ze(ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new li(t.key,r,new wn(s.toArray()),cr.none())}}function e4(t,e,n){t instanceof Nl?function(s,i,o){const a=s.value.clone(),u=k0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(s,i,o){if(!sc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=k0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(aR(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function La(t,e,n,r){return t instanceof Nl?function(i,o,a,u){if(!sc(i.precondition,o))return a;const c=i.value.clone(),h=x0(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(i,o,a,u){if(!sc(i.precondition,o))return a;const c=x0(i.fieldTransforms,u,o),h=o.data;return h.setAll(aR(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return sc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function t4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=nR(r.transform,s||null);i!=null&&(n===null&&(n=sn.empty()),n.set(r.field,i))}return n||null}function C0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ro(r,s,(i,o)=>JV(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nl extends Yh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class li extends Yh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function aR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function k0(t,e,n){const r=new Map;we(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,XV(o,a,n[s]))}return r}function x0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YV(i,o,e))}return r}class lR extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n4 extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&e4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=oR(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>C0(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>C0(n,r))}}class uy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return HV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new uy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ge;function o4(t){switch(t){case U.OK:return ne(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function uR(t){if(t===void 0)return wr("GRPC error has no .code"),U.UNKNOWN;switch(t){case je.OK:return U.OK;case je.CANCELLED:return U.CANCELLED;case je.UNKNOWN:return U.UNKNOWN;case je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case je.INTERNAL:return U.INTERNAL;case je.UNAVAILABLE:return U.UNAVAILABLE;case je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case je.NOT_FOUND:return U.NOT_FOUND;case je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case je.ABORTED:return U.ABORTED;case je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case je.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:t})}}(ge=je||(je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new es([4294967295,4294967295],0);function b0(t){const e=a4().encode(t),n=new AA;return n.update(e),new Uint8Array(n.digest())}function P0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new es([n,r],0),new es([s,i],0)]}class cy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ma(`Invalid padding: ${n}`);if(r<0)throw new ma(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ma(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ma(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=es.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(es.fromNumber(r)));return s.compare(l4)===1&&(s=new es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b0(e),[r,s]=P0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=b0(e),[r,s]=P0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xh(oe.min(),s,new Le(pe),vr(),me())}}class Ol{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ol(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class cR{constructor(e,n){this.targetId=e,this.Ce=n}}class hR{constructor(e,n,r=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class N0{constructor(){this.ve=0,this.Fe=O0(),this.Me=pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),r=me();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Ol(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=O0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u4{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=Au(),this.He=Au(),this.Ye=new Le(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(nm(i))if(r===0){const o=new Z(i.path);this.et(n,o,It.newNoDocument(o,oe.min()))}else we(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=as(r).toUint8Array()}catch(u){if(u instanceof MA)return no("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new cy(o,s,i)}catch(u){return no(u instanceof ma?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&nm(a.target)){const u=new Z(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,It.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=me();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Xh(e,n,this.Ye,this.je,r);return this.je=vr(),this.Je=Au(),this.He=Au(),this.Ye=new Le(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new N0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Au(){return new Le(Z.comparator)}function O0(){return new Le(Z.comparator)}const c4={asc:"ASCENDING",desc:"DESCENDING"},h4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"};class f4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sm(t,e){return t.useProto3Json||Wh(e)?e:{value:e}}function rh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p4(t,e){return rh(t,e.toTimestamp())}function Wn(t){return we(!!t,49232),oe.fromTimestamp(function(n){const r=os(n);return new Ce(r.seconds,r.nanos)}(t))}function hy(t,e){return im(t,e).canonicalString()}function im(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fR(t){const e=Ne.fromString(t);return we(_R(e),10190,{key:e.toString()}),e}function om(t,e){return hy(t.databaseId,e.path)}function _f(t,e){const n=fR(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(mR(n))}function pR(t,e){return hy(t.databaseId,e)}function m4(t){const e=fR(t);return e.length===4?Ne.emptyPath():mR(e)}function am(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mR(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function D0(t,e,n){return{name:om(t,e),fields:n.value.mapValue.fields}}function g4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string",58123),pt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:uR(c.code);return new Y(h,c.message||"")}(o);n=new hR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_f(t,r.document.name),i=Wn(r.document.updateTime),o=r.document.createTime?Wn(r.document.createTime):oe.min(),a=new sn({mapValue:{fields:r.document.fields}}),u=It.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ic(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_f(t,r.document),i=r.readTime?Wn(r.readTime):oe.min(),o=It.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ic([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_f(t,r.document),i=r.removedTargetIds||[];n=new ic([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new i4(s,i),a=r.targetId;n=new cR(a,o)}}return n}function y4(t,e){let n;if(e instanceof Nl)n={update:D0(t,e.key,e.value)};else if(e instanceof lR)n={delete:om(t,e.key)};else if(e instanceof li)n={update:D0(t,e.key,e.data),updateMask:R4(e.fieldMask)};else{if(!(e instanceof n4))return ne(16599,{Vt:e.type});n={verify:om(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof th)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:p4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function _4(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Wn(s.updateTime):Wn(i);return o.isEqual(oe.min())&&(o=Wn(i)),new ZV(o,s.transformResults||[])}(n,e))):[]}function w4(t,e){return{documents:[pR(t,e.path)]}}function v4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pR(t,s);const i=function(c){if(c.length!==0)return yR(Qn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ii(p.field),direction:S4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function E4(t){let e=m4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=gR(f);return p instanceof Qn&&qA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(S){return new eh(Si(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Wh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Zc(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Zc(g,p)}(n.endAt)),$V(e,s,o,i,a,"F",u,c)}function I4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Si(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Si(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Si(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Si(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(Si(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>gR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function S4(t){return c4[t]}function T4(t){return h4[t]}function A4(t){return d4[t]}function Ii(t){return{fieldPath:t.canonicalString()}}function Si(t){return ct.fromServerFormat(t.fieldPath)}function yR(t){return t instanceof Ye?function(n){if(n.op==="=="){if(E0(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E0(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:Ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ii(n.field),op:T4(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const r=n.getFilters().map(s=>yR(s));return r.length===1?r[0]:{compositeFilter:{op:A4(n.op),filters:r}}}(t):ne(54877,{filter:t})}function R4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _R(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.yt=e}}function k4(t){const e=E4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.Cn=new b4}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(is.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class b4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wR=41943040;class Dt{static withCacheSize(e){return new Dt(e,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.DEFAULT_COLLECTION_PERCENTILE=10,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dt.DEFAULT=new Dt(wR,Dt.DEFAULT_COLLECTION_PERCENTILE,Dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dt.DISABLED=new Dt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="LruGarbageCollector",P4=1048576;function V0([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class N4{constructor(e){this.Ir=e,this.buffer=new Ze(V0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(M0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){So(n)?H(M0,"Ignoring IndexedDB error during garbage collection: ",n):await Io(n)}await this.Vr(3e5)})}}class D4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(zh.ce);const r=new N4(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(L0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),vi()<=fe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function L4(t,e){return new D4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&La(r.mutation,s,wn.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=Ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=pa();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=vr();const o=Da(),a=function(){return Da()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof li)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),La(h.mutation,c,h.mutation.getFieldMask(),Ce.now())):o.set(c.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new V4(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Da();let s=new Le((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||wn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||me()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=eR();h.forEach(p=>{if(!i.has(p)){const g=oR(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Ms());let a=al,u=i;return o.next(c=>$.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,me())).next(h=>({batchId:a,changes:ZA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=pa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=pa();return this.indexManager.getCollectionParents(e,i).next(a=>$.forEach(a,u=>{const c=function(f,p){return new qh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,It.newInvalidDocument(h)))});let a=pa();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&La(h.mutation,c,wn.empty(),Ce.now()),Gh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Wn(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:k4(s.bundledQuery),readTime:Wn(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new Le(Z.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ms();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Ms(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ms(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ms(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return $.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new s4(n,r));let i=this.qr.get(n);i===void 0&&(i=me(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.Qr=new Ze(nt.$r),this.Ur=new Ze(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Ne([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Ne([])),r=new nt(n,e),s=new nt(n,e+1);let i=me();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r4(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ny:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(pe);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new nt(new Z(i),0);let a=new Ze(pe);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Yr)),!0)},o),$.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.ri=e,this.docs=function(){return new Le(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():It.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=vr();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yV(gV(h),r)<=0||(s.has(h.key)||Gh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new W4(this)}getSize(e){return $.resolve(this.size)}}class W4 extends M4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.persistence=e,this.si=new ai(n=>iy(n),oy),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new dy,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.ui={},this.overlays={},this.ci=new zh(0),this.li=!1,this.li=!0,this.hi=new j4,this.referenceDelegate=e(this),this.Pi=new H4(this),this.indexManager=new x4,this.remoteDocumentCache=function(s){return new z4(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new C4(n),this.Ii=new $4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new B4(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new q4(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class q4 extends wV{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Ri=new dy,this.Vi=null}static mi(e){return new fy(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sh{constructor(e,n){this.persistence=e,this.pi=new ai(r=>IV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=L4(this,n)}static mi(e,n){return new sh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nc(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new py(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return AO()?8:vV(Tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new K4;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(vi()<=fe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ei(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(vi()<=fe.DEBUG&&H("QueryEngine","Query:",Ei(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(vi()<=fe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ei(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):$.resolve())}ys(e,n){if(A0(n))return $.resolve(null);let r=zn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rm(n,null,"F"),r=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,rm(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,s){return A0(n)||s.isEqual(oe.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(vi()<=fe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ei(n)),this.vs(e,o,n,mV(s,al)).next(a=>a))})}Ds(e,n){let r=new Ze(XA(e));return n.forEach((s,i)=>{Gh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return vi()<=fe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ei(n)),this.ps.getDocumentsMatchingQuery(e,n,is.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LocalStore",Q4=3e8;class Y4{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Le(pe),this.xs=new ai(i=>iy(i),oy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function X4(t,e,n,r){return new Y4(t,e,n,r)}async function ER(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=me();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function J4(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,p=f.keys();let g=$.resolve();return p.forEach(S=>{g=g.next(()=>h.getEntry(u,S)).next(T=>{const k=c.docVersions.get(S);we(k!==null,48541),T.version.compareTo(k)<0&&(f.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function IR(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Z4(t,e){const n=le(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(T,k,E){return T.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=Q4?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))});let u=vr(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(eF(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(oe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=s,i))}function eF(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=vr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):H(my,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:s}})}function tF(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ny),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nF(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function lm(t,e,n){const r=le(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!So(o))throw o;H(my,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function F0(t,e,n){const r=le(t);let s=oe.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=le(u),p=f.xs.get(h);return p!==void 0?$.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)}(r,o,zn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:me())).next(a=>(rF(r,BV(e),a),{documents:a,Qs:i})))}function rF(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class $0{constructor(){this.activeTargetIds=GV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sF{constructor(){this.Mo=new $0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="ConnectivityMonitor";class j0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(U0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(U0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function um(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="RestConnection",oF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Xc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=um(),a=this.zo(e,n.toUriEncodedString());H(wf,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:c}=new URL(a),h=_o(c);return this.Jo(e,a,u,r,h).then(f=>(H(wf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw no(wf,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=oF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class uF extends aF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=um();return new Promise((a,u)=>{const c=new RA;c.setWithCredentials(!0),c.listenOnce(CA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case tc.NO_ERROR:const f=c.getResponseJson();H(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case tc.TIMEOUT:H(wt,`RPC '${e}' ${o} timed out`),u(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const p=c.getStatus();if(H(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const T=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(S.status);u(new Y(T,S.message))}else u(new Y(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(wt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=um(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bA(),a=xA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");H(wt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let p=!1,g=!1;const S=new lF({Yo:k=>{g?H(wt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(p||(H(wt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(wt,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Zo:()=>f.close()}),T=(k,E,y)=>{k.listen(E,v=>{try{y(v)}catch(b){setTimeout(()=>{throw b},0)}})};return T(f,fa.EventType.OPEN,()=>{g||(H(wt,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),T(f,fa.EventType.CLOSE,()=>{g||(g=!0,H(wt,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(f))}),T(f,fa.EventType.ERROR,k=>{g||(g=!0,no(wt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),S.a_(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),T(f,fa.EventType.MESSAGE,k=>{var E;if(!g){const y=k.data[0];we(!!y,16349);const v=y,b=(v==null?void 0:v.error)||((E=v[0])==null?void 0:E.error);if(b){H(wt,`RPC '${e}' stream ${s} received error:`,b);const M=b.status;let F=function(A){const C=je[A];if(C!==void 0)return uR(C)}(M),_=b.message;F===void 0&&(F=U.INTERNAL,_="Unknown error status: "+M+" with message "+b.message),g=!0,S.a_(new Y(F,_)),f.close()}else H(wt,`RPC '${e}' stream ${s} received:`,y),S.u_(y)}}),T(a,kA.STAT_EVENT,k=>{k.stat===Xp.PROXY?H(wt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Xp.NOPROXY&&H(wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){return new f4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="PersistentStream";class TR{constructor(e,n,r,s,i,o,a,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(B0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(B0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cF extends TR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g4(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Wn(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=am(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=nm(u)?{documents:w4(i,u)}:{query:v4(i,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dR(i,o.resumeToken);const c=sm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=rh(i,o.snapshotVersion.toTimestamp());const c=sm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=I4(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=am(this.serializer),n.removeTarget=e,this.q_(n)}}class hF extends TR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_4(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=am(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>y4(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{}class fF extends dF{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,im(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,im(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="RemoteStore";class mF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ui(this)&&(H(Js,"Restarting streams for network reachability change."),await async function(u){const c=le(u);c.Ea.add(4),await Dl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Zh(c)}(this))})}),this.Ra=new pF(r,s)}}async function Zh(t){if(ui(t))for(const e of t.da)await e(!0)}async function Dl(t){for(const e of t.da)await e(!1)}function AR(t,e){const n=le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wy(n)?_y(n):To(n).O_()&&yy(n,e))}function gy(t,e){const n=le(t),r=To(n);n.Ia.delete(e),r.O_()&&RR(n,e),n.Ia.size===0&&(r.O_()?r.L_():ui(n)&&n.Ra.set("Unknown"))}function yy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).Y_(e)}function RR(t,e){t.Va.Ue(e),To(t).Z_(e)}function _y(t){t.Va=new u4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),To(t).start(),t.Ra.ua()}function wy(t){return ui(t)&&!To(t).x_()&&t.Ia.size>0}function ui(t){return le(t).Ea.size===0}function CR(t){t.Va=void 0}async function gF(t){t.Ra.set("Online")}async function yF(t){t.Ia.forEach((e,n)=>{yy(t,e)})}async function _F(t,e){CR(t),wy(t)?(t.Ra.ha(e),_y(t)):t.Ra.set("Unknown")}async function wF(t,e,n){if(t.Ra.set("Online"),e instanceof hR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ih(t,r)}else if(e instanceof ic?t.Va.Ze(e):e instanceof cR?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await IR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),RR(i,u);const f=new zr(h.target,u,c,h.sequenceNumber);yy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Js,"Failed to raise snapshot:",r),await ih(t,r)}}async function ih(t,e,n){if(!So(e))throw e;t.Ea.add(1),await Dl(t),t.Ra.set("Offline"),n||(n=()=>IR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Js,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zh(t)})}function kR(t,e){return e().catch(n=>ih(t,n,e))}async function ed(t){const e=le(t),n=us(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ny;for(;vF(e);)try{const s=await tF(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,EF(e,s)}catch(s){await ih(e,s)}xR(e)&&bR(e)}function vF(t){return ui(t)&&t.Ta.length<10}function EF(t,e){t.Ta.push(e);const n=us(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xR(t){return ui(t)&&!us(t).x_()&&t.Ta.length>0}function bR(t){us(t).start()}async function IF(t){us(t).ra()}async function SF(t){const e=us(t);for(const n of t.Ta)e.ea(n.mutations)}async function TF(t,e,n){const r=t.Ta.shift(),s=uy.from(r,e,n);await kR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ed(t)}async function AF(t,e){e&&us(t).X_&&await async function(r,s){if(function(o){return o4(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();us(r).B_(),await kR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ed(r)}}(t,e),xR(t)&&bR(t)}async function z0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),H(Js,"RemoteStore received new credentials");const r=ui(n);n.Ea.add(3),await Dl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zh(n)}async function RF(t,e){const n=le(t);e?(n.Ea.delete(2),await Zh(n)):e||(n.Ea.add(2),await Dl(n),n.Ra.set("Unknown"))}function To(t){return t.ma||(t.ma=function(n,r,s){const i=le(n);return i.sa(),new cF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:gF.bind(null,t),t_:yF.bind(null,t),r_:_F.bind(null,t),H_:wF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),wy(t)?_y(t):t.Ra.set("Unknown")):(await t.ma.stop(),CR(t))})),t.ma}function us(t){return t.fa||(t.fa=function(n,r,s){const i=le(n);return i.sa(),new hF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IF.bind(null,t),r_:AF.bind(null,t),ta:SF.bind(null,t),na:TF.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ed(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Js,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new vy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ey(t,e){if(wr("AsyncQueue",`${e}: ${t}`),So(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{static emptySet(e){return new Gi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=pa(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new Le(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ao(e,n,Gi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kF{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=H0(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function H0(){return new ai(t=>YA(t),Kh)}async function xF(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new CF,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ey(o,`Initialization of query '${Ei(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Iy(n)}async function bF(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PF(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Iy(n)}function NF(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Iy(t){t.Ca.forEach(e=>{e.next()})}var cm,q0;(q0=cm||(cm={})).Ma="default",q0.Cache="cache";class OF{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.key=e}}class NR{constructor(e){this.key=e}}class DF{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=XA(e),this.tu=new Gi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new W0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Gh(this.query,f)?f:null,S=!!p&&this.mutatedKeys.has(p.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;p&&g?p.data.isEqual(g.data)?S!==T&&(r.track({type:3,doc:g}),k=!0):this.su(p,g)||(r.track({type:2,doc:g}),k=!0,(u&&this.eu(g,u)>0||c&&this.eu(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),k=!0):p&&!g&&(r.track({type:1,doc:p}),k=!0,(u||c)&&(a=!0)),k&&(g?(o=o.add(g),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,S){const T=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:k})}};return T(g)-T(S)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new ao(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new NR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new PR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sy="SyncEngine";class LF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MF{constructor(e){this.key=e,this.hu=!1}}class VF{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ai(a=>YA(a),Kh),this.Iu=new Map,this.Eu=new Set,this.du=new Le(Z.comparator),this.Au=new Map,this.Ru=new dy,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FF(t,e,n=!0){const r=FR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await OR(r,e,n,!0),s}async function $F(t,e){const n=FR(t);await OR(n,e,!0,!1)}async function OR(t,e,n,r){const s=await nF(t.localStore,zn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await UF(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&AR(t.remoteStore,s),a}async function UF(t,e,n,r,s){t.pu=(f,p,g)=>async function(T,k,E,y){let v=k.view.ru(E);v.Cs&&(v=await F0(T.localStore,k.query,!1).then(({documents:_})=>k.view.ru(_,v)));const b=y&&y.targetChanges.get(k.targetId),M=y&&y.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(v,T.isPrimaryClient,b,M);return G0(T,k.targetId,F.au),F.snapshot}(t,f,p,g);const i=await F0(t.localStore,e,!0),o=new DF(e,i.Qs),a=o.ru(i.documents),u=Ol.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);G0(t,n,c.au);const h=new LF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function jF(t,e,n){const r=le(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Kh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gy(r.remoteStore,s.targetId),hm(r,s.targetId)}).catch(Io)):(hm(r,s.targetId),await lm(r.localStore,s.targetId,!0))}async function BF(t,e){const n=le(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gy(n.remoteStore,r.targetId))}async function zF(t,e,n){const r=YF(t);try{const s=await function(o,a){const u=le(o),c=Ce.now(),h=a.reduce((g,S)=>g.add(S.key),me());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let S=vr(),T=me();return u.Ns.getEntries(g,h).next(k=>{S=k,S.forEach((E,y)=>{y.isValidDocument()||(T=T.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,S)).next(k=>{f=k;const E=[];for(const y of a){const v=t4(y,f.get(y.key).overlayedDocument);v!=null&&E.push(new li(y.key,v,zA(v.value.mapValue),cr.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,E,a)}).next(k=>{p=k;const E=k.applyToLocalDocumentSet(f,T);return u.documentOverlayCache.saveOverlays(g,k.batchId,E)})}).then(()=>({batchId:p.batchId,changes:ZA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Le(pe)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ll(r,s.changes),await ed(r.remoteStore)}catch(s){const i=Ey(s,"Failed to persist write");n.reject(i)}}async function DR(t,e){const n=le(t);try{const r=await Z4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?we(o.hu,14607):s.removedDocuments.size>0&&(we(o.hu,42227),o.hu=!1))}),await Ll(n,r,e)}catch(r){await Io(r)}}function K0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)}),c&&Iy(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WF(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Le(Z.comparator);o=o.insert(i,It.newNoDocument(i,oe.min()));const a=me().add(i),u=new Xh(oe.min(),new Map,new Le(pe),o,a);await DR(r,u),r.du=r.du.remove(i),r.Au.delete(e),Ty(r)}else await lm(r.localStore,e,!1).then(()=>hm(r,e,n)).catch(Io)}async function HF(t,e){const n=le(t),r=e.batch.batchId;try{const s=await J4(n.localStore,e);MR(n,r,null),LR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ll(n,s)}catch(s){await Io(s)}}async function qF(t,e,n){const r=le(t);try{const s=await function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(we(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);MR(r,e,n),LR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ll(r,s)}catch(s){await Io(s)}}function LR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function MR(t,e,n){const r=le(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function hm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VR(t,r)})}function VR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(gy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ty(t))}function G0(t,e,n){for(const r of n)r instanceof PR?(t.Ru.addReference(r.key,e),KF(t,r)):r instanceof NR?(H(Sy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VR(t,r.key)):ne(19791,{wu:r})}function KF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(Sy,"New document in limbo: "+n),t.Eu.add(r),Ty(t))}function Ty(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new MF(n)),t.du=t.du.insert(n,r),AR(t.remoteStore,new zr(zn(ay(n.path)),r,"TargetPurposeLimboResolution",zh.ce))}}async function Ll(t,e,n){const r=le(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=py.As(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,c){const h=le(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(c,p=>$.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>$.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!So(f))throw f;H(my,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),S=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,T)}}}(r.localStore,i))}async function GF(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){H(Sy,"User change. New user:",e.toKey());const r=await ER(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(u=>{u.reject(new Y(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ll(n,r.Ls)}}function QF(t,e){const n=le(t),r=n.Au.get(e);if(r&&r.hu)return me().add(r.key);{let s=me();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function FR(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WF.bind(null,e),e.Pu.H_=PF.bind(null,e.eventManager),e.Pu.yu=NF.bind(null,e.eventManager),e}function YF(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qF.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return X4(this.persistence,new G4,e.initialUser,this.serializer)}Cu(e){return new vR(fy.mi,this.serializer)}Du(e){return new sF}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class XF extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){we(this.persistence.referenceDelegate instanceof sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new O4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dt.withCacheSize(this.cacheSizeBytes):Dt.DEFAULT;return new vR(r=>sh.mi(r,n),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GF.bind(null,this.syncEngine),await RF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kF}()}createDatastore(e){const n=Jh(e.databaseInfo.databaseId),r=function(i){return new uF(i)}(e.databaseInfo);return function(i,o,a,u){return new fF(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new mF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>K0(this.syncEngine,n,0),function(){return j0.v()?new j0:new iF}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const f=new VF(s,i,o,a,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);H(Js,"RemoteStore shutting down."),i.Ea.add(5),await Dl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class ZF{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(cs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(cs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ey(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ef(t,e){t.asyncQueue.verifyOperationInProgress(),H(cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ER(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Q0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await e3(t);H(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>z0(e.remoteStore,s)),t._onlineComponents=e}async function e3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(cs,"Using user provided OfflineComponentProvider");try{await Ef(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),await Ef(t,new oh)}}else H(cs,"Using default OfflineComponentProvider"),await Ef(t,new XF(void 0));return t._offlineComponents}async function $R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(cs,"Using user provided OnlineComponentProvider"),await Q0(t,t._uninitializedComponentsProvider._online)):(H(cs,"Using default OnlineComponentProvider"),await Q0(t,new dm))),t._onlineComponents}function t3(t){return $R(t).then(e=>e.syncEngine)}async function n3(t){const e=await $R(t),n=e.eventManager;return n.onListen=FF.bind(null,e.syncEngine),n.onUnlisten=jF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$F.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BF.bind(null,e.syncEngine),n}function r3(t,e,n={}){const r=new ts;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new JF({next:p=>{h.Nu(),o.enqueueAndForget(()=>bF(i,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new OF(ay(a.path),h,{includeMetadataChanges:!0,qa:!0});return xF(i,f)}(await n3(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firestore.googleapis.com",X0=!0;class J0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jR,this.ssl=X0}else this.host=e.host,this.ssl=e.ssl??X0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P4)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rV;switch(r.type){case"firstParty":return new aV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Y0.get(n);r&&(H("ComponentProvider","Removing Datastore"),Y0.delete(n),r.terminate())}(this),Promise.resolve()}}function s3(t,e,n,r={}){var c;t=ol(t,Ay);const s=_o(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(D1(`https://${a}`),L1("Firestore",!0)),i.host!==jR&&i.host!==a&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:s,emulatorOptions:r};if(!ss(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=vt.MOCK_USER;else{h=yO(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vt(p)}t._authCredentials=new sV(new NA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ry(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Pl(n,st._jsonSchema))return new st(e,r||null,new Z(Ne.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:ze("string",st._jsonSchemaVersion),referencePath:ze("string")};class fl extends Ry{constructor(e,n,r){super(e,n,ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new Z(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function pl(t,e,...n){if(t=At(t),arguments.length===1&&(e=ey.newId()),fV("doc","path",e),t instanceof Ay){const r=Ne.fromString(e,...n);return d0(r),new st(t,null,new Z(r))}{if(!(t instanceof st||t instanceof fl))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return d0(r),new st(t.firestore,t instanceof fl?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="AsyncQueue";class eE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SR(this,"async_queue_retry"),this._c=()=>{const r=vf();r&&H(Z0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ts;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!So(e))throw e;H(Z0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",tE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=vy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:tE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function tE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cy extends Ay{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new eE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eE(e),this._firestoreClient=void 0,await e}}}function BR(t,e){const n=typeof t=="object"?t:Bg(),r=typeof t=="string"?t:Xc,s=si(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mO("firestore");i&&s3(s,...i)}return s}function zR(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i3(t),t._firestoreClient}function i3(t){var r,s,i;const e=t._freezeSettings(),n=function(a,u,c,h){return new AV(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(pt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pl(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:ze("string",on._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hn._jsonSchemaVersion}}static fromJSON(e){if(Pl(e,Hn._jsonSchema))return new Hn(e.latitude,e.longitude)}}Hn._jsonSchemaVersion="firestore/geoPoint/1.0",Hn._jsonSchema={type:ze("string",Hn._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pl(e,qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qn(e.vectorValues);throw new Y(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qn._jsonSchemaVersion="firestore/vectorValue/1.0",qn._jsonSchema={type:ze("string",qn._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=/^__.*__$/;class a3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nl(e,this.data,n,this.fieldTransforms)}}function HR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class xy{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HR(this.Ac)&&o3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class l3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jh(e)}Cc(e,n,r,s=!1){return new xy({Ac:e,methodName:n,Dc:r,path:ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u3(t){const e=t._freezeSettings(),n=Jh(t._databaseId);return new l3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c3(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);QR("Data must be an object, but it was:",o,r);const a=KR(r,o);let u,c;if(i.merge)u=new wn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=h3(e,f,n);if(!o.contains(p))throw new Y(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);f3(h,p)||h.push(p)}u=new wn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new a3(new sn(a),u,c)}function qR(t,e){if(GR(t=At(t)))return QR("Unsupported field value:",e,t),KR(t,e);if(t instanceof WR)return function(r,s){if(!HR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=qR(a,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:rh(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rh(s.serializer,i)}}if(r instanceof Hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof on)return{bytesValue:dR(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qn)return function(o,a){return{mapValue:{fields:{[jA]:{stringValue:BA},[Jc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return ly(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ty(r)}`)}(t,e)}function KR(t,e){const n={};return LA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(t,(r,s)=>{const i=qR(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Hn||t instanceof on||t instanceof st||t instanceof WR||t instanceof qn)}function QR(t,e,n){if(!GR(n)||!OA(n)){const r=ty(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function h3(t,e,n){if((e=At(e))instanceof ky)return e._internalPath;if(typeof e=="string")return YR(t,e);throw ah("Field path arguments must be of type string or ",t,!1,void 0,n)}const d3=new RegExp("[~\\*/\\[\\]]");function YR(t,e,n){if(e.search(d3)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ky(...e.split("."))._internalPath}catch{throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ah(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Y(U.INVALID_ARGUMENT,a+t+u)}function f3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class p3 extends XR{data(){return super.data()}}function JR(t,e){return typeof e=="string"?YR(t,e):e instanceof ky?e._internalPath:e._delegate._internalPath}class m3{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Jc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$e(o.doubleValue));return new qn(n)}convertGeoPoint(e){return new Hn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=os(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);we(_R(r),9688,{name:e});const s=new ul(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||wr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ga{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends XR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(JR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:ze("string",js._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class oc extends js{data(e={}){return super.data(e)}}class Ma{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ga(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oc(this._firestore,this._userDataWriter,r.key,r,new ga(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ga(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:y3(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function y3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){t=ol(t,st);const e=ol(t.firestore,Cy);return r3(zR(e),t._key).then(n=>v3(e,t,n))}Ma._jsonSchemaVersion="firestore/querySnapshot/1.0",Ma._jsonSchema={type:ze("string",Ma._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class _3 extends m3{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function by(t,e,n){t=ol(t,st);const r=ol(t.firestore,Cy),s=g3(t.converter,e,n);return w3(r,[c3(u3(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cr.none())])}function w3(t,e){return function(r,s){const i=new ts;return r.asyncQueue.enqueueAndForget(async()=>zF(await t3(r),s,i)),i.promise}(zR(t),e)}function v3(t,e,n){const r=n.docs.get(e._key),s=new _3(t);return new js(t,s,e._key,r,new ga(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Eo=s})(wo),Kn(new Tn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Cy(new iV(r.getProvider("auth-internal")),new lV(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(c.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cn(l0,u0,e),cn(l0,u0,"esm2020")})();var E3="firebase",I3="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(E3,I3,"app");const eC="@firebase/installations",Py="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1e4,nC=`w:${Py}`,rC="FIS_v2",S3="https://firebaseinstallations.googleapis.com/v1",T3=60*60*1e3,A3="installations",R3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zs=new ri(A3,R3,C3);function sC(t){return t instanceof kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC({projectId:t}){return`${S3}/projects/${t}/installations`}function oC(t){return{token:t.token,requestStatus:2,expiresIn:x3(t.expiresIn),creationTime:Date.now()}}async function aC(t,e){const r=(await e.json()).error;return Zs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k3(t,{refreshToken:e}){const n=lC(t);return n.append("Authorization",b3(e)),n}async function uC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function x3(t){return Number(t.replace("s","000"))}function b3(t){return`${rC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iC(t),s=lC(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:rC,appId:t.appId,sdkVersion:nC},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await uC(()=>fetch(r,a));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:oC(c.authToken)}}else throw await aC("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=/^[cdef][\w-]{21}$/,fm="";function D3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=L3(t);return O3.test(n)?n:fm}catch{return fm}}function L3(t){return N3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Map;function dC(t,e){const n=td(t);fC(n,e),M3(n,e)}function fC(t,e){const n=hC.get(t);if(n)for(const r of n)r(e)}function M3(t,e){const n=V3();n&&n.postMessage({key:t,fid:e}),F3()}let Vs=null;function V3(){return!Vs&&"BroadcastChannel"in self&&(Vs=new BroadcastChannel("[Firebase] FID Change"),Vs.onmessage=t=>{fC(t.data.key,t.data.fid)}),Vs}function F3(){hC.size===0&&Vs&&(Vs.close(),Vs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="firebase-installations-database",U3=1,ei="firebase-installations-store";let If=null;function Ny(){return If||(If=j1($3,U3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ei)}}})),If}async function lh(t,e){const n=td(t),s=(await Ny()).transaction(ei,"readwrite"),i=s.objectStore(ei),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&dC(t,e.fid),e}async function pC(t){const e=td(t),r=(await Ny()).transaction(ei,"readwrite");await r.objectStore(ei).delete(e),await r.done}async function nd(t,e){const n=td(t),s=(await Ny()).transaction(ei,"readwrite"),i=s.objectStore(ei),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&dC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(t){let e;const n=await nd(t.appConfig,r=>{const s=j3(r),i=B3(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function j3(t){const e=t||{fid:D3(),registrationStatus:0};return mC(e)}function B3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Zs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W3(t)}:{installationEntry:e}}async function z3(t,e){try{const n=await P3(t,e);return lh(t.appConfig,n)}catch(n){throw sC(n)&&n.customData.serverCode===409?await pC(t.appConfig):await lh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function W3(t){let e=await nE(t.appConfig);for(;e.registrationStatus===1;)await cC(100),e=await nE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Oy(t);return r||n}return e}function nE(t){return nd(t,e=>{if(!e)throw Zs.create("installation-not-found");return mC(e)})}function mC(t){return H3(t)?{fid:t.fid,registrationStatus:0}:t}function H3(t){return t.registrationStatus===1&&t.registrationTime+tC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3({appConfig:t,heartbeatServiceProvider:e},n){const r=K3(t,n),s=k3(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:nC,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await uC(()=>fetch(r,a));if(u.ok){const c=await u.json();return oC(c)}else throw await aC("Generate Auth Token",u)}function K3(t,{fid:e}){return`${iC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(t,e=!1){let n;const r=await nd(t.appConfig,i=>{if(!gC(i))throw Zs.create("not-registered");const o=i.authToken;if(!e&&Y3(o))return i;if(o.requestStatus===1)return n=G3(t,e),i;{if(!navigator.onLine)throw Zs.create("app-offline");const a=J3(i);return n=Q3(t,a),a}});return n?await n:r.authToken}async function G3(t,e){let n=await rE(t.appConfig);for(;n.authToken.requestStatus===1;)await cC(100),n=await rE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Dy(t,e):r}function rE(t){return nd(t,e=>{if(!gC(e))throw Zs.create("not-registered");const n=e.authToken;return Z3(n)?{...e,authToken:{requestStatus:0}}:e})}async function Q3(t,e){try{const n=await q3(t,e),r={...e,authToken:n};return await lh(t.appConfig,r),n}catch(n){if(sC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await pC(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await lh(t.appConfig,r)}throw n}}function gC(t){return t!==void 0&&t.registrationStatus===2}function Y3(t){return t.requestStatus===2&&!X3(t)}function X3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T3}function J3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Z3(t){return t.requestStatus===1&&t.requestTime+tC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t){const e=t,{installationEntry:n,registrationPromise:r}=await Oy(e);return r?r.catch(console.error):Dy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e=!1){const n=t;return await n6(n),(await Dy(n,e)).token}async function n6(t){const{registrationPromise:e}=await Oy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){if(!t||!t.options)throw Sf("App Configuration");if(!t.name)throw Sf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Sf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Sf(t){return Zs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="installations",s6="installations-internal",i6=t=>{const e=t.getProvider("app").getImmediate(),n=r6(e),r=si(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},o6=t=>{const e=t.getProvider("app").getImmediate(),n=si(e,yC).getImmediate();return{getId:()=>e6(n),getToken:s=>t6(n,s)}};function a6(){Kn(new Tn(yC,i6,"PUBLIC")),Kn(new Tn(s6,o6,"PRIVATE"))}a6();cn(eC,Py);cn(eC,Py,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="analytics",l6="firebase_id",u6="origin",c6=60*1e3,h6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ly="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new ri("analytics","Analytics",d6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t){if(!t.startsWith(Ly)){const e=Xt.create("invalid-gtag-resource",{gtagURL:t});return jt.warn(e.message),""}return t}function _C(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function p6(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function m6(t,e){const n=p6("firebase-js-sdk-policy",{createScriptURL:f6}),r=document.createElement("script"),s=`${Ly}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function g6(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function y6(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await _C(n)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(a){jt.error(a)}t("config",s,i)}async function _6(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await _C(n);for(const u of o){const c=a.find(f=>f.measurementId===u),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){jt.error(i)}}function w6(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,u]=o;await _6(t,e,n,a,u)}else if(i==="config"){const[a,u]=o;await y6(t,e,n,r,a,u)}else if(i==="consent"){const[a,u]=o;t("consent",a,u)}else if(i==="get"){const[a,u,c]=o;t("get",a,u,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){jt.error(a)}}return s}function v6(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=w6(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function E6(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ly)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=30,S6=1e3;class T6{constructor(e={},n=S6){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wC=new T6;function A6(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function R6(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:A6(n)},s=h6.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(a=u.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function C6(t,e=wC,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Xt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Xt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new b6;return setTimeout(async()=>{a.abort()},c6),vC({appId:r,apiKey:s,measurementId:i},o,a,e)}async function vC(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=wC){var a;const{appId:i,measurementId:o}=t;try{await k6(r,e)}catch(u){if(o)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await R6(t);return s.deleteThrottleMetadata(i),u}catch(u){const c=u;if(!x6(c)){if(s.deleteThrottleMetadata(i),o)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw u}const h=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?Ov(n,s.intervalMillis,I6):Ov(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),jt.debug(`Calling attemptFetch again in ${h} millis`),vC(t,f,r,s)}}function k6(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function x6(t){if(!(t instanceof kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class b6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function P6(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(){if(V1())try{await F1()}catch(t){return jt.warn(Xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return jt.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function O6(t,e,n,r,s,i,o){const a=C6(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>jt.error(p)),e.push(a);const u=N6().then(p=>{if(p)return r.getId()}),[c,h]=await Promise.all([a,u]);E6(i)||m6(i,c.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[u6]="firebase",f.update=!0,h!=null&&(f[l6]=h),s("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.app=e}_delete(){return delete Va[this.app.options.appId],Promise.resolve()}}let Va={},sE=[];const iE={};let Tf="dataLayer",L6="gtag",oE,EC,aE=!1;function M6(){const t=[];if(M1()&&t.push("This is a browser extension environment."),RO()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Xt.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function V6(t,e,n){M6();const r=t.options.appId;if(!r)throw Xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(Va[r]!=null)throw Xt.create("already-exists",{id:r});if(!aE){g6(Tf);const{wrappedGtag:i,gtagCore:o}=v6(Va,sE,iE,Tf,L6);EC=i,oE=o,aE=!0}return Va[r]=O6(t,sE,iE,e,oE,Tf,n),new D6(t)}function F6(t=Bg()){t=At(t);const e=si(t,uh);return e.isInitialized()?e.getImmediate():$6(t)}function $6(t,e={}){const n=si(t,uh);if(n.isInitialized()){const s=n.getImmediate();if(ss(e,n.getOptions()))return s;throw Xt.create("already-initialized")}return n.initialize({options:e})}function U6(t,e,n,r){t=At(t),P6(EC,Va[t.app.options.appId],e,n,r).catch(s=>jt.error(s))}const lE="@firebase/analytics",uE="0.10.18";function j6(){Kn(new Tn(uh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return V6(r,s,n)},"PUBLIC")),Kn(new Tn("analytics-internal",t,"PRIVATE")),cn(lE,uE),cn(lE,uE,"esm2020");function t(e){try{const n=e.getProvider(uh).getImmediate();return{logEvent:(r,s,i)=>U6(n,r,s,i)}}catch(n){throw Xt.create("interop-component-reg-failed",{reason:n})}}}j6();const B6={apiKey:"AIzaSyBKX0eIL-ja9zHCsgi_UwlD8JlByY96UB8",authDomain:"astrophoenix2-3b620.firebaseapp.com",projectId:"astrophoenix2-3b620",storageBucket:"astrophoenix2-3b620.firebasestorage.app",messagingSenderId:"335448449685",appId:"1:335448449685:web:fe31fc84f0313fa075319c",measurementId:"G-C9M23TNWHD"},My=jg(B6);F6(My);const bs=Ys(My),ch=BR(My);pA(bs,Yg).then(()=>{console.log(" Firebase auth persistence set to local")}).catch(t=>console.error("Persistence error:",t));pA(bs,Yg);const IC=O.createContext(void 0),Cu="astrophoenix_saved";function z6({children:t}){const[e,n]=O.useState([]),[r,s]=O.useState(""),[i,o]=O.useState(10),[a,u]=O.useState([]);O.useEffect(()=>{try{const p=localStorage.getItem(Cu);p&&u(JSON.parse(p))}catch{}},[]),O.useEffect(()=>{const p=Qg(Ys(),async g=>{if(g)try{const S=pl(ch,"users",g.uid),T=await ZR(S);if(T.exists()){const k=T.data();k&&Array.isArray(k.saved)&&u(E=>{const y=k.saved,v=new Map;y.forEach(M=>v.set(M.id,M)),E.forEach(M=>{v.has(M.id)||v.set(M.id,M)});const b=Array.from(v.values());try{localStorage.setItem(Cu,JSON.stringify(b))}catch{}return b})}}catch(S){console.warn("Failed to load saved from server",S)}});return()=>p()},[]),O.useEffect(()=>{try{localStorage.setItem(Cu,JSON.stringify(a))}catch{}},[a]);const c=O.useCallback((p,g,S)=>{n(p),typeof g=="string"&&s(g),typeof S=="number"&&o(S)},[]),h=O.useCallback(p=>{u(g=>{const T=g.find(k=>k.id===p.id)?g.filter(k=>k.id!==p.id):[p,...g];try{localStorage.setItem(Cu,JSON.stringify(T))}catch{}return(async()=>{try{const k=Ys().currentUser;if(!k)return;const E=pl(ch,"users",k.uid);await by(E,{saved:T},{merge:!0})}catch{}})(),T})},[]),f={lastResults:e,query:r,pageSize:i,setLastResults:c,saved:a,toggleSaved:h};return N.jsx(IC.Provider,{value:f,children:t})}function rd(){const t=O.useContext(IC);if(!t)throw new Error("useResults must be used within ResultsProvider");return t}function W6(t){try{return decodeURIComponent(t).replace(/\.txt$/i,"").replace(/[-_]/g," ")}catch{return t.replace(/\.txt$/i,"")}}function H6(){const[t,e]=O.useState(null),[n,r]=O.useState(null),[s,i]=O.useState(""),[o,a]=O.useState({});O.useEffect(()=>{let g=!1;async function S(){try{const T=await fetch(kS);if(!T.ok)throw new Error(`Failed to load manifest: ${T.status}`);const k=await T.json();if(g)return;e(k.slice()),k.forEach(E=>void u(E))}catch(T){if(g)return;r(String((T==null?void 0:T.message)||T))}}return S(),()=>{g=!0}},[]);async function u(g){const S=g.replace(/\.txt$/i,"");try{const T=rr+encodeURIComponent(S+".json"),k=await fetch(T);if(k.ok){const E=await k.json(),y=Array.isArray(E.authors)?E.authors.join(", "):E.authors||E.author;let v=E.year||E.published||E.date;if(v&&typeof v=="string"){const M=v.match(/(19|20)\d{2}/);v=M?M[0]:v}const b=E.summary||E.abstract||void 0;a(M=>({...M||{},[g]:{authors:y,year:v,summary:b}}));return}}catch{}try{const T=rr+encodeURIComponent(g),k=await fetch(T);if(!k.ok)return;const y=(await k.text()).slice(0,1200),v=y.match(/^\s*(?:Authors?|Author)[:]\s*(.+)$/im),b=v?v[1].trim():void 0,M=y.match(/(19|20)\d{2}/),F=M?M[0]:void 0,_=rr+"summaries/"+encodeURIComponent(g),w=await fetch(_);if(!w.ok)return;const A=await w.text();(b||F||A)&&a(C=>({...C||{},[g]:{authors:b,year:F,summary:A}}))}catch{}}const c=O.useMemo(()=>{if(!t)return[];const g=t.map(T=>({file:T,title:W6(T),meta:o[T]}));if(g.sort((T,k)=>T.title.localeCompare(k.title,void 0,{sensitivity:"base"})),!s)return g;const S=s.toLowerCase();return g.filter(T=>T.title.toLowerCase().includes(S))},[t,s,o]),h=go(),{saved:f,toggleSaved:p}=rd();return N.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"0 auto",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",background:"#000",color:"#fff"},children:[N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[N.jsx("h2",{style:{margin:0},children:"Explore"}),N.jsx("input",{value:s,onChange:g=>i(g.target.value),placeholder:"Filter titles...",style:{padding:"8px 10px",borderRadius:8,border:"1px solid #333",minWidth:220,background:"transparent",color:"#fff"}})]}),n&&N.jsx("div",{style:{color:"red"},children:n}),!t&&!n&&N.jsx("div",{children:"Loading papers"}),t&&N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:c.map(g=>{var E,y,v,b,M,F,_;const S=g.file.replace(/\.txt$/i,""),T=f.find(w=>w.id===S),k=((E=g.meta)==null?void 0:E.summary)||"No summary available.";return N.jsxs("div",{onClick:()=>h(`/article/${encodeURIComponent(S)}`),role:"button",tabIndex:0,onKeyDown:w=>{w.key==="Enter"&&h(`/article/${encodeURIComponent(S)}`)},style:{position:"relative",padding:16,borderRadius:10,background:"#0b0b0b",border:"1px solid #151515",boxShadow:"0 1px 3px rgba(255,255,255,0.02)",cursor:"pointer",width:"100%"},children:[N.jsx("button",{onClick:w=>{w.stopPropagation();const A={id:S,title:g.title,excerpt:"",score:0,matches:0,content:"",url:rr+encodeURIComponent(g.file)};p(A)},"aria-label":T?"Unsave":"Save",title:T?"Unsave":"Save",style:{position:"absolute",right:8,top:8,padding:6,borderRadius:10,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:T?"rgba(133,99,246,0.18)":"#222",border:T?"1px solid rgba(133,99,246,0.45)":"1px solid #444",boxShadow:T?"0 0 14px rgba(133,99,246,0.35)":"none",backdropFilter:T?"blur(4px)":"none",transition:"all 0.18s ease"},children:N.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:N.jsx("path",{d:"M6 2C5.44772 2 5 2.44772 5 3V21.2929C5 21.6834 5.38604 21.8985 5.70711 21.7071L12 17.1213L18.2929 21.7071C18.6139 21.8985 19 21.6834 19 21.2929V3C19 2.44772 18.5523 2 18 2H6Z",fill:T?"rgba(133,99,246,0.35)":"transparent",stroke:T?"#8563f6":"#888",strokeWidth:"1.2"})})}),N.jsx("div",{style:{fontWeight:700,color:"#fff",paddingRight:44},children:g.title+"..."}),N.jsx("div",{style:{marginTop:8,fontSize:13,color:"#aaa",lineHeight:1.4},children:k}),N.jsx("div",{style:{marginTop:8,fontSize:12,color:"#ccc"},children:(y=g.meta)!=null&&y.authors||(v=g.meta)!=null&&v.year?N.jsxs(N.Fragment,{children:[((b=g.meta)==null?void 0:b.authors)&&N.jsx("span",{children:g.meta.authors}),((M=g.meta)==null?void 0:M.authors)&&((F=g.meta)==null?void 0:F.year)&&N.jsx("span",{children:"  "}),((_=g.meta)==null?void 0:_.year)&&N.jsx("span",{children:g.meta.year})]}):null})]},g.file)})})]})}const q6=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(!1),[o,a]=O.useState(""),[u,c]=O.useState("");O.useEffect(()=>{const f=Qg(bs,async p=>{if(!p){e(null),r(!1);return}try{const g=await ZR(pl(ch,"users",p.uid));if(g.exists()){const S=g.data();e({displayName:S.displayName||p.displayName||"Unnamed User",email:S.email||p.email||"",bio:S.bio||"",photoURL:S.photoURL||p.photoURL||""}),a(S.displayName||p.displayName||""),c(S.bio||"")}else e({displayName:p.displayName||"Unnamed User",email:p.email||"",bio:"",photoURL:p.photoURL||""}),a(p.displayName||""),c("")}catch(g){console.error("Error loading user data:",g)}finally{r(!1)}});return()=>f()},[]);const h=async()=>{if(!bs.currentUser)return alert("No user logged in");try{const f=pl(ch,"users",bs.currentUser.uid);await by(f,{displayName:o,bio:u},{merge:!0}),e(p=>{var g;return p?{...p,displayName:o,bio:u}:{displayName:o,email:((g=bs.currentUser)==null?void 0:g.email)||"",bio:u}}),i(!1),alert("Profile updated!")}catch(f){console.error("Error updating profile:",f),alert(`Failed to update profile: ${f.message}`)}};return n?N.jsx("div",{children:"Loading profile..."}):t?N.jsxs("div",{style:{maxWidth:450,margin:"2rem auto",padding:24,border:"1px solid #151515",borderRadius:8,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",background:"#0b0b0b",color:"#fff"},children:[t.photoURL&&N.jsx("img",{src:t.photoURL,alt:"Profile",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:16}}),s?N.jsxs(N.Fragment,{children:[N.jsx("h2",{children:"Edit Profile"}),N.jsxs("div",{style:{marginBottom:12,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("label",{children:N.jsx("strong",{children:"Display Name"})}),N.jsx("input",{type:"text",value:o,onChange:f=>a(f.target.value),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #222",marginTop:4,background:"#0b0b0b",color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"}})]}),N.jsxs("div",{style:{marginBottom:12},children:[N.jsx("label",{children:N.jsx("strong",{children:"Bio"})}),N.jsx("textarea",{value:u,onChange:f=>c(f.target.value),rows:4,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #222",marginTop:4,resize:"none",background:"#0b0b0b",color:"#fff"}})]}),N.jsx("button",{onClick:h,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#2e8b57",color:"white",cursor:"pointer",marginRight:8},children:"Save"}),N.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",borderRadius:8,border:"1px solid #333",background:"#0b0b0b",color:"#fff",cursor:"pointer"},children:"Cancel"})]}):N.jsxs(N.Fragment,{children:[N.jsx("h2",{style:{marginTop:0},children:t.displayName||"Unnamed User"}),N.jsxs("p",{children:[N.jsx("strong",{children:"Email:"})," ",t.email]}),t.bio&&N.jsxs("p",{children:[N.jsx("strong",{children:"Bio:"})," ",t.bio]}),N.jsxs("div",{style:{marginTop:16},children:[N.jsx("button",{onClick:()=>i(!0),style:{background:"rgba(255,255,255,0.05)",color:"#fde8ff",border:"1px solid rgba(255,255,255,0.12)",padding:"8px 12px",borderRadius:10,cursor:"pointer",marginRight:8,backdropFilter:"blur(6px)",boxShadow:"0 2px 10px rgba(0,0,0,0.35)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Edit Profile"}),N.jsx("button",{onClick:async()=>{try{await qL(bs),window.location.href="/"}catch(f){console.error("Error signing out:",f)}},style:{background:"rgba(229,57,53,0.18)",color:"#ffb4b2",border:"1px solid rgba(229,57,53,0.45)",padding:"8px 12px",borderRadius:10,cursor:"pointer",backdropFilter:"blur(6px)",boxShadow:"0 2px 12px rgba(229,57,53,0.25)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Logout"})]})]})]}):N.jsx("div",{children:"No user is signed in."})};function K6(){const{saved:t,toggleSaved:e}=rd(),n=go();return!t||t.length===0?N.jsxs("div",{style:{textAlign:"center",marginTop:40,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{children:"Saved"}),N.jsx("p",{children:"No saved articles yet. What will you explore? "}),N.jsx(yo,{to:"/",style:{display:"inline-block",marginTop:12,padding:"8px 14px",background:"rgba(133,99,246,0.18)",color:"#f5ecff",borderRadius:10,textDecoration:"none",border:"1px solid rgba(133,99,246,0.45)",boxShadow:"0 0 16px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)"},children:"Go search papers"})]}):N.jsxs("div",{style:{padding:20,maxWidth:900,margin:"0 auto",color:"#fff",background:"#000",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{children:"Saved"}),N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:t.map(r=>N.jsx("div",{role:"button",tabIndex:0,onClick:()=>n(`/article/${encodeURIComponent(r.id)}`),onKeyDown:s=>{s.key==="Enter"&&n(`/article/${encodeURIComponent(r.id)}`)},style:{padding:16,borderRadius:10,background:"#0b0b0b",border:"1px solid #151515",boxShadow:"0 1px 3px rgba(255,255,255,0.02)",cursor:"pointer",width:"100%"},children:N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[N.jsxs("div",{style:{flex:1},children:[N.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:r.title+"..."}),N.jsx("div",{style:{whiteSpace:"pre-wrap",marginTop:8,color:"#ccc"},children:r.content})]}),N.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:N.jsx("button",{onClick:s=>{s.stopPropagation(),e(r)},style:{background:"rgba(229,57,53,0.18)",border:"1px solid rgba(229,57,53,0.45)",color:"#ffb4b2",padding:"6px 12px",borderRadius:10,cursor:"pointer",boxShadow:"0 0 16px rgba(229,57,53,0.3)",backdropFilter:"blur(4px)",transition:"all 0.2s ease"},children:"Remove"})})]})},r.id))})]})}function Af(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xo(t){return t.replace(/[&<>\"]/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}})}function cE(t){return t.toLowerCase().split(/[^a-z0-9]+/g).filter(Boolean)}function hE(t,e){if(!e||!t)return Xo(t);const n=/^".+"$/.test(e)?e.slice(1,-1):e;let r=Xo(t);const s=Af(n);if(new RegExp(s,"ig").test(t)){r=Xo(t).replace(new RegExp(s,"ig"),c=>`<mark>${c}</mark>`);const u=cE(e).filter(c=>!n.toLowerCase().includes(c));if(u.length){const c=new RegExp("("+u.map(Af).join("|")+")","ig");r=r.replace(c,h=>`<mark>${h}</mark>`)}return r}const o=cE(e);if(o.length===0)return Xo(t);const a=new RegExp("("+o.map(Af).join("|")+")","ig");return r=Xo(t).replace(a,u=>`<mark>${u}</mark>`),r}function G6(){const t=Yn(),e=go(),{lastResults:n,query:r,pageSize:s,saved:i,toggleSaved:o}=rd(),a=t.state||{},u=a.results??n??[],c=a.query??r??"",[h,f]=O.useState(u),[p,g]=O.useState(1),[S,T]=O.useState(a.pageSize??s??10),[k,E]=O.useState(c),[y,v]=O.useState(c);async function b(_){const w=_.trim();if(v(w),!w){f(u),g(1);return}try{const C=new ar(u,{keys:[{name:"title",weight:.7},{name:"excerpt",weight:.3}],includeScore:!0,threshold:.45,ignoreLocation:!0,minMatchCharLength:2}).search(w,{limit:1e3}),R=[],P=C.map(x=>({...x.item}));_.includes("?")?(R.push({id:"AI",title:"AI Summary",excerpt:"AI Summary is only avaliable from the main search bar, go back to search!",score:0,matches:1,content:"",url:""}),f(R)):f(P),g(1)}catch{const C=w.toLowerCase(),R=u.filter(P=>P.title.toLowerCase().includes(C)||(P.excerpt||"").toLowerCase().includes(C));f(R),g(1)}}const M=Math.max(1,Math.ceil(h.length/S)),F=O.useMemo(()=>h.slice((p-1)*S,p*S),[h,p,S]);return N.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"0 auto",color:"#fff",background:"#000",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[N.jsx("h2",{style:{margin:0},children:"Results"}),N.jsxs("div",{children:[N.jsx("button",{onClick:()=>e(-1),style:{marginRight:8,background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Back"}),N.jsxs("label",{style:{fontSize:13,color:"#ccc"},children:["Page size:",N.jsx("select",{value:S,onChange:_=>{T(Number(_.target.value)),g(1)},style:{marginLeft:6,background:"#0b0b0b",color:"#fff",border:"1px solid #222",padding:"6px 8px",borderRadius:6},children:[5,10,20,50].map(_=>N.jsx("option",{value:_,children:_},_))})]})]})]}),N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[N.jsxs("div",{style:{color:"#ccc"},children:[h.length," result",h.length!==1?"s":""," ",y?N.jsxs(N.Fragment,{children:['for "',y,'"']}):null]}),N.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[N.jsx("input",{value:k,onChange:_=>E(_.target.value),placeholder:"refine query",style:{padding:"8px 10px",borderRadius:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff",outline:"none"},onKeyDown:_=>{_.key==="Enter"&&b(k)}}),N.jsx("button",{onClick:()=>b(k),style:{background:"rgba(133,99,246,0.18)",color:"#f5ecff",border:"1px solid rgba(133,99,246,0.45)",padding:"8px 12px",borderRadius:10,cursor:"pointer",boxShadow:"0 0 16px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)"},children:"Search"})]})]}),N.jsxs("div",{children:[F.length===0&&N.jsx("div",{style:{color:"#888"},children:"No results on this page."}),F.map(_=>{const w=i.find(A=>A.id===_.id);return N.jsx("div",{style:{padding:16,borderRadius:10,boxShadow:"0 1px 3px rgba(255,255,255,0.02)",border:"1px solid #151515",marginBottom:12,background:"#0b0b0b"},children:N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[N.jsxs("div",{style:{flex:1},children:[N.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:6},children:N.jsx(yo,{to:`/article/${encodeURIComponent(_.id)}`,style:{textDecoration:"none",color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:N.jsx("span",{dangerouslySetInnerHTML:{__html:hE(_.title+"...",y)}})})}),N.jsx("div",{style:{fontSize:13,color:"#ccc",marginBottom:8},children:_.matches?`${_.matches} match(es)`:""}),N.jsx("div",{style:{whiteSpace:"pre-wrap",color:"#ccc",lineHeight:1.4},children:N.jsx("span",{dangerouslySetInnerHTML:{__html:hE(_.excerpt,y)}})})]}),N.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[N.jsxs("div",{style:{fontSize:12,color:"#bbb"},children:["score: ",_.score]}),N.jsx("div",{children:N.jsx("button",{onClick:()=>o(_),style:{background:w?"rgba(133,99,246,0.18)":"transparent",color:w?"#f5ecff":"#fff",border:w?"1px solid rgba(133,99,246,0.45)":"1px solid #333",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontWeight:600,boxShadow:w?"0 0 16px rgba(133,99,246,0.35)":"none",backdropFilter:w?"blur(4px)":"none"},children:w?"Saved":"Save"})})]})]})},_.id)})]}),N.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:16,flexWrap:"wrap"},children:[N.jsx("button",{onClick:()=>g(1),disabled:p===1,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" First"}),N.jsx("button",{onClick:()=>g(_=>Math.max(1,_-1)),disabled:p===1,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Prev"}),N.jsxs("div",{style:{padding:"6px 10px",border:"1px solid #151515",borderRadius:6,minWidth:120,textAlign:"center",background:"#0b0b0b",color:"#fff"},children:["Page ",p," of ",M]}),N.jsx("button",{onClick:()=>g(_=>Math.min(M,_+1)),disabled:p===M,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Next "}),N.jsx("button",{onClick:()=>g(M),disabled:p===M,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Last "})]})]})}async function Rf(t,e){var s,i,o,a;try{const u=localStorage.getItem("openai_api_key");console.log("Current API Key:",u);const c=new ce({apiKey:u,dangerouslyAllowBrowser:!0});var n="",r="";switch(e){case"classify":n="Classify whether the user is asking a question or just generally searching for a specific paper. If the user is asking a question, return, in all lowercase, 'question'. If the user is searching for a specific paper, return, in all lowercase, 'search'.",r=t;break;case"summarize":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="Summarize the following paper(s): "+t;break;case"question":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="The user asked: "+t+`
 These are the paper(s) in question: [refer to paper(s)]`;break;case"research":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="The user asked: "+t+`
 I am now going to give you the contents of several academic papers that are relevant to this topic. Use ONLY KNOWLEDGE FROM THE FOLLOWING PAPERS to answer the question. Every piece of information you get from the papers MUST BE CITED with the title of cited paper in parentheses at the end of the relevant sentences. Thank you very much.`;break}const h=await c.chat.completions.create({model:"gpt-5",messages:[{role:"system",content:n},{role:"user",content:r}]});return console.log(((i=(s=h.choices[0].message)==null?void 0:s.content)==null?void 0:i.trim())||""),((a=(o=h.choices[0].message)==null?void 0:o.content)==null?void 0:a.trim())||""}catch(u){console.error("Error calling GPT:",u.message||u)}return"ERROR"}function Q6(t,e=12e3){const n=[];let r=0;for(;r<t.length;){let s=Math.min(r+e,t.length);if(s<t.length){const i=t.lastIndexOf(`
`,s);i>r+Math.floor(e*.6)&&(s=i)}n.push(t.slice(r,s)),r=s}return n}async function Y6(t,e){if(t.length<=999999999){const a=`Question:
${e}

=== ARTICLE START ===
${t}
=== ARTICLE END ===`;return await Rf(a,"question")}const r=Q6(t,999999999),s=[];for(let a=0;a<r.length;a++){const u=`Question:
${e}

From this chunk only, extract the minimal facts/quotes that answer the question. If nothing relevant, reply exactly: NO EVIDENCE.

(Chunk ${a+1}/${r.length})
${r[a]}`;s.push(await Rf(u,"question"))}const i=s.filter(a=>!/^NO EVIDENCE/i.test(a)).join(`

`),o=`Question:
${e}

Synthesize the following extracted notes into one answer. Do not invent facts. Combine duplicates, keep numeric details, and keep it brief.

=== NOTES ===
`+(i||"(none)");return await Rf(o,"question")}function X6(t,e){const n=(t.split(/\r?\n/).find(r=>r.trim().length>0)||"").trim();return n?n.replace(/\s*[-|]\s*(PMC|PubMed( Central)?).*/i,"").replace(/\s+/g," ").trim():e}function J6(t){const e=(t.split(/\r?\n/).find(n=>n.trim().length>0)||"").trim();return e?/^https?:\/\//i.test(e)?e:/^[\w.-]+\.[a-z]{2,}([\/?#].*)?$/i.test(e)?"https://"+e:"":""}async function dE(t,e){let n=await fetch(t+encodeURIComponent(e));if(n.ok||(n=await fetch(t+e)),!n.ok)throw new Error(`Fetch failed (${n.status}) for ${e}`);return{text:await n.text(),url:n.url}}function Z6(){const{id:t=""}=dN(),[e,n]=O.useState(null),[r,s]=O.useState(!0),[i,o]=O.useState(null),[a,u]=O.useState(!1),[c,h]=O.useState(""),[f,p]=O.useState(""),[g,S]=O.useState(""),[T,k]=O.useState(!1);O.useEffect(()=>{async function y(v){try{s(!0),o(null),S("");const b=rr+"summaries/"+v+".txt",M=await fetch(b);if(!M.ok)return;const F=await M.text();h(F);const _=decodeURIComponent(v),w=/\.[a-z0-9]+$/i.test(_)?_:`${_}.txt`,[A,C]=await Promise.all([dE(rr,w),zw?dE(zw,w).catch(()=>({text:"",url:""})):Promise.resolve({text:"",url:""})]),R=X6(A.text,_),P=J6(C.text)||A.url;n({id:_,title:R,text:A.text,sourceUrl:P}),document.title=`${R}  AstroPhoenix`}catch(b){o((b==null?void 0:b.message)??"Unknown error")}finally{s(!1)}}t?y(t):(o("Missing article id."),s(!1))},[t]);async function E(y){if(y==null||y.preventDefault(),!(!(e!=null&&e.text)||!f.trim()))try{k(!0),S("");const v=await Y6(e.text,f.trim());S(v.trim())}catch(v){S(""),o(`Q&A failed: ${(v==null?void 0:v.message)||v}`)}finally{k(!1)}}return N.jsx("div",{style:{minHeight:"100vh",padding:"32px 20px 80px",display:"flex",justifyContent:"center",background:"#000",color:"#fff",fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif"},children:N.jsxs("div",{style:{width:"100%",maxWidth:960},children:[N.jsx("div",{style:{marginBottom:20},children:N.jsx(yo,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 18px",borderRadius:999,textDecoration:"none",background:"rgba(133,99,246,0.18)",border:"1px solid rgba(133,99,246,0.45)",color:"#f8efff",fontWeight:600,letterSpacing:.4,boxShadow:"0 0 16px rgba(133,99,246,0.32)",backdropFilter:"blur(6px)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.5)",y.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:y=>{y.currentTarget.style.boxShadow="0 0 16px rgba(133,99,246,0.32)",y.currentTarget.style.transform="translateY(0)"},onFocus:y=>{y.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.5)",y.currentTarget.style.transform="translateY(-1px)"},onBlur:y=>{y.currentTarget.style.boxShadow="0 0 16px rgba(133,99,246,0.32)",y.currentTarget.style.transform="translateY(0)"},children:" Back to search"})}),r&&N.jsx("div",{children:"Loading"}),i&&N.jsx("div",{style:{color:"red",whiteSpace:"pre-wrap"},children:i}),e&&N.jsxs("article",{style:{background:"#0b0b0b",borderRadius:16,boxShadow:"0 2px 8px rgba(255,255,255,0.03)",padding:"40px 60px 96px",maxWidth:900,margin:"0 auto",border:"1px solid #151515",position:"relative",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h1",{style:{marginTop:0,color:"#fff",letterSpacing:.3},children:e.title}),c&&N.jsx("section",{style:{marginTop:20,padding:"16px 18px",background:"#121212",border:"1px solid #222",borderRadius:12,whiteSpace:"pre-wrap",color:"#ddd"},children:c}),N.jsxs("form",{onSubmit:E,style:{marginTop:16,display:"flex",gap:8},children:[N.jsx("input",{value:f,onChange:y=>p(y.target.value),placeholder:"Ask a question about this article",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid #333",background:"transparent",color:"#fff",outline:"none",boxShadow:"none"}}),(()=>{const y=!T&&!!f.trim(),v={padding:"10px 12px",borderRadius:10,display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:44,height:44,transition:"all 0.18s ease",cursor:y?"pointer":"default"},b={background:"rgba(133,99,246,0.18)",border:"1px solid rgba(133,99,246,0.45)",color:"#f8efff",boxShadow:"0 0 14px rgba(133,99,246,0.35)",backdropFilter:"blur(4px)"},M={background:"#222",border:"1px solid #444",color:"#aaa"};return N.jsx("button",{type:"submit",disabled:!y,"aria-label":T?"Answering":"Search",title:T?"Answering":"Search",style:{...v,...y?b:M},children:T?N.jsx("span",{style:{fontSize:13,fontWeight:600},children:"Answering"}):N.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[N.jsx("path",{d:"M21 21l-4.35-4.35",stroke:y?"#f3eaff":"#aaa",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),N.jsx("circle",{cx:"11",cy:"11",r:"6",stroke:y?"#f3eaff":"#aaa",strokeWidth:"1.6"})]})})})()]}),g&&N.jsx("section",{style:{marginTop:20,padding:"16px 18px",background:"#110c2dff",border:"1px solid #867fb7ff",borderRadius:12,whiteSpace:"pre-wrap"},children:g}),N.jsx("a",{href:e.sourceUrl,target:"_blank",rel:"noreferrer",style:{position:"absolute",right:32,bottom:32,padding:"10px 20px",borderRadius:999,textDecoration:"none",background:"rgba(133,99,246,0.2)",border:"1px solid rgba(133,99,246,0.45)",color:"#f8efff",fontWeight:600,letterSpacing:.4,boxShadow:"0 0 20px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.boxShadow="0 0 24px rgba(133,99,246,0.55)",y.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:y=>{y.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.35)",y.currentTarget.style.transform="translateY(0)"},onFocus:y=>{y.currentTarget.style.boxShadow="0 0 24px rgba(133,99,246,0.55)",y.currentTarget.style.transform="translateY(-2px)"},onBlur:y=>{y.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.35)",y.currentTarget.style.transform="translateY(0)"},children:"View Source "})]})]})})}const e$={apiKey:"AIzaSyBKX0eIL-ja9zHCsgi_UwlD8JlByY96UB8",authDomain:"astrophoenix2-3b620.firebaseapp.com",projectId:"astrophoenix2-3b620",storageBucket:"astrophoenix2-3b620.firebasestorage.app",messagingSenderId:"335448449685",appId:"1:335448449685:web:fe31fc84f0313fa075319c",measurementId:"G-C9M23TNWHD"},SC=jg(e$),fE=Ys(SC),t$=BR(SC),n$=()=>{const[t,e]=O.useState(!0),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(null),u=async c=>{c.preventDefault(),a(null);try{if(t)await zL(fE,n,s),alert("Logged in ");else{const f=(await BL(fE,n,s)).user;await by(pl(t$,"users",f.uid),{email:f.email,displayName:f.displayName||"",photoURL:f.photoURL||"",bio:"",createdAt:new Date().toISOString()}),alert("Account created and user data saved!")}}catch(h){a(h.message)}};return N.jsxs("div",{style:{maxWidth:400,margin:"2rem auto",background:"#0b0b0b",padding:24,border:"1px solid #151515",borderRadius:8,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{style:{marginTop:0},children:t?"Login":"Sign Up"}),N.jsxs("form",{onSubmit:u,children:[N.jsxs("div",{children:[N.jsx("label",{children:"Email:"}),N.jsx("input",{type:"email",value:n,required:!0,onChange:c=>r(c.target.value),style:{width:"100%",marginBottom:12,borderRadius:7,padding:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff"}})]}),N.jsxs("div",{children:[N.jsx("label",{children:"Password:"}),N.jsx("input",{type:"password",value:s,required:!0,onChange:c=>i(c.target.value),style:{width:"100%",marginBottom:12,borderRadius:7,padding:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff"}})]}),o&&N.jsx("div",{style:{color:"red",marginBottom:12},children:o}),N.jsx("button",{type:"submit",style:{width:"100%",marginTop:20,marginBottom:20,padding:12,background:"rgba(133,99,246,0.18)",border:"1px solid rgba(133,99,246,0.45)",borderRadius:10,cursor:"pointer",color:"#f5ecff",boxShadow:"0 0 18px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:t?"Login":"Sign Up"})]}),N.jsx("div",{style:{marginTop:16,textAlign:"center"},children:t?N.jsxs(N.Fragment,{children:["Don't have an account?"," ",N.jsx("button",{onClick:()=>e(!1),style:{color:"#8563f6",background:"none",border:"none",cursor:"pointer",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Sign Up"})]}):N.jsxs(N.Fragment,{children:["Already have an account?"," ",N.jsx("button",{onClick:()=>e(!0),style:{color:"#8563f6",background:"none",border:"none",cursor:"pointer",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Login"})]})})]})},TC=O.createContext(void 0);function r$({children:t}){const[e,n]=O.useState(localStorage.getItem("openai_api_key")),r=s=>{n(s),s?localStorage.setItem("openai_api_key",s):localStorage.removeItem("openai_api_key")};return N.jsx(TC.Provider,{value:{apiKey:e,setApiKey:r},children:t})}function s$(){const t=O.useContext(TC);if(!t)throw new Error("useApiKey must be used within ApiKeyProvider");return t}function pE(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Cf(t){return t.toLowerCase().split(/[^a-z0-9]+/g).filter(Boolean)}function i$(){const t=O.useRef(null);return O.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;let r=0;const s=Array.from({length:200},()=>({x:Math.random(),y:Math.random(),size:Math.random()*1.4+.6,twinkle:Math.random()*Math.PI*2,twinkleSpeed:.006+Math.random()*.04})),i=[],o=()=>{const h=Math.random()<.5?-.1:1.1,f=h,p=.05+Math.random()*.4,g=.018+Math.random()*.012,S=h<0?Math.random()*.4-.2:Math.PI-(Math.random()*.4-.2);i.push({x:f,y:p,vx:g*Math.cos(S),vy:g*Math.sin(S),life:120+Math.random()*40,length:.1+Math.random()*.05,opacity:.9})};let a=Math.random()*Math.PI*2;const u=()=>{const{width:h,height:f}=e;a+=.0025;const p=n.createLinearGradient(0,0,0,f);p.addColorStop(0,"#05010f"),p.addColorStop(.55,"#020007"),p.addColorStop(1,"#000"),n.fillStyle=p,n.fillRect(0,0,h,f);const g=2;for(let S=0;S<g;S++){const T=a*(.16+S*.045)+S*2,k=.2+(Math.sin(T)+1)*.25,E=h*(.25+S*.35)+Math.sin(T*.8)*h*.08,y=f*(.28+Math.cos(T*.6)*.06),v=n.createRadialGradient(E,y,h*.01,E,y,h*.38);v.addColorStop(0,"rgba(130,90,230,0.2)"),v.addColorStop(.35,"rgba(90,60,180,0.12)"),v.addColorStop(.7,"rgba(40,30,120,0.06)"),v.addColorStop(1,"rgba(0,0,0,0)"),n.globalAlpha=k,n.fillStyle=v,n.fillRect(0,0,h,f)}n.globalAlpha=1,s.forEach(S=>{S.twinkle+=S.twinkleSpeed;const T=.2+Math.abs(Math.sin(S.twinkle))*.8;n.globalAlpha=T;const k=S.x*h,E=S.y*f;n.fillStyle="#fff",n.beginPath(),n.arc(k,E,S.size,0,Math.PI*2),n.fill()}),n.globalAlpha=1,i.length<2&&Math.random()<.01&&o();for(let S=i.length-1;S>=0;S--){const T=i[S];T.x+=T.vx,T.y+=T.vy,T.life-=1,T.opacity=Math.max(0,T.opacity-.006);const k=T.x*h,E=T.y*f,y=k-T.vx*h*(T.length*18),v=E-T.vy*f*(T.length*18);n.strokeStyle=`rgba(255,255,255,${.65*T.opacity})`,n.lineWidth=1.2,n.beginPath(),n.moveTo(y,v),n.lineTo(k,E),n.stroke(),n.fillStyle=`rgba(255,255,255,${.85*T.opacity})`,n.beginPath(),n.arc(k,E,1.6,0,Math.PI*2),n.fill(),(T.life<=0||k<-50||k>h+50||E<-50||E>f+50)&&i.splice(S,1)}r=requestAnimationFrame(u)},c=()=>{const h=window.devicePixelRatio||1;e.width=window.innerWidth*h,e.height=window.innerHeight*h,n.setTransform(h,0,0,h,0,0),u()};return c(),window.addEventListener("resize",c),()=>{cancelAnimationFrame(r),window.removeEventListener("resize",c)}},[]),N.jsx("canvas",{ref:t,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none"}})}function o$(){const t=Yn();Ys();const e=[{path:"/",label:"Search"},{path:"/explore",label:"Explore"},{path:"/saved",label:"Saved"},{path:"/profile",label:"Profile"}];return N.jsx("nav",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:24,background:"linear-gradient(90deg, rgba(186,163,255,0.15), rgba(133,99,246,0.2))",color:"#fff",padding:"10px 16px",position:"sticky",top:0,zIndex:100,borderRadius:14,margin:10,border:"1px solid rgba(133,99,246,0.25)",boxShadow:"0 6px 18px rgba(0,0,0,0.35)",backdropFilter:"blur(10px)",textShadow:"0 0 6px rgba(133,99,246,0.25)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",transition:"box-shadow 0.2s ease"},children:N.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:e.map(n=>N.jsx(yo,{to:n.path,style:{textDecoration:"none",color:t.pathname===n.path?"#fff":"#fde8ff",fontWeight:t.pathname===n.path?"700":"600",fontSize:15,padding:"6px 12px",borderRadius:999,background:t.pathname===n.path?"rgba(0,0,0,0.45)":"transparent",boxShadow:t.pathname===n.path?"0 0 12px rgba(0,0,0,0.35)":"none",transition:"all 0.15s ease"},children:n.label},n.path))})})}function a$(){const{apiKey:t,setApiKey:e}=s$(),n=go(),{setLastResults:r}=rd(),[s,i]=O.useState("idle"),[o,a]=O.useState({done:0,total:0}),u=O.useRef(new Map),c=O.useRef(new Map),h=O.useRef(null),[f,p]=O.useState(""),[g,S]=O.useState([]),[T,k]=O.useState(null),[E,y]=O.useState(!1),[v,b]=O.useState(1),[M,F]=O.useState(10),[_,w]=O.useState("search");O.useEffect(()=>{h.current=new ar([],{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,useExtendedSearch:!0,threshold:.35,ignoreLocation:!0,minMatchCharLength:2});async function R(){i("indexing");try{let P=function(){return new Promise(async X=>{if(G.length===0||se.length===0)return X();const K=G.shift(),_e=se.shift();de++;try{const Me=encodeURIComponent(K);let He=await fetch(rr+Me);if(He.ok){const Ir=await He.text();x({id:K,title:K.replace(/\.txt$/i,""),content:Ir,url:_e})}else if(console.log("fallback"),He=await fetch(rr+K),!He.ok)console.warn("Failed to fetch",K,He.status),x({id:K,title:K.replace(/\.txt$/i,""),content:"",url:_e});else{const Ir=await He.text();x({id:K,title:K.replace(/\.txt$/i,""),content:Ir,url:_e})}}catch(Me){console.warn("Error fetching",K,Me),x({id:K,title:K.replace(/\.txt$/i,""),content:"",url:_e})}finally{Ie++,de--,a({done:Ie,total:Ee.length}),G.length?setTimeout(()=>P().then(()=>X()),0):X()}})},x=function(X){var _e;u.current.set(X.id,X),new Set([...Cf(X.title),...Cf(X.content)]).forEach(Me=>{let He=c.current.get(Me);He||(He=new Set,c.current.set(Me,He)),He.add(X.id)});try{(_e=h.current)==null||_e.add(X)}catch{if(h.current){const He=Array.from(u.current.values());h.current=new ar(He,{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,useExtendedSearch:!0,threshold:.35,ignoreLocation:!0,minMatchCharLength:2})}}};const ie=await fetch(kS);if(!ie.ok)throw new Error("Failed to fetch manifest: "+ie.status);const Ee=await ie.json();a({done:0,total:Ee.length});const mt=await fetch("https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/output.json");if(!mt.ok)throw new Error("Failed to fetch manifest urls: "+ie.status);const Rt=await mt.json(),W=Math.min(8,Math.max(2,Math.floor(navigator.hardwareConcurrency||4))),G=Ee.slice(),se=Rt.slice();let de=0,Ie=0;const Bt=[];for(let X=0;X<W;X++)Bt.push(P());await Promise.all(Bt),i("ready")}catch(P){k(String(P.message||P)),i("error")}}R()},[]),O.useEffect(()=>{b(1)},[M,f]);async function A(R){var Bt;if(y(!0),R=R.trim(),p(R),S([]),!R)return;const x=/^".+"$/.test(R)?R.slice(1,-1).toLowerCase():R.toLowerCase(),ie=u.current,Ee=c.current,mt=h.current,Rt=new Map;for(const[X,K]of ie){const _e=K.title.toLowerCase();_e.includes(x)&&Rt.set(X,{id:X,title:K.title,excerpt:K.title,score:0,matches:(_e.match(new RegExp(pE(x),"g"))||[]).length,content:K.content,url:K.url})}for(const[X,K]of ie){if(Rt.has(X))continue;const _e=K.content.toLowerCase(),Me=_e.indexOf(x);Me!==-1&&Rt.set(X,{id:X,title:K.title,excerpt:C(K.content,Me,x.length),score:10,matches:(_e.match(new RegExp(pE(x),"g"))||[]).length,content:K.content,url:K.url})}const W=Cf(R);let G=null;if(W.length>0)for(const X of W){const K=Ee.get(X);if(!K){G=new Set;break}if(G===null)G=new Set(K);else for(const _e of Array.from(G))K.has(_e)||G.delete(_e);if(G.size===0)break}G===null&&(G=new Set(ie.keys()));for(const X of Rt.keys())G.delete(X);let se=[];if(G.size>0){const X=Array.from(G).map(K=>ie.get(K));X.length<=600?se=new ar(X,{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,threshold:.45,ignoreLocation:!0,minMatchCharLength:2}).search(R,{limit:500}):se=mt?mt.search(R,{limit:500}):[]}for(const X of se){const K=X.item;if(Rt.has(K.id))continue;const _e=Math.round((X.score??1)*100)+50,Me=K.content.toLowerCase().indexOf(R.toLowerCase()),He=Me!==-1?C(K.content,Me,R.length):K.content.slice(0,250)+(K.content.length>250?"":""),Ir=rr+"summaries/"+K.title+".txt",Ml=await fetch(Ir);if(!Ml.ok)return;const sd=await Ml.text();Rt.set(K.id,{id:K.id,title:K.title,excerpt:He,score:_e,matches:0,content:sd,url:K.url})}let de=Array.from(Rt.values());de.sort((X,K)=>X.score!==K.score?X.score-K.score:K.matches!==X.matches?K.matches-X.matches:X.title.localeCompare(K.title));const Ie=new Map;if(R.includes("?")){let X="The user asked: "+R+`
 I am now going to give you the contents of several academic papers that are relevant to this topic. Use ONLY KNOWLEDGE FROM THE FOLLOWING PAPERS to answer the user's question. Every piece of information you get from the papers MUST BE CITED with the title of cited paper in parentheses at the end of the relevant sentences. Thank you very much. BEGIN PAPERS: `,K=0;for(;K<5&&K<de.length;)console.log("On paper "+K),X=X+"PAPER TITLE: "+de[K].title+" PAPER CONTENT: "+await Tv("","Please summarize the key statistics and points in this paper for another AI to be able to quickly read and get as much infomration out of this as possible: "+((Bt=u.current.get(de[K].id))==null?void 0:Bt.content))+"END PAPER CONTENT. ",K++;Ie.set("1",{id:"AI",title:"AI Summary",excerpt:await Tv("You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",X)+`
 Papers Cited: `+de[0].title,score:0,matches:1,content:"",url:""}),de=Array.from(Ie.values())}S(de),b(1);try{r(de,R,M)}catch{}try{y(!1),n("/results")}catch{}y(!1)}function C(R,P,x=20,ie=220){const Ee=Math.max(0,P-Math.floor(ie/2)),mt=R.slice(Ee,Math.min(R.length,Ee+ie));return(Ee>0?"":"")+mt+(Ee+ie<R.length?"":"")}return Math.max(1,Math.ceil(g.length/M)),g.slice((v-1)*M,v*M),N.jsxs(N.Fragment,{children:[E&&N.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.7)",backdropFilter:"blur(6px)",zIndex:9999,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("div",{style:{width:100,height:100,borderRadius:"50%",border:"4px solid rgba(133,99,246,0.2)",borderTopColor:"#bba4ff",animation:"spin 1.4s linear infinite",marginBottom:24}}),N.jsx("div",{style:{fontSize:18,letterSpacing:1},children:"Searching the cosmos..."}),N.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]}),N.jsx(i$,{}),N.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 120px)",padding:"80px 16px 60px",width:"100%",boxSizing:"border-box",background:"transparent",color:"#fff",position:"relative",zIndex:1,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:N.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",width:"100%",maxWidth:960,position:"relative",margin:"0 auto",background:"#0b0b0b",zIndex:10,boxShadow:"0 0 30px rgba(0,0,0,0.5), 0 0 24px rgba(255,255,255,0.08)",borderRadius:50,border:"1px solid #151515"},children:[N.jsx("h1",{style:{margin:"0 0 8px",color:"#fff",letterSpacing:10},children:"AstroPhoenix"}),N.jsx("p",{style:{color:"#ccc",margin:"0 0 16px"},children:"Search keywords and research questions across all 608 papers."}),N.jsx("h4",{style:{margin:"0 0 16px",color:"#820303ff"},children:"Ask a question with a mark, get a AI answer based on the most relevant papers!"}),T&&N.jsx("div",{style:{color:"red",marginBottom:12},children:T}),N.jsxs("div",{style:{marginBottom:12,color:"#ccc"},children:[N.jsx("strong",{children:"Status:"})," ",s,s==="indexing"&&N.jsxs("span",{children:[" "," downloaded ",o.done+14,"/",o.total+14," (",Math.round(o.done/Math.max(1,o.total)*100),"%)"]}),s==="ready"&&N.jsxs("span",{children:["  indexed ",o.total+14," documents"]})]}),N.jsxs("div",{style:{marginBottom:16},children:[N.jsx("input",{type:"password",value:t||"",onChange:R=>e(R.target.value),placeholder:"Enter your OpenAI API key",style:{padding:"10px 14px",borderRadius:9999,border:"1px solid #333",background:"transparent",color:"#fff",width:"100%",maxWidth:400,textAlign:"center",outline:"none",boxShadow:"none"}}),N.jsx("div",{style:{fontSize:12,color:"#aaa",marginTop:6},children:"Your API key is stored locally in your browser."})]}),N.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:[N.jsx("input",{value:f,onChange:R=>p(R.target.value),onKeyDown:R=>R.key==="Enter"&&A(f),placeholder:'Enter keywords or exact phrase (use "quotes" for phrase)',style:{flex:"1 1 300px",padding:"10px 14px",minWidth:300,borderRadius:9999,border:"1px solid #333",background:"transparent",color:"#fff",outline:"none",transition:"all 0.2s ease",boxShadow:"none"},onFocus:R=>R.target.style.border="1px solid #444",onBlur:R=>R.target.style.border="1px solid #222"}),N.jsx("button",{onClick:()=>A(f),disabled:!f||s==="indexing"&&o.done===0,style:{borderRadius:9999,padding:"14px 26px",cursor:"pointer",background:"rgba(133,99,246,0.2)",border:"1px solid rgba(133,99,246,0.45)",color:"#f5ecff",fontWeight:600,letterSpacing:.5,boxShadow:"0 0 18px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",transition:"all 0.2s ease"},children:"Search"}),N.jsx("button",{onClick:()=>A(f),style:{borderRadius:9999,padding:"10px 14px",cursor:"pointer",background:"rgba(255,255,255,0.04)",border:"1px solid #333",color:"#ccc",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,lineHeight:1,width:48,height:48,boxShadow:"0 0 10px rgba(0,0,0,0.35)",transition:"all 0.2s ease"},"aria-label":"Refresh results",children:""})]})]})})]})}function l$({children:t}){return Ys().currentUser?t:N.jsx(RN,{to:"/",replace:!0})}function u$(){const[t,e]=O.useState(null),[n,r]=O.useState(!0);if(O.useEffect(()=>{const i=Ys(),o=Qg(i,a=>{e(a),r(!1)});return()=>o()},[]),n)return N.jsx("div",{children:"Loading..."});return N.jsx("div",{children:t?N.jsx(s,{}):N.jsx(n$,{})});function s(){return N.jsx(r$,{children:N.jsx(z6,{children:N.jsxs(XN,{children:[N.jsx(o$,{}),N.jsxs(kN,{children:[N.jsx(Rs,{path:"/",element:N.jsx(a$,{})}),N.jsx(Rs,{path:"/explore",element:N.jsx(H6,{})}),N.jsx(Rs,{path:"/results",element:N.jsx(G6,{})}),N.jsx(Rs,{path:"/saved",element:N.jsx(K6,{})}),N.jsx(Rs,{path:"/profile",element:N.jsx(l$,{children:N.jsx(q6,{})})}),N.jsx(Rs,{path:"/article/:id",element:N.jsx(Z6,{})})]})]})})})}}const c$=CS(document.getElementById("root"));c$.render(N.jsx(u$,{}));
