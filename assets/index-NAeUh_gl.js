(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function JC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var fE={exports:{}},lh={},pE={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),ZC=Symbol.for("react.portal"),ek=Symbol.for("react.fragment"),tk=Symbol.for("react.strict_mode"),nk=Symbol.for("react.profiler"),rk=Symbol.for("react.provider"),sk=Symbol.for("react.context"),ik=Symbol.for("react.forward_ref"),ok=Symbol.for("react.suspense"),ak=Symbol.for("react.memo"),lk=Symbol.for("react.lazy"),N_=Symbol.iterator;function uk(t){return t===null||typeof t!="object"?null:(t=N_&&t[N_]||t["@@iterator"],typeof t=="function"?t:null)}var mE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,yE={};function oo(t,e,n){this.props=t,this.context=e,this.refs=yE,this.updater=n||mE}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _E(){}_E.prototype=oo.prototype;function hm(t,e,n){this.props=t,this.context=e,this.refs=yE,this.updater=n||mE}var dm=hm.prototype=new _E;dm.constructor=hm;gE(dm,oo.prototype);dm.isPureReactComponent=!0;var O_=Array.isArray,wE=Object.prototype.hasOwnProperty,fm={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function EE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wE.call(e,r)&&!vE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:fl,type:t,key:i,ref:o,props:s,_owner:fm.current}}function ck(t,e){return{$$typeof:fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pm(t){return typeof t=="object"&&t!==null&&t.$$typeof===fl}function hk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D_=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hk(""+t.key):e.toString(36)}function Au(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fl:case ZC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Id(o,0):r,O_(s)?(n="",t!=null&&(n=t.replace(D_,"$&/")+"/"),Au(s,e,n,"",function(c){return c})):s!=null&&(pm(s)&&(s=ck(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(D_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",O_(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Id(i,a);o+=Au(i,e,n,u,s)}else if(u=uk(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Id(i,a++),o+=Au(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ql(t,e,n){if(t==null)return t;var r=[],s=0;return Au(t,r,"","",function(i){return e.call(n,i,s++)}),r}function dk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Ru={transition:null},fk={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:fm};function IE(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ql,forEach:function(t,e,n){ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ql(t,function(){e++}),e},toArray:function(t){return ql(t,function(e){return e})||[]},only:function(t){if(!pm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=oo;he.Fragment=ek;he.Profiler=nk;he.PureComponent=hm;he.StrictMode=tk;he.Suspense=ok;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fk;he.act=IE;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=fm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)wE.call(e,u)&&!vE.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:fl,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:sk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rk,_context:t},t.Consumer=t};he.createElement=EE;he.createFactory=function(t){var e=EE.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:ik,render:t}};he.isValidElement=pm;he.lazy=function(t){return{$$typeof:lk,_payload:{_status:-1,_result:t},_init:dk}};he.memo=function(t,e){return{$$typeof:ak,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};he.unstable_act=IE;he.useCallback=function(t,e){return Pt.current.useCallback(t,e)};he.useContext=function(t){return Pt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Pt.current.useEffect(t,e)};he.useId=function(){return Pt.current.useId()};he.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Pt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};he.useRef=function(t){return Pt.current.useRef(t)};he.useState=function(t){return Pt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Pt.current.useTransition()};he.version="18.3.1";pE.exports=he;var O=pE.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=O,mk=Symbol.for("react.element"),gk=Symbol.for("react.fragment"),yk=Object.prototype.hasOwnProperty,_k=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wk={key:!0,ref:!0,__self:!0,__source:!0};function SE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)yk.call(e,r)&&!wk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:mk,type:t,key:i,ref:o,props:s,_owner:_k.current}}lh.Fragment=gk;lh.jsx=SE;lh.jsxs=SE;fE.exports=lh;var N=fE.exports,TE={exports:{}},Xt={},AE={exports:{}},RE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Q){var se=W.length;W.push(Q);e:for(;0<se;){var _e=se-1>>>1,K=W[_e];if(0<s(K,Q))W[_e]=Q,W[se]=K,se=_e;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Q=W[0],se=W.pop();if(se!==Q){W[0]=se;e:for(var _e=0,K=W.length,G=K>>>1;_e<G;){var ye=2*(_e+1)-1,$e=W[ye],Ie=ye+1,Zt=W[Ie];if(0>s($e,se))Ie<K&&0>s(Zt,$e)?(W[_e]=Zt,W[Ie]=se,_e=Ie):(W[_e]=$e,W[ye]=se,_e=ye);else if(Ie<K&&0>s(Zt,se))W[_e]=Zt,W[Ie]=se,_e=Ie;else break e}}return Q}function s(W,Q){var se=W.sortIndex-Q.sortIndex;return se!==0?se:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,p=3,g=!1,S=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(W){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=W)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function P(W){if(A=!1,v(W),!S)if(n(u)!==null)S=!0,Ut(V);else{var Q=n(c);Q!==null&&Fe(P,Q.startTime-W)}}function V(W,Q){S=!1,A&&(A=!1,I(w),w=-1),g=!0;var se=p;try{for(v(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||W&&!C());){var _e=f.callback;if(typeof _e=="function"){f.callback=null,p=f.priorityLevel;var K=_e(f.expirationTime<=Q);Q=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),v(Q)}else r(u);f=n(u)}if(f!==null)var G=!0;else{var ye=n(c);ye!==null&&Fe(P,ye.startTime-Q),G=!1}return G}finally{f=null,p=se,g=!1}}var F=!1,_=null,w=-1,E=5,R=-1;function C(){return!(t.unstable_now()-R<E)}function b(){if(_!==null){var W=t.unstable_now();R=W;var Q=!0;try{Q=_(!0,W)}finally{Q?x():(F=!1,_=null)}}else F=!1}var x;if(typeof y=="function")x=function(){y(b)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ee=ce.port2;ce.port1.onmessage=b,x=function(){Ee.postMessage(null)}}else x=function(){k(b,0)};function Ut(W){_=W,F||(F=!0,x())}function Fe(W,Q){w=k(function(){W(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,Ut(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var se=p;p=Q;try{return W()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=p;p=W;try{return Q()}finally{p=se}},t.unstable_scheduleCallback=function(W,Q,se){var _e=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?_e+se:_e):se=_e,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,W={id:h++,callback:Q,priorityLevel:W,startTime:se,expirationTime:K,sortIndex:-1},se>_e?(W.sortIndex=se,e(c,W),n(u)===null&&W===n(c)&&(A?(I(w),w=-1):A=!0,Fe(P,se-_e))):(W.sortIndex=K,e(u,W),S||g||(S=!0,Ut(V))),W},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(W){var Q=p;return function(){var se=p;p=Q;try{return W.apply(this,arguments)}finally{p=se}}}})(RE);AE.exports=RE;var vk=AE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek=O,Yt=vk;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CE=new Set,Ma={};function Js(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(Ma[t]=e,t=0;t<e.length;t++)CE.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,Ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L_={},M_={};function Sk(t){return Af.call(M_,t)?!0:Af.call(L_,t)?!1:Ik.test(t)?M_[t]=!0:(L_[t]=!0,!1)}function Tk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ak(t,e,n,r){if(e===null||typeof e>"u"||Tk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mm=/[\-:]([a-z])/g;function gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mm,gm);dt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mm,gm);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mm,gm);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ym(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ak(e,n,s,r)&&(n=null),r||s===null?Sk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wr=Ek.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),Ei=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),_m=Symbol.for("react.strict_mode"),Rf=Symbol.for("react.profiler"),kE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),wm=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),kf=Symbol.for("react.suspense_list"),vm=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),PE=Symbol.for("react.offscreen"),V_=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=V_&&t[V_]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Sd;function Yo(t){if(Sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var Td=!1;function Ad(t,e){if(!t||Td)return"";Td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Td=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function Rk(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Ad(t.type,!1),t;case 11:return t=Ad(t.type.render,!1),t;case 1:return t=Ad(t.type,!0),t;default:return""}}function xf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ii:return"Fragment";case Ei:return"Portal";case Rf:return"Profiler";case _m:return"StrictMode";case Cf:return"Suspense";case kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xE:return(t.displayName||"Context")+".Consumer";case kE:return(t._context.displayName||"Context")+".Provider";case wm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vm:return e=t.displayName||null,e!==null?e:xf(t.type)||"Memo";case Pr:e=t._payload,t=t._init;try{return xf(t(e))}catch{}}return null}function Ck(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xf(e);case 8:return e===_m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kk(t){var e=bE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gl(t){t._valueTracker||(t._valueTracker=kk(t))}function NE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pf(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function F_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OE(t,e){e=e.checked,e!=null&&ym(t,"checked",e,!1)}function bf(t,e){OE(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nf(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nf(t,e,n){(e!=="number"||sc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function U_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Xo(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function DE(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function LE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?LE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ql,ME=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xk=["Webkit","ms","Moz","O"];Object.keys(ma).forEach(function(t){xk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ma[e]=ma[t]})});function VE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ma.hasOwnProperty(t)&&ma[t]?(""+e).trim():e+"px"}function FE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=VE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Pk=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(t,e){if(e){if(Pk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function Em(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ff=null,Vi=null,Fi=null;function B_(t){if(t=gl(t)){if(typeof Ff!="function")throw Error(j(280));var e=t.stateNode;e&&(e=fh(e),Ff(t.stateNode,t.type,e))}}function $E(t){Vi?Fi?Fi.push(t):Fi=[t]:Vi=t}function UE(){if(Vi){var t=Vi,e=Fi;if(Fi=Vi=null,B_(t),e)for(t=0;t<e.length;t++)B_(e[t])}}function jE(t,e){return t(e)}function BE(){}var Rd=!1;function zE(t,e,n){if(Rd)return t(e,n);Rd=!0;try{return jE(t,e,n)}finally{Rd=!1,(Vi!==null||Fi!==null)&&(BE(),UE())}}function Fa(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var $f=!1;if(ur)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){$f=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{$f=!1}function bk(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ga=!1,ic=null,oc=!1,Uf=null,Nk={onError:function(t){ga=!0,ic=t}};function Ok(t,e,n,r,s,i,o,a,u){ga=!1,ic=null,bk.apply(Nk,arguments)}function Dk(t,e,n,r,s,i,o,a,u){if(Ok.apply(this,arguments),ga){if(ga){var c=ic;ga=!1,ic=null}else throw Error(j(198));oc||(oc=!0,Uf=c)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z_(t){if(Zs(t)!==t)throw Error(j(188))}function Lk(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return z_(s),t;if(i===r)return z_(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function HE(t){return t=Lk(t),t!==null?qE(t):null}function qE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qE(t);if(e!==null)return e;t=t.sibling}return null}var KE=Yt.unstable_scheduleCallback,W_=Yt.unstable_cancelCallback,Mk=Yt.unstable_shouldYield,Vk=Yt.unstable_requestPaint,je=Yt.unstable_now,Fk=Yt.unstable_getCurrentPriorityLevel,Im=Yt.unstable_ImmediatePriority,GE=Yt.unstable_UserBlockingPriority,ac=Yt.unstable_NormalPriority,$k=Yt.unstable_LowPriority,QE=Yt.unstable_IdlePriority,uh=null,Fn=null;function Uk(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(uh,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:zk,jk=Math.log,Bk=Math.LN2;function zk(t){return t>>>=0,t===0?32:31-(jk(t)/Bk|0)|0}var Yl=64,Xl=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Jo(a):(i&=o,i!==0&&(r=Jo(i)))}else o=n&~s,o!==0?r=Jo(o):i!==0&&(r=Jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),s=1<<n,r|=t[n],e&=~s;return r}function Wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-wn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=Wk(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YE(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-wn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function XE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JE,Tm,ZE,eI,tI,Bf=!1,Jl=[],jr=null,Br=null,zr=null,$a=new Map,Ua=new Map,Nr=[],Kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H_(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":$a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function jo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gl(e),e!==null&&Tm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gk(t,e,n,r,s){switch(e){case"focusin":return jr=jo(jr,t,e,n,r,s),!0;case"dragenter":return Br=jo(Br,t,e,n,r,s),!0;case"mouseover":return zr=jo(zr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $a.set(i,jo($a.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ua.set(i,jo(Ua.get(i)||null,t,e,n,r,s)),!0}return!1}function nI(t){var e=ks(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=WE(n),e!==null){t.blockedOn=e,tI(t.priority,function(){ZE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vf=r,n.target.dispatchEvent(r),Vf=null}else return e=gl(n),e!==null&&Tm(e),t.blockedOn=n,!1;e.shift()}return!0}function q_(t,e,n){Cu(t)&&n.delete(e)}function Qk(){Bf=!1,jr!==null&&Cu(jr)&&(jr=null),Br!==null&&Cu(Br)&&(Br=null),zr!==null&&Cu(zr)&&(zr=null),$a.forEach(q_),Ua.forEach(q_)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,Bf||(Bf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Qk)))}function ja(t){function e(s){return Bo(s,t)}if(0<Jl.length){Bo(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&Bo(jr,t),Br!==null&&Bo(Br,t),zr!==null&&Bo(zr,t),$a.forEach(e),Ua.forEach(e),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)nI(n),n.blockedOn===null&&Nr.shift()}var $i=wr.ReactCurrentBatchConfig,uc=!0;function Yk(t,e,n,r){var s=ve,i=$i.transition;$i.transition=null;try{ve=1,Am(t,e,n,r)}finally{ve=s,$i.transition=i}}function Xk(t,e,n,r){var s=ve,i=$i.transition;$i.transition=null;try{ve=4,Am(t,e,n,r)}finally{ve=s,$i.transition=i}}function Am(t,e,n,r){if(uc){var s=zf(t,e,n,r);if(s===null)Vd(t,e,r,cc,n),H_(t,r);else if(Gk(s,t,e,n,r))r.stopPropagation();else if(H_(t,r),e&4&&-1<Kk.indexOf(t)){for(;s!==null;){var i=gl(s);if(i!==null&&JE(i),i=zf(t,e,n,r),i===null&&Vd(t,e,r,cc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var cc=null;function zf(t,e,n,r){if(cc=null,t=Em(r),t=ks(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cc=t,null}function rI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fk()){case Im:return 1;case GE:return 4;case ac:case $k:return 16;case QE:return 536870912;default:return 16}default:return 16}}var Fr=null,Rm=null,ku=null;function sI(){if(ku)return ku;var t,e=Rm,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ku=s.slice(t,1<r?1-r:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function K_(){return!1}function Jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:K_,this.isPropagationStopped=K_,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=Jt(ao),ml=De({},ao,{view:0,detail:0}),Jk=Jt(ml),kd,xd,zo,ch=De({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:km,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(kd=t.screenX-zo.screenX,xd=t.screenY-zo.screenY):xd=kd=0,zo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:xd}}),G_=Jt(ch),Zk=De({},ch,{dataTransfer:0}),ex=Jt(Zk),tx=De({},ml,{relatedTarget:0}),Pd=Jt(tx),nx=De({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),rx=Jt(nx),sx=De({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ix=Jt(sx),ox=De({},ao,{data:0}),Q_=Jt(ox),ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ux[t])?!!e[t]:!1}function km(){return cx}var hx=De({},ml,{key:function(t){if(t.key){var e=ax[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:km,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dx=Jt(hx),fx=De({},ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y_=Jt(fx),px=De({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:km}),mx=Jt(px),gx=De({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),yx=Jt(gx),_x=De({},ch,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wx=Jt(_x),vx=[9,13,27,32],xm=ur&&"CompositionEvent"in window,ya=null;ur&&"documentMode"in document&&(ya=document.documentMode);var Ex=ur&&"TextEvent"in window&&!ya,iI=ur&&(!xm||ya&&8<ya&&11>=ya),X_=" ",J_=!1;function oI(t,e){switch(t){case"keyup":return vx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Si=!1;function Ix(t,e){switch(t){case"compositionend":return aI(e);case"keypress":return e.which!==32?null:(J_=!0,X_);case"textInput":return t=e.data,t===X_&&J_?null:t;default:return null}}function Sx(t,e){if(Si)return t==="compositionend"||!xm&&oI(t,e)?(t=sI(),ku=Rm=Fr=null,Si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iI&&e.locale!=="ko"?null:e.data;default:return null}}var Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tx[t.type]:e==="textarea"}function lI(t,e,n,r){$E(r),e=hc(e,"onChange"),0<e.length&&(n=new Cm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,Ba=null;function Ax(t){wI(t,0)}function hh(t){var e=Ri(t);if(NE(e))return t}function Rx(t,e){if(t==="change")return e}var uI=!1;if(ur){var bd;if(ur){var Nd="oninput"in document;if(!Nd){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),Nd=typeof ew.oninput=="function"}bd=Nd}else bd=!1;uI=bd&&(!document.documentMode||9<document.documentMode)}function tw(){_a&&(_a.detachEvent("onpropertychange",cI),Ba=_a=null)}function cI(t){if(t.propertyName==="value"&&hh(Ba)){var e=[];lI(e,Ba,t,Em(t)),zE(Ax,e)}}function Cx(t,e,n){t==="focusin"?(tw(),_a=e,Ba=n,_a.attachEvent("onpropertychange",cI)):t==="focusout"&&tw()}function kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hh(Ba)}function xx(t,e){if(t==="click")return hh(e)}function Px(t,e){if(t==="input"||t==="change")return hh(e)}function bx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:bx;function za(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Af.call(e,s)||!En(t[s],e[s]))return!1}return!0}function nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rw(t,e){var n=nw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nw(n)}}function hI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dI(){for(var t=window,e=sc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sc(t.document)}return e}function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Nx(t){var e=dI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hI(n.ownerDocument.documentElement,n)){if(r!==null&&Pm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=rw(n,i);var o=rw(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ox=ur&&"documentMode"in document&&11>=document.documentMode,Ti=null,Wf=null,wa=null,Hf=!1;function sw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hf||Ti==null||Ti!==sc(r)||(r=Ti,"selectionStart"in r&&Pm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&za(wa,r)||(wa=r,r=hc(Wf,"onSelect"),0<r.length&&(e=new Cm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Od={},fI={};ur&&(fI=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function dh(t){if(Od[t])return Od[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fI)return Od[t]=e[n];return t}var pI=dh("animationend"),mI=dh("animationiteration"),gI=dh("animationstart"),yI=dh("transitionend"),_I=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){_I.set(t,e),Js(e,[t])}for(var Dd=0;Dd<iw.length;Dd++){var Ld=iw[Dd],Dx=Ld.toLowerCase(),Lx=Ld[0].toUpperCase()+Ld.slice(1);ls(Dx,"on"+Lx)}ls(pI,"onAnimationEnd");ls(mI,"onAnimationIteration");ls(gI,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(yI,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function ow(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dk(r,e,void 0,t),t.currentTarget=null}function wI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;ow(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;ow(s,a,c),i=u}}}if(oc)throw t=Uf,oc=!1,Uf=null,t}function Re(t,e){var n=e[Yf];n===void 0&&(n=e[Yf]=new Set);var r=t+"__bubble";n.has(r)||(vI(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),vI(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Wa(t){if(!t[tu]){t[tu]=!0,CE.forEach(function(n){n!=="selectionchange"&&(Mx.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,Md("selectionchange",!1,e))}}function vI(t,e,n,r){switch(rI(e)){case 1:var s=Yk;break;case 4:s=Xk;break;default:s=Am}n=s.bind(null,e,n,t),s=void 0,!$f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ks(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}zE(function(){var c=i,h=Em(n),f=[];e:{var p=_I.get(t);if(p!==void 0){var g=Cm,S=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":g=dx;break;case"focusin":S="focus",g=Pd;break;case"focusout":S="blur",g=Pd;break;case"beforeblur":case"afterblur":g=Pd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=G_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mx;break;case pI:case mI:case gI:g=rx;break;case yI:g=yx;break;case"scroll":g=Jk;break;case"wheel":g=wx;break;case"copy":case"cut":case"paste":g=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Y_}var A=(e&4)!==0,k=!A&&t==="scroll",I=A?p!==null?p+"Capture":null:p;A=[];for(var y=c,v;y!==null;){v=y;var P=v.stateNode;if(v.tag===5&&P!==null&&(v=P,I!==null&&(P=Fa(y,I),P!=null&&A.push(Ha(y,P,v)))),k)break;y=y.return}0<A.length&&(p=new g(p,S,null,n,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Vf&&(S=n.relatedTarget||n.fromElement)&&(ks(S)||S[cr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=c,S=S?ks(S):null,S!==null&&(k=Zs(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=c),g!==S)){if(A=G_,P="onMouseLeave",I="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(A=Y_,P="onPointerLeave",I="onPointerEnter",y="pointer"),k=g==null?p:Ri(g),v=S==null?p:Ri(S),p=new A(P,y+"leave",g,n,h),p.target=k,p.relatedTarget=v,P=null,ks(h)===c&&(A=new A(I,y+"enter",S,n,h),A.target=v,A.relatedTarget=k,P=A),k=P,g&&S)t:{for(A=g,I=S,y=0,v=A;v;v=ci(v))y++;for(v=0,P=I;P;P=ci(P))v++;for(;0<y-v;)A=ci(A),y--;for(;0<v-y;)I=ci(I),v--;for(;y--;){if(A===I||I!==null&&A===I.alternate)break t;A=ci(A),I=ci(I)}A=null}else A=null;g!==null&&aw(f,p,g,A,!1),S!==null&&k!==null&&aw(f,k,S,A,!0)}}e:{if(p=c?Ri(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=Rx;else if(Z_(p))if(uI)V=Px;else{V=kx;var F=Cx}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=xx);if(V&&(V=V(t,c))){lI(f,V,n,h);break e}F&&F(t,p,c),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Nf(p,"number",p.value)}switch(F=c?Ri(c):window,t){case"focusin":(Z_(F)||F.contentEditable==="true")&&(Ti=F,Wf=c,wa=null);break;case"focusout":wa=Wf=Ti=null;break;case"mousedown":Hf=!0;break;case"contextmenu":case"mouseup":case"dragend":Hf=!1,sw(f,n,h);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":sw(f,n,h)}var _;if(xm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Si?oI(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(iI&&n.locale!=="ko"&&(Si||w!=="onCompositionStart"?w==="onCompositionEnd"&&Si&&(_=sI()):(Fr=h,Rm="value"in Fr?Fr.value:Fr.textContent,Si=!0)),F=hc(c,w),0<F.length&&(w=new Q_(w,t,null,n,h),f.push({event:w,listeners:F}),_?w.data=_:(_=aI(n),_!==null&&(w.data=_)))),(_=Ex?Ix(t,n):Sx(t,n))&&(c=hc(c,"onBeforeInput"),0<c.length&&(h=new Q_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=_))}wI(f,e)})}function Ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fa(t,n),i!=null&&r.unshift(Ha(t,i,s)),i=Fa(t,e),i!=null&&r.push(Ha(t,i,s))),t=t.return}return r}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Fa(n,i),u!=null&&o.unshift(Ha(n,u,a))):s||(u=Fa(n,i),u!=null&&o.push(Ha(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function lw(t){return(typeof t=="string"?t:""+t).replace(Vx,`
`).replace(Fx,"")}function nu(t,e,n){if(e=lw(e),lw(t)!==e&&n)throw Error(j(425))}function dc(){}var qf=null,Kf=null;function Gf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qf=typeof setTimeout=="function"?setTimeout:void 0,$x=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(t){return uw.resolve(null).then(t).catch(jx)}:Qf;function jx(t){setTimeout(function(){throw t})}function Fd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ja(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ja(e)}function Wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Ln="__reactFiber$"+lo,qa="__reactProps$"+lo,cr="__reactContainer$"+lo,Yf="__reactEvents$"+lo,Bx="__reactListeners$"+lo,zx="__reactHandles$"+lo;function ks(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cw(t);t!==null;){if(n=t[Ln])return n;t=cw(t)}return e}t=n,n=t.parentNode}return null}function gl(t){return t=t[Ln]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ri(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function fh(t){return t[qa]||null}var Xf=[],Ci=-1;function us(t){return{current:t}}function ke(t){0>Ci||(t.current=Xf[Ci],Xf[Ci]=null,Ci--)}function Te(t,e){Ci++,Xf[Ci]=t.current,t.current=e}var es={},It=us(es),Mt=us(!1),$s=es;function Gi(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function fc(){ke(Mt),ke(It)}function hw(t,e,n){if(It.current!==es)throw Error(j(168));Te(It,e),Te(Mt,n)}function EI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,Ck(t)||"Unknown",s));return De({},n,r)}function pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,$s=It.current,Te(It,t),Te(Mt,Mt.current),!0}function dw(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=EI(t,e,$s),r.__reactInternalMemoizedMergedChildContext=t,ke(Mt),ke(It),Te(It,t)):ke(Mt),Te(Mt,n)}var Zn=null,ph=!1,$d=!1;function II(t){Zn===null?Zn=[t]:Zn.push(t)}function Wx(t){ph=!0,II(t)}function cs(){if(!$d&&Zn!==null){$d=!0;var t=0,e=ve;try{var n=Zn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zn=null,ph=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(t+1)),KE(Im,cs),s}finally{ve=e,$d=!1}}return null}var ki=[],xi=0,mc=null,gc=0,en=[],tn=0,Us=null,er=1,tr="";function vs(t,e){ki[xi++]=gc,ki[xi++]=mc,mc=t,gc=e}function SI(t,e,n){en[tn++]=er,en[tn++]=tr,en[tn++]=Us,Us=t;var r=er;t=tr;var s=32-wn(r)-1;r&=~(1<<s),n+=1;var i=32-wn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,er=1<<32-wn(e)+s|n<<s|r,tr=i+t}else er=1<<i|n<<s|r,tr=t}function bm(t){t.return!==null&&(vs(t,1),SI(t,1,0))}function Nm(t){for(;t===mc;)mc=ki[--xi],ki[xi]=null,gc=ki[--xi],ki[xi]=null;for(;t===Us;)Us=en[--tn],en[tn]=null,tr=en[--tn],en[tn]=null,er=en[--tn],en[tn]=null}var Gt=null,Kt=null,xe=!1,gn=null;function TI(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Kt=Wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Kt=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zf(t){if(xe){var e=Kt;if(e){var n=e;if(!fw(t,e)){if(Jf(t))throw Error(j(418));e=Wr(n.nextSibling);var r=Gt;e&&fw(t,e)?TI(r,n):(t.flags=t.flags&-4097|2,xe=!1,Gt=t)}}else{if(Jf(t))throw Error(j(418));t.flags=t.flags&-4097|2,xe=!1,Gt=t}}}function pw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function ru(t){if(t!==Gt)return!1;if(!xe)return pw(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gf(t.type,t.memoizedProps)),e&&(e=Kt)){if(Jf(t))throw AI(),Error(j(418));for(;e;)TI(t,e),e=Wr(e.nextSibling)}if(pw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Gt?Wr(t.stateNode.nextSibling):null;return!0}function AI(){for(var t=Kt;t;)t=Wr(t.nextSibling)}function Qi(){Kt=Gt=null,xe=!1}function Om(t){gn===null?gn=[t]:gn.push(t)}var Hx=wr.ReactCurrentBatchConfig;function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function su(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mw(t){var e=t._init;return e(t._payload)}function RI(t){function e(I,y){if(t){var v=I.deletions;v===null?(I.deletions=[y],I.flags|=16):v.push(y)}}function n(I,y){if(!t)return null;for(;y!==null;)e(I,y),y=y.sibling;return null}function r(I,y){for(I=new Map;y!==null;)y.key!==null?I.set(y.key,y):I.set(y.index,y),y=y.sibling;return I}function s(I,y){return I=Gr(I,y),I.index=0,I.sibling=null,I}function i(I,y,v){return I.index=v,t?(v=I.alternate,v!==null?(v=v.index,v<y?(I.flags|=2,y):v):(I.flags|=2,y)):(I.flags|=1048576,y)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,y,v,P){return y===null||y.tag!==6?(y=qd(v,I.mode,P),y.return=I,y):(y=s(y,v),y.return=I,y)}function u(I,y,v,P){var V=v.type;return V===Ii?h(I,y,v.props.children,P,v.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Pr&&mw(V)===y.type)?(P=s(y,v.props),P.ref=Wo(I,y,v),P.return=I,P):(P=Mu(v.type,v.key,v.props,null,I.mode,P),P.ref=Wo(I,y,v),P.return=I,P)}function c(I,y,v,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Kd(v,I.mode,P),y.return=I,y):(y=s(y,v.children||[]),y.return=I,y)}function h(I,y,v,P,V){return y===null||y.tag!==7?(y=Ms(v,I.mode,P,V),y.return=I,y):(y=s(y,v),y.return=I,y)}function f(I,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qd(""+y,I.mode,v),y.return=I,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kl:return v=Mu(y.type,y.key,y.props,null,I.mode,v),v.ref=Wo(I,null,y),v.return=I,v;case Ei:return y=Kd(y,I.mode,v),y.return=I,y;case Pr:var P=y._init;return f(I,P(y._payload),v)}if(Xo(y)||$o(y))return y=Ms(y,I.mode,v,null),y.return=I,y;su(I,y)}return null}function p(I,y,v,P){var V=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return V!==null?null:a(I,y,""+v,P);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Kl:return v.key===V?u(I,y,v,P):null;case Ei:return v.key===V?c(I,y,v,P):null;case Pr:return V=v._init,p(I,y,V(v._payload),P)}if(Xo(v)||$o(v))return V!==null?null:h(I,y,v,P,null);su(I,v)}return null}function g(I,y,v,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return I=I.get(v)||null,a(y,I,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Kl:return I=I.get(P.key===null?v:P.key)||null,u(y,I,P,V);case Ei:return I=I.get(P.key===null?v:P.key)||null,c(y,I,P,V);case Pr:var F=P._init;return g(I,y,v,F(P._payload),V)}if(Xo(P)||$o(P))return I=I.get(v)||null,h(y,I,P,V,null);su(y,P)}return null}function S(I,y,v,P){for(var V=null,F=null,_=y,w=y=0,E=null;_!==null&&w<v.length;w++){_.index>w?(E=_,_=null):E=_.sibling;var R=p(I,_,v[w],P);if(R===null){_===null&&(_=E);break}t&&_&&R.alternate===null&&e(I,_),y=i(R,y,w),F===null?V=R:F.sibling=R,F=R,_=E}if(w===v.length)return n(I,_),xe&&vs(I,w),V;if(_===null){for(;w<v.length;w++)_=f(I,v[w],P),_!==null&&(y=i(_,y,w),F===null?V=_:F.sibling=_,F=_);return xe&&vs(I,w),V}for(_=r(I,_);w<v.length;w++)E=g(_,I,w,v[w],P),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?w:E.key),y=i(E,y,w),F===null?V=E:F.sibling=E,F=E);return t&&_.forEach(function(C){return e(I,C)}),xe&&vs(I,w),V}function A(I,y,v,P){var V=$o(v);if(typeof V!="function")throw Error(j(150));if(v=V.call(v),v==null)throw Error(j(151));for(var F=V=null,_=y,w=y=0,E=null,R=v.next();_!==null&&!R.done;w++,R=v.next()){_.index>w?(E=_,_=null):E=_.sibling;var C=p(I,_,R.value,P);if(C===null){_===null&&(_=E);break}t&&_&&C.alternate===null&&e(I,_),y=i(C,y,w),F===null?V=C:F.sibling=C,F=C,_=E}if(R.done)return n(I,_),xe&&vs(I,w),V;if(_===null){for(;!R.done;w++,R=v.next())R=f(I,R.value,P),R!==null&&(y=i(R,y,w),F===null?V=R:F.sibling=R,F=R);return xe&&vs(I,w),V}for(_=r(I,_);!R.done;w++,R=v.next())R=g(_,I,w,R.value,P),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?w:R.key),y=i(R,y,w),F===null?V=R:F.sibling=R,F=R);return t&&_.forEach(function(b){return e(I,b)}),xe&&vs(I,w),V}function k(I,y,v,P){if(typeof v=="object"&&v!==null&&v.type===Ii&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Kl:e:{for(var V=v.key,F=y;F!==null;){if(F.key===V){if(V=v.type,V===Ii){if(F.tag===7){n(I,F.sibling),y=s(F,v.props.children),y.return=I,I=y;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Pr&&mw(V)===F.type){n(I,F.sibling),y=s(F,v.props),y.ref=Wo(I,F,v),y.return=I,I=y;break e}n(I,F);break}else e(I,F);F=F.sibling}v.type===Ii?(y=Ms(v.props.children,I.mode,P,v.key),y.return=I,I=y):(P=Mu(v.type,v.key,v.props,null,I.mode,P),P.ref=Wo(I,y,v),P.return=I,I=P)}return o(I);case Ei:e:{for(F=v.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(I,y.sibling),y=s(y,v.children||[]),y.return=I,I=y;break e}else{n(I,y);break}else e(I,y);y=y.sibling}y=Kd(v,I.mode,P),y.return=I,I=y}return o(I);case Pr:return F=v._init,k(I,y,F(v._payload),P)}if(Xo(v))return S(I,y,v,P);if($o(v))return A(I,y,v,P);su(I,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(I,y.sibling),y=s(y,v),y.return=I,I=y):(n(I,y),y=qd(v,I.mode,P),y.return=I,I=y),o(I)):n(I,y)}return k}var Yi=RI(!0),CI=RI(!1),yc=us(null),_c=null,Pi=null,Dm=null;function Lm(){Dm=Pi=_c=null}function Mm(t){var e=yc.current;ke(yc),t._currentValue=e}function ep(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ui(t,e){_c=t,Dm=Pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Dm!==t)if(t={context:t,memoizedValue:e,next:null},Pi===null){if(_c===null)throw Error(j(308));Pi=t,_c.dependencies={lanes:0,firstContext:t}}else Pi=Pi.next=t;return e}var xs=null;function Vm(t){xs===null?xs=[t]:xs.push(t)}function kI(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vm(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function Fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,Vm(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function Pu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}function gw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wc(t,e,n,r){var s=t.updateQueue;br=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,h=c=u=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(p=e,g=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){f=S.call(g,f,p);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,p=typeof S=="function"?S.call(g,f,p):S,p==null)break e;f=De({},f,p);break e;case 2:br=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bs|=o,t.lanes=o,t.memoizedState=f}}function yw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var yl={},$n=us(yl),Ka=us(yl),Ga=us(yl);function Ps(t){if(t===yl)throw Error(j(174));return t}function $m(t,e){switch(Te(Ga,e),Te(Ka,t),Te($n,yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}ke($n),Te($n,e)}function Xi(){ke($n),ke(Ka),ke(Ga)}function PI(t){Ps(Ga.current);var e=Ps($n.current),n=Df(e,t.type);e!==n&&(Te(Ka,t),Te($n,n))}function Um(t){Ka.current===t&&(ke($n),ke(Ka))}var be=us(0);function vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ud=[];function jm(){for(var t=0;t<Ud.length;t++)Ud[t]._workInProgressVersionPrimary=null;Ud.length=0}var bu=wr.ReactCurrentDispatcher,jd=wr.ReactCurrentBatchConfig,js=0,Oe=null,Qe=null,rt=null,Ec=!1,va=!1,Qa=0,qx=0;function gt(){throw Error(j(321))}function Bm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function zm(t,e,n,r,s,i){if(js=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bu.current=t===null||t.memoizedState===null?Yx:Xx,t=n(r,s),va){i=0;do{if(va=!1,Qa=0,25<=i)throw Error(j(301));i+=1,rt=Qe=null,e.updateQueue=null,bu.current=Jx,t=n(r,s)}while(va)}if(bu.current=Ic,e=Qe!==null&&Qe.next!==null,js=0,rt=Qe=Oe=null,Ec=!1,e)throw Error(j(300));return t}function Wm(){var t=Qa!==0;return Qa=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Oe.memoizedState=rt=t:rt=rt.next=t,rt}function hn(){if(Qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Oe.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(j(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Oe.memoizedState=rt=t:rt=rt.next=t}return rt}function Ya(t,e){return typeof e=="function"?e(t):e}function Bd(t){var e=hn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((js&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Oe.lanes|=h,Bs|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,En(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Bs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zd(t){var e=hn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);En(i,e.memoizedState)||(Lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bI(){}function NI(t,e){var n=Oe,r=hn(),s=e(),i=!En(r.memoizedState,s);if(i&&(r.memoizedState=s,Lt=!0),r=r.queue,Hm(LI.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Xa(9,DI.bind(null,n,r,s,e),void 0,null),it===null)throw Error(j(349));js&30||OI(n,e,s)}return s}function OI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DI(t,e,n,r){e.value=n,e.getSnapshot=r,MI(e)&&VI(t)}function LI(t,e,n){return n(function(){MI(e)&&VI(t)})}function MI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function VI(t){var e=hr(t,1);e!==null&&vn(e,t,1,-1)}function _w(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:t},e.queue=t,t=t.dispatch=Qx.bind(null,Oe,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FI(){return hn().memoizedState}function Nu(t,e,n,r){var s=Nn();Oe.flags|=t,s.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function mh(t,e,n,r){var s=hn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Bm(r,o.deps)){s.memoizedState=Xa(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Xa(1|e,n,i,r)}function ww(t,e){return Nu(8390656,8,t,e)}function Hm(t,e){return mh(2048,8,t,e)}function $I(t,e){return mh(4,2,t,e)}function UI(t,e){return mh(4,4,t,e)}function jI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BI(t,e,n){return n=n!=null?n.concat([t]):null,mh(4,4,jI.bind(null,e,t),n)}function qm(){}function zI(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function WI(t,e){var n=hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HI(t,e,n){return js&21?(En(n,e)||(n=YE(),Oe.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function Kx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{ve=n,jd.transition=r}}function qI(){return hn().memoizedState}function Gx(t,e,n){var r=Kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KI(t))GI(e,n);else if(n=kI(t,e,n,r),n!==null){var s=xt();vn(n,t,r,s),QI(n,e,r)}}function Qx(t,e,n){var r=Kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KI(t))GI(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,En(a,o)){var u=e.interleaved;u===null?(s.next=s,Vm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=kI(t,e,s,r),n!==null&&(s=xt(),vn(n,t,r,s),QI(n,e,r))}}function KI(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function GI(t,e){va=Ec=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sm(t,n)}}var Ic={readContext:cn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Yx={readContext:cn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:ww,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nu(4194308,4,jI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nu(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gx.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:_w,useDebugValue:qm,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=_w(!1),e=t[0];return t=Kx.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Nn();if(xe){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),it===null)throw Error(j(349));js&30||OI(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ww(LI.bind(null,r,i,t),[t]),r.flags|=2048,Xa(9,DI.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=it.identifierPrefix;if(xe){var n=tr,r=er;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xx={readContext:cn,useCallback:zI,useContext:cn,useEffect:Hm,useImperativeHandle:BI,useInsertionEffect:$I,useLayoutEffect:UI,useMemo:WI,useReducer:Bd,useRef:FI,useState:function(){return Bd(Ya)},useDebugValue:qm,useDeferredValue:function(t){var e=hn();return HI(e,Qe.memoizedState,t)},useTransition:function(){var t=Bd(Ya)[0],e=hn().memoizedState;return[t,e]},useMutableSource:bI,useSyncExternalStore:NI,useId:qI,unstable_isNewReconciler:!1},Jx={readContext:cn,useCallback:zI,useContext:cn,useEffect:Hm,useImperativeHandle:BI,useInsertionEffect:$I,useLayoutEffect:UI,useMemo:WI,useReducer:zd,useRef:FI,useState:function(){return zd(Ya)},useDebugValue:qm,useDeferredValue:function(t){var e=hn();return Qe===null?e.memoizedState=t:HI(e,Qe.memoizedState,t)},useTransition:function(){var t=zd(Ya)[0],e=hn().memoizedState;return[t,e]},useMutableSource:bI,useSyncExternalStore:NI,useId:qI,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gh={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Kr(t),i=sr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(vn(e,t,s,r),Pu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Kr(t),i=sr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(vn(e,t,s,r),Pu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Kr(t),s=sr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(vn(e,t,r,n),Pu(e,t,r))}};function vw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!za(n,r)||!za(s,i):!0}function YI(t,e,n){var r=!1,s=es,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Vt(e)?$s:It.current,r=e.contextTypes,i=(r=r!=null)?Gi(t,s):es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gh.enqueueReplaceState(e,e.state,null)}function np(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Fm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Vt(e)?$s:It.current,s.context=Gi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(tp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gh.enqueueReplaceState(s,s.state,null),wc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var n="",r=e;do n+=Rk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Zx=typeof WeakMap=="function"?WeakMap:Map;function XI(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tc||(Tc=!0,fp=r),rp(t,e)},n}function JI(t,e,n){n=sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rp(t,e),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Iw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=fP.bind(null,t,e,n),e.then(t,t))}function Sw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var eP=wr.ReactCurrentOwner,Lt=!1;function kt(t,e,n,r){e.child=t===null?CI(e,null,n,r):Yi(e,t.child,n,r)}function Aw(t,e,n,r,s){n=n.render;var i=e.ref;return Ui(e,s),r=zm(t,e,n,r,i,s),n=Wm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(xe&&n&&bm(e),e.flags|=1,kt(t,e,r,s),e.child)}function Rw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!eg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ZI(t,e,i,r,s)):(t=Mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:za,n(o,r)&&t.ref===e.ref)return dr(t,e,s)}return e.flags|=1,t=Gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ZI(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(za(i,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,dr(t,e,s)}return sp(t,e,n,r,s)}function eS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ni,Ht),Ht|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ni,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ni,Ht),Ht|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ni,Ht),Ht|=r;return kt(t,e,s,n),e.child}function tS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sp(t,e,n,r,s){var i=Vt(n)?$s:It.current;return i=Gi(e,i),Ui(e,s),n=zm(t,e,n,r,i,s),r=Wm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,dr(t,e,s)):(xe&&r&&bm(e),e.flags|=1,kt(t,e,n,s),e.child)}function Cw(t,e,n,r,s){if(Vt(n)){var i=!0;pc(e)}else i=!1;if(Ui(e,s),e.stateNode===null)Ou(t,e),YI(e,n,r),np(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=Vt(n)?$s:It.current,c=Gi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Ew(e,o,r,c),br=!1;var p=e.memoizedState;o.state=p,wc(e,r,o,s),u=e.memoizedState,a!==r||p!==u||Mt.current||br?(typeof h=="function"&&(tp(e,n,h,r),u=e.memoizedState),(a=br||vw(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Vt(n)?$s:It.current,u=Gi(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&Ew(e,o,r,u),br=!1,p=e.memoizedState,o.state=p,wc(e,r,o,s);var S=e.memoizedState;a!==f||p!==S||Mt.current||br?(typeof g=="function"&&(tp(e,n,g,r),S=e.memoizedState),(c=br||vw(e,n,c,r,p,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ip(t,e,n,r,i,s)}function ip(t,e,n,r,s,i){tS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&dw(e,n,!1),dr(t,e,i);r=e.stateNode,eP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,i),e.child=Yi(e,null,a,i)):kt(t,e,a,i),e.memoizedState=r.state,s&&dw(e,n,!0),e.child}function nS(t){var e=t.stateNode;e.pendingContext?hw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hw(t,e.context,!1),$m(t,e.containerInfo)}function kw(t,e,n,r,s){return Qi(),Om(s),e.flags|=256,kt(t,e,n,r),e.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function rS(t,e,n){var r=e.pendingProps,s=be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(be,s&1),t===null)return Zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wh(o,r,0,null),t=Ms(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ap(n),e.memoizedState=op,t):Km(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return tP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Gr(a,i):(i=Ms(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ap(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=op,r}return i=t.child,t=i.sibling,r=Gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Km(t,e){return e=wh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function iu(t,e,n,r){return r!==null&&Om(r),Yi(e,t.child,null,n),t=Km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(j(422))),iu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wh({mode:"visible",children:r.children},s,0,null),i=Ms(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=ap(o),e.memoizedState=op,i);if(!(e.mode&1))return iu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(j(419)),r=Wd(i,r,void 0),iu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Lt||a){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),vn(r,t,s,-1))}return Zm(),r=Wd(Error(j(421))),iu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Kt=Wr(s.nextSibling),Gt=e,xe=!0,gn=null,t!==null&&(en[tn++]=er,en[tn++]=tr,en[tn++]=Us,er=t.id,tr=t.overflow,Us=e),e=Km(e,r.children),e.flags|=4096,e)}function xw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ep(t.return,e,n)}function Hd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kt(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xw(t,n,e);else if(t.tag===19)xw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&vc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&vc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hd(e,!0,n,null,i);break;case"together":Hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nP(t,e,n){switch(e.tag){case 3:nS(e),Qi();break;case 5:PI(e);break;case 1:Vt(e.type)&&pc(e);break;case 4:$m(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(yc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?rS(t,e,n):(Te(be,be.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Te(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,eS(t,e,n)}return dr(t,e,n)}var iS,lp,oS,aS;iS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lp=function(){};oS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ps($n.current);var i=null;switch(n){case"input":s=Pf(t,s),r=Pf(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Of(t,s),r=Of(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dc)}Lf(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ma.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Re("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};aS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rP(t,e,n){var r=e.pendingProps;switch(Nm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return Vt(e.type)&&fc(),yt(e),null;case 3:return r=e.stateNode,Xi(),ke(Mt),ke(It),jm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(gp(gn),gn=null))),lp(t,e),yt(e),null;case 5:Um(e);var s=Ps(Ga.current);if(n=e.type,t!==null&&e.stateNode!=null)oS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return yt(e),null}if(t=Ps($n.current),ru(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ln]=e,r[qa]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Zo.length;s++)Re(Zo[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":F_(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":U_(r,i),Re("invalid",r)}Lf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,a,t),s=["children",""+a]):Ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Gl(r),$_(r,i,!0);break;case"textarea":Gl(r),j_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=LE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ln]=e,t[qa]=r,iS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mf(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Zo.length;s++)Re(Zo[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":F_(t,r),s=Pf(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Re("invalid",t);break;case"textarea":U_(t,r),s=Of(t,r),Re("invalid",t);break;default:s=r}Lf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?FE(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ME(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Va(t,u):typeof u=="number"&&Va(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ma.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",t):u!=null&&ym(t,i,u,o))}switch(n){case"input":Gl(t),$_(t,r,!1);break;case"textarea":Gl(t),j_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Mi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)aS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Ps(Ga.current),Ps($n.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(i=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return yt(e),null;case 13:if(ke(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Kt!==null&&e.mode&1&&!(e.flags&128))AI(),Qi(),e.flags|=98560,i=!1;else if(i=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Ln]=e}else Qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else gn!==null&&(gp(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Xe===0&&(Xe=3):Zm())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Xi(),lp(t,e),t===null&&Wa(e.stateNode.containerInfo),yt(e),null;case 10:return Mm(e.type._context),yt(e),null;case 17:return Vt(e.type)&&fc(),yt(e),null;case 19:if(ke(be),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ho(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vc(t),o!==null){for(e.flags|=128,Ho(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Zi&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304)}else{if(!r)if(t=vc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return yt(e),null}else 2*je()-i.renderingStartTime>Zi&&n!==1073741824&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=be.current,Te(be,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return Jm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function sP(t,e){switch(Nm(e),e.tag){case 1:return Vt(e.type)&&fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),ke(Mt),ke(It),jm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Um(e),null;case 13:if(ke(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(be),null;case 4:return Xi(),null;case 10:return Mm(e.type._context),null;case 22:case 23:return Jm(),null;case 24:return null;default:return null}}var ou=!1,vt=!1,iP=typeof WeakSet=="function"?WeakSet:Set,q=null;function bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function up(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Pw=!1;function oP(t,e){if(qf=uc,t=dI(),Pm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kf={focusedElem:t,selectionRange:n},uc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,k=S.memoizedState,I=e.stateNode,y=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:fn(e.type,A),k);I.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(P){Ve(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return S=Pw,Pw=!1,S}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&up(e,n,i)}s=s.next}while(s!==r)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lS(t){var e=t.alternate;e!==null&&(t.alternate=null,lS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[qa],delete e[Yf],delete e[Bx],delete e[zx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uS(t){return t.tag===5||t.tag===3||t.tag===4}function bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dc));else if(r!==4&&(t=t.child,t!==null))for(hp(t,e,n),t=t.sibling;t!==null;)hp(t,e,n),t=t.sibling}function dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}var ot=null,mn=!1;function Rr(t,e,n){for(n=n.child;n!==null;)cS(t,e,n),n=n.sibling}function cS(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(uh,n)}catch{}switch(n.tag){case 5:vt||bi(n,e);case 6:var r=ot,s=mn;ot=null,Rr(t,e,n),ot=r,mn=s,ot!==null&&(mn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(mn?(t=ot,n=n.stateNode,t.nodeType===8?Fd(t.parentNode,n):t.nodeType===1&&Fd(t,n),ja(t)):Fd(ot,n.stateNode));break;case 4:r=ot,s=mn,ot=n.stateNode.containerInfo,mn=!0,Rr(t,e,n),ot=r,mn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&up(n,e,o),s=s.next}while(s!==r)}Rr(t,e,n);break;case 1:if(!vt&&(bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Rr(t,e,n),vt=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function Nw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iP),e.forEach(function(r){var s=mP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,mn=!1;break e;case 3:ot=a.stateNode.containerInfo,mn=!0;break e;case 4:ot=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(ot===null)throw Error(j(160));cS(i,o,s),ot=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ve(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hS(e,t),e=e.sibling}function hS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Pn(t),r&4){try{Ea(3,t,t.return),yh(3,t)}catch(A){Ve(t,t.return,A)}try{Ea(5,t,t.return)}catch(A){Ve(t,t.return,A)}}break;case 1:dn(e,t),Pn(t),r&512&&n!==null&&bi(n,n.return);break;case 5:if(dn(e,t),Pn(t),r&512&&n!==null&&bi(n,n.return),t.flags&32){var s=t.stateNode;try{Va(s,"")}catch(A){Ve(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&OE(s,i),Mf(a,o);var c=Mf(a,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?FE(s,f):h==="dangerouslySetInnerHTML"?ME(s,f):h==="children"?Va(s,f):ym(s,h,f,c)}switch(a){case"input":bf(s,i);break;case"textarea":DE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Mi(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Mi(s,!!i.multiple,i.defaultValue,!0):Mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[qa]=i}catch(A){Ve(t,t.return,A)}}break;case 6:if(dn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Ve(t,t.return,A)}}break;case 3:if(dn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ja(e.containerInfo)}catch(A){Ve(t,t.return,A)}break;case 4:dn(e,t),Pn(t);break;case 13:dn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ym=je())),r&4&&Nw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,dn(e,t),vt=c):dn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(f=q=h;q!==null;){switch(p=q,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ea(4,p,p.return);break;case 1:bi(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Ve(r,n,A)}}break;case 5:bi(p,p.return);break;case 22:if(p.memoizedState!==null){Dw(f);continue}}g!==null?(g.return=p,q=g):Dw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=VE("display",o))}catch(A){Ve(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){Ve(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dn(e,t),Pn(t),r&4&&Nw(t);break;case 21:break;default:dn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uS(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Va(s,""),r.flags&=-33);var i=bw(t);dp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bw(t);hp(t,a,o);break;default:throw Error(j(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aP(t,e,n){q=t,dS(t)}function dS(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ou;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||vt;a=ou;var c=vt;if(ou=o,(vt=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Lw(s):u!==null?(u.return=o,q=u):Lw(s);for(;i!==null;)q=i,dS(i),i=i.sibling;q=s,ou=a,vt=c}Ow(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Ow(t)}}function Ow(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ja(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}vt||e.flags&512&&cp(e)}catch(p){Ve(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Dw(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Lw(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ve(e,s,u)}}var i=e.return;try{cp(e)}catch(u){Ve(e,i,u)}break;case 5:var o=e.return;try{cp(e)}catch(u){Ve(e,o,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var lP=Math.ceil,Sc=wr.ReactCurrentDispatcher,Gm=wr.ReactCurrentOwner,ln=wr.ReactCurrentBatchConfig,ge=0,it=null,ze=null,ht=0,Ht=0,Ni=us(0),Xe=0,Ja=null,Bs=0,_h=0,Qm=0,Ia=null,Dt=null,Ym=0,Zi=1/0,Jn=null,Tc=!1,fp=null,qr=null,au=!1,$r=null,Ac=0,Sa=0,pp=null,Du=-1,Lu=0;function xt(){return ge&6?je():Du!==-1?Du:Du=je()}function Kr(t){return t.mode&1?ge&2&&ht!==0?ht&-ht:Hx.transition!==null?(Lu===0&&(Lu=YE()),Lu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:rI(t.type)),t):1}function vn(t,e,n,r){if(50<Sa)throw Sa=0,pp=null,Error(j(185));pl(t,n,r),(!(ge&2)||t!==it)&&(t===it&&(!(ge&2)&&(_h|=n),Xe===4&&Or(t,ht)),Ft(t,r),n===1&&ge===0&&!(e.mode&1)&&(Zi=je()+500,ph&&cs()))}function Ft(t,e){var n=t.callbackNode;Hk(t,e);var r=lc(t,t===it?ht:0);if(r===0)n!==null&&W_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&W_(n),e===1)t.tag===0?Wx(Mw.bind(null,t)):II(Mw.bind(null,t)),Ux(function(){!(ge&6)&&cs()}),n=null;else{switch(XE(r)){case 1:n=Im;break;case 4:n=GE;break;case 16:n=ac;break;case 536870912:n=QE;break;default:n=ac}n=vS(n,fS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fS(t,e){if(Du=-1,Lu=0,ge&6)throw Error(j(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=lc(t,t===it?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Rc(t,r);else{e=r;var s=ge;ge|=2;var i=mS();(it!==t||ht!==e)&&(Jn=null,Zi=je()+500,Ls(t,e));do try{hP();break}catch(a){pS(t,a)}while(!0);Lm(),Sc.current=i,ge=s,ze!==null?e=0:(it=null,ht=0,e=Xe)}if(e!==0){if(e===2&&(s=jf(t),s!==0&&(r=s,e=mp(t,s))),e===1)throw n=Ja,Ls(t,0),Or(t,r),Ft(t,je()),n;if(e===6)Or(t,r);else{if(s=t.current.alternate,!(r&30)&&!uP(s)&&(e=Rc(t,r),e===2&&(i=jf(t),i!==0&&(r=i,e=mp(t,i))),e===1))throw n=Ja,Ls(t,0),Or(t,r),Ft(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Es(t,Dt,Jn);break;case 3:if(Or(t,r),(r&130023424)===r&&(e=Ym+500-je(),10<e)){if(lc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qf(Es.bind(null,t,Dt,Jn),e);break}Es(t,Dt,Jn);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-wn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lP(r/1960))-r,10<r){t.timeoutHandle=Qf(Es.bind(null,t,Dt,Jn),r);break}Es(t,Dt,Jn);break;case 5:Es(t,Dt,Jn);break;default:throw Error(j(329))}}}return Ft(t,je()),t.callbackNode===n?fS.bind(null,t):null}function mp(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(Ls(t,e).flags|=256),t=Rc(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&gp(e)),t}function gp(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function uP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!En(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Qm,e&=~_h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function Mw(t){if(ge&6)throw Error(j(327));ji();var e=lc(t,0);if(!(e&1))return Ft(t,je()),null;var n=Rc(t,e);if(t.tag!==0&&n===2){var r=jf(t);r!==0&&(e=r,n=mp(t,r))}if(n===1)throw n=Ja,Ls(t,0),Or(t,e),Ft(t,je()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,Dt,Jn),Ft(t,je()),null}function Xm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Zi=je()+500,ph&&cs())}}function zs(t){$r!==null&&$r.tag===0&&!(ge&6)&&ji();var e=ge;ge|=1;var n=ln.transition,r=ve;try{if(ln.transition=null,ve=1,t)return t()}finally{ve=r,ln.transition=n,ge=e,!(ge&6)&&cs()}}function Jm(){Ht=Ni.current,ke(Ni)}function Ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$x(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Nm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fc();break;case 3:Xi(),ke(Mt),ke(It),jm();break;case 5:Um(r);break;case 4:Xi();break;case 13:ke(be);break;case 19:ke(be);break;case 10:Mm(r.type._context);break;case 22:case 23:Jm()}n=n.return}if(it=t,ze=t=Gr(t.current,null),ht=Ht=e,Xe=0,Ja=null,Qm=_h=Bs=0,Dt=Ia=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function pS(t,e){do{var n=ze;try{if(Lm(),bu.current=Ic,Ec){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ec=!1}if(js=0,rt=Qe=Oe=null,va=!1,Qa=0,Gm.current=null,n===null||n.return===null){Xe=1,Ja=e,ze=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Sw(o);if(g!==null){g.flags&=-257,Tw(g,o,a,i,e),g.mode&1&&Iw(i,c,e),e=g,u=c;var S=e.updateQueue;if(S===null){var A=new Set;A.add(u),e.updateQueue=A}else S.add(u);break e}else{if(!(e&1)){Iw(i,c,e),Zm();break e}u=Error(j(426))}}else if(xe&&a.mode&1){var k=Sw(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Tw(k,o,a,i,e),Om(Ji(u,a));break e}}i=u=Ji(u,a),Xe!==4&&(Xe=2),Ia===null?Ia=[i]:Ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=XI(i,u,e);gw(i,I);break e;case 1:a=u;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qr===null||!qr.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=JI(i,a,e);gw(i,P);break e}}i=i.return}while(i!==null)}yS(n)}catch(V){e=V,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function mS(){var t=Sc.current;return Sc.current=Ic,t===null?Ic:t}function Zm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),it===null||!(Bs&268435455)&&!(_h&268435455)||Or(it,ht)}function Rc(t,e){var n=ge;ge|=2;var r=mS();(it!==t||ht!==e)&&(Jn=null,Ls(t,e));do try{cP();break}catch(s){pS(t,s)}while(!0);if(Lm(),ge=n,Sc.current=r,ze!==null)throw Error(j(261));return it=null,ht=0,Xe}function cP(){for(;ze!==null;)gS(ze)}function hP(){for(;ze!==null&&!Mk();)gS(ze)}function gS(t){var e=wS(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?yS(t):ze=e,Gm.current=null}function yS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sP(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,ze=null;return}}else if(n=rP(n,e,Ht),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Xe===0&&(Xe=5)}function Es(t,e,n){var r=ve,s=ln.transition;try{ln.transition=null,ve=1,dP(t,e,n,r)}finally{ln.transition=s,ve=r}return null}function dP(t,e,n,r){do ji();while($r!==null);if(ge&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qk(t,i),t===it&&(ze=it=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,vS(ac,function(){return ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ln.transition,ln.transition=null;var o=ve;ve=1;var a=ge;ge|=4,Gm.current=null,oP(t,n),hS(n,t),Nx(Kf),uc=!!qf,Kf=qf=null,t.current=n,aP(n),Vk(),ge=a,ve=o,ln.transition=i}else t.current=n;if(au&&(au=!1,$r=t,Ac=s),i=t.pendingLanes,i===0&&(qr=null),Uk(n.stateNode),Ft(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Tc)throw Tc=!1,t=fp,fp=null,t;return Ac&1&&t.tag!==0&&ji(),i=t.pendingLanes,i&1?t===pp?Sa++:(Sa=0,pp=t):Sa=0,cs(),null}function ji(){if($r!==null){var t=XE(Ac),e=ln.transition,n=ve;try{if(ln.transition=null,ve=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,Ac=0,ge&6)throw Error(j(331));var s=ge;for(ge|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Ea(8,h,i)}var f=h.child;if(f!==null)f.return=h,q=f;else for(;q!==null;){h=q;var p=h.sibling,g=h.return;if(lS(h),h===c){q=null;break}if(p!==null){p.return=g,q=p;break}q=g}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ea(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,q=I;break e}q=i.return}}var y=t.current;for(q=y;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=y;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yh(9,a)}}catch(V){Ve(a,a.return,V)}if(a===o){q=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,q=P;break e}q=a.return}}if(ge=s,cs(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(uh,t)}catch{}r=!0}return r}finally{ve=n,ln.transition=e}}return!1}function Vw(t,e,n){e=Ji(n,e),e=XI(t,e,1),t=Hr(t,e,1),e=xt(),t!==null&&(pl(t,1,e),Ft(t,e))}function Ve(t,e,n){if(t.tag===3)Vw(t,t,n);else for(;e!==null;){if(e.tag===3){Vw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){t=Ji(n,t),t=JI(e,t,1),e=Hr(e,t,1),t=xt(),e!==null&&(pl(e,1,t),Ft(e,t));break}}e=e.return}}function fP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ht&n)===n&&(Xe===4||Xe===3&&(ht&130023424)===ht&&500>je()-Ym?Ls(t,0):Qm|=n),Ft(t,e)}function _S(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=xt();t=hr(t,e),t!==null&&(pl(t,e,n),Ft(t,n))}function pP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_S(t,n)}function mP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),_S(t,n)}var wS;wS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,nP(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,xe&&e.flags&1048576&&SI(e,gc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ou(t,e),t=e.pendingProps;var s=Gi(e,It.current);Ui(e,n),s=zm(null,e,r,t,s,n);var i=Wm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,pc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fm(e),s.updater=gh,e.stateNode=s,s._reactInternals=e,np(e,r,t,n),e=ip(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&bm(e),kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=yP(r),t=fn(r,t),s){case 0:e=sp(null,e,r,t,n);break e;case 1:e=Cw(null,e,r,t,n);break e;case 11:e=Aw(null,e,r,t,n);break e;case 14:e=Rw(null,e,r,fn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),sp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Cw(t,e,r,s,n);case 3:e:{if(nS(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xI(t,e),wc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ji(Error(j(423)),e),e=kw(t,e,r,n,s);break e}else if(r!==s){s=Ji(Error(j(424)),e),e=kw(t,e,r,n,s);break e}else for(Kt=Wr(e.stateNode.containerInfo.firstChild),Gt=e,xe=!0,gn=null,n=CI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qi(),r===s){e=dr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return PI(e),t===null&&Zf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gf(r,s)?o=null:i!==null&&Gf(r,i)&&(e.flags|=32),tS(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Zf(e),null;case 13:return rS(t,e,n);case 4:return $m(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Aw(t,e,r,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(yc,r._currentValue),r._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===s.children&&!Mt.current){e=dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=sr(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ep(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ep(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ui(e,n),s=cn(s),r=r(s),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),Rw(t,e,r,s,n);case 15:return ZI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),Ou(t,e),e.tag=1,Vt(r)?(t=!0,pc(e)):t=!1,Ui(e,n),YI(e,r,s),np(e,r,s,n),ip(null,e,r,!0,t,n);case 19:return sS(t,e,n);case 22:return eS(t,e,n)}throw Error(j(156,e.tag))};function vS(t,e){return KE(t,e)}function gP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new gP(t,e,n,r)}function eg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yP(t){if(typeof t=="function")return eg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wm)return 11;if(t===vm)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")eg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ii:return Ms(n.children,s,i,e);case _m:o=8,s|=8;break;case Rf:return t=on(12,n,e,s|2),t.elementType=Rf,t.lanes=i,t;case Cf:return t=on(13,n,e,s),t.elementType=Cf,t.lanes=i,t;case kf:return t=on(19,n,e,s),t.elementType=kf,t.lanes=i,t;case PE:return wh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kE:o=10;break e;case xE:o=9;break e;case wm:o=11;break e;case vm:o=14;break e;case Pr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ms(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function wh(t,e,n,r){return t=on(22,t,r,e),t.elementType=PE,t.lanes=n,t.stateNode={isHidden:!1},t}function qd(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _P(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tg(t,e,n,r,s,i,o,a,u){return t=new _P(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=on(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(i),t}function wP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ei,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ES(t){if(!t)return es;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Vt(n))return EI(t,n,e)}return e}function IS(t,e,n,r,s,i,o,a,u){return t=tg(n,r,!0,t,s,i,o,a,u),t.context=ES(null),n=t.current,r=xt(),s=Kr(n),i=sr(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,pl(t,s,r),Ft(t,r),t}function vh(t,e,n,r){var s=e.current,i=xt(),o=Kr(s);return n=ES(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,o),t!==null&&(vn(t,s,o,i),Pu(t,s,o)),o}function Cc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ng(t,e){Fw(t,e),(t=t.alternate)&&Fw(t,e)}function vP(){return null}var SS=typeof reportError=="function"?reportError:function(t){console.error(t)};function rg(t){this._internalRoot=t}Eh.prototype.render=rg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));vh(t,e,null,null)};Eh.prototype.unmount=rg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){vh(null,t,null,null)}),e[cr]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=eI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&nI(t)}};function sg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $w(){}function EP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Cc(o);i.call(c)}}var o=IS(e,r,t,0,null,!1,!1,"",$w);return t._reactRootContainer=o,t[cr]=o.current,Wa(t.nodeType===8?t.parentNode:t),zs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Cc(u);a.call(c)}}var u=tg(t,0,!1,null,null,!1,!1,"",$w);return t._reactRootContainer=u,t[cr]=u.current,Wa(t.nodeType===8?t.parentNode:t),zs(function(){vh(e,u,n,r)}),u}function Sh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Cc(o);a.call(u)}}vh(e,o,t,s)}else o=EP(n,e,t,s,r);return Cc(o)}JE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(Sm(e,n|1),Ft(e,je()),!(ge&6)&&(Zi=je()+500,cs()))}break;case 13:zs(function(){var r=hr(t,1);if(r!==null){var s=xt();vn(r,t,1,s)}}),ng(t,1)}};Tm=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=xt();vn(e,t,134217728,n)}ng(t,134217728)}};ZE=function(t){if(t.tag===13){var e=Kr(t),n=hr(t,e);if(n!==null){var r=xt();vn(n,t,e,r)}ng(t,e)}};eI=function(){return ve};tI=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Ff=function(t,e,n){switch(e){case"input":if(bf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=fh(r);if(!s)throw Error(j(90));NE(r),bf(r,s)}}}break;case"textarea":DE(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};jE=Xm;BE=zs;var IP={usingClientEntryPoint:!1,Events:[gl,Ri,fh,$E,UE,Xm]},qo={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SP={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HE(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||vP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{uh=lu.inject(SP),Fn=lu}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IP;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sg(e))throw Error(j(200));return wP(t,e,null,n)};Xt.createRoot=function(t,e){if(!sg(t))throw Error(j(299));var n=!1,r="",s=SS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tg(t,1,!1,null,null,n,!1,r,s),t[cr]=e.current,Wa(t.nodeType===8?t.parentNode:t),new rg(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=HE(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return zs(t)};Xt.hydrate=function(t,e,n){if(!Ih(e))throw Error(j(200));return Sh(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!sg(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=SS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IS(e,null,t,1,n??null,s,!1,i,o),t[cr]=e.current,Wa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eh(e)};Xt.render=function(t,e,n){if(!Ih(e))throw Error(j(200));return Sh(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Ih(t))throw Error(j(40));return t._reactRootContainer?(zs(function(){Sh(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};Xt.unstable_batchedUpdates=Xm;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ih(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Sh(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function TS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TS)}catch(t){console.error(t)}}TS(),TE.exports=Xt;var TP=TE.exports,AS,Uw=TP;AS=Uw.createRoot,Uw.hydrateRoot;const RS="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/manifest.json",Bi="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/articles_text2/",jw="https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/articles_text_withurls/";function fr(t){return Array.isArray?Array.isArray(t):xS(t)==="[object Array]"}function AP(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function RP(t){return t==null?"":AP(t)}function Mn(t){return typeof t=="string"}function CS(t){return typeof t=="number"}function CP(t){return t===!0||t===!1||kP(t)&&xS(t)=="[object Boolean]"}function kS(t){return typeof t=="object"}function kP(t){return kS(t)&&t!==null}function qt(t){return t!=null}function Gd(t){return!t.trim().length}function xS(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xP="Incorrect 'index' type",PP=t=>`Invalid value for key ${t}`,bP=t=>`Pattern length exceeds max of ${t}.`,NP=t=>`Missing ${t} property in key`,OP=t=>`Property 'weight' in key '${t}' must be a positive integer`,Bw=Object.prototype.hasOwnProperty;class DP{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let s=PS(r);n+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function PS(t){let e=null,n=null,r=null,s=1,i=null;if(Mn(t)||fr(t))r=t,e=zw(t),n=yp(t);else{if(!Bw.call(t,"name"))throw new Error(NP("name"));const o=t.name;if(r=o,Bw.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(OP(o));e=zw(o),n=yp(o),i=t.getFn}return{path:e,id:n,weight:s,src:r,getFn:i}}function zw(t){return fr(t)?t:t.split(".")}function yp(t){return fr(t)?t.join("."):t}function LP(t,e){let n=[],r=!1;const s=(i,o,a)=>{if(qt(i))if(!o[a])n.push(i);else{let u=o[a];const c=i[u];if(!qt(c))return;if(a===o.length-1&&(Mn(c)||CS(c)||CP(c)))n.push(RP(c));else if(fr(c)){r=!0;for(let h=0,f=c.length;h<f;h+=1)s(c[h],o,a+1)}else o.length&&s(c,o,a+1)}};return s(t,Mn(e)?e.split("."):e,0),r?n:n[0]}const MP={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},VP={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},FP={location:0,threshold:.6,distance:100},$P={useExtendedSearch:!1,getFn:LP,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var oe={...VP,...MP,...FP,...$P};const UP=/[^ ]+/g;function jP(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(UP).length;if(n.has(i))return n.get(i);const o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(i,a),a},clear(){n.clear()}}}class ig{constructor({getFn:e=oe.getFn,fieldNormWeight:n=oe.fieldNormWeight}={}){this.norm=jP(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Mn(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Mn(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!qt(e)||Gd(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(qt(o)){if(fr(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:h}=u.pop();if(qt(h))if(Mn(h)&&!Gd(h)){let f={v:h,i:c,n:this.norm.get(h)};a.push(f)}else fr(h)&&h.forEach((f,p)=>{u.push({nestedArrIndex:p,value:f})})}r.$[i]=a}else if(Mn(o)&&!Gd(o)){let a={v:o,n:this.norm.get(o)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function bS(t,e,{getFn:n=oe.getFn,fieldNormWeight:r=oe.fieldNormWeight}={}){const s=new ig({getFn:n,fieldNormWeight:r});return s.setKeys(t.map(PS)),s.setSources(e),s.create(),s}function BP(t,{getFn:e=oe.getFn,fieldNormWeight:n=oe.fieldNormWeight}={}){const{keys:r,records:s}=t,i=new ig({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i}function uu(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=oe.distance,ignoreLocation:i=oe.ignoreLocation}={}){const o=e/t.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}function zP(t=[],e=oe.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let a=t[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}const As=32;function WP(t,e,n,{location:r=oe.location,distance:s=oe.distance,threshold:i=oe.threshold,findAllMatches:o=oe.findAllMatches,minMatchCharLength:a=oe.minMatchCharLength,includeMatches:u=oe.includeMatches,ignoreLocation:c=oe.ignoreLocation}={}){if(e.length>As)throw new Error(bP(As));const h=e.length,f=t.length,p=Math.max(0,Math.min(r,f));let g=i,S=p;const A=a>1||u,k=A?Array(f):[];let I;for(;(I=t.indexOf(e,S))>-1;){let _=uu(e,{currentLocation:I,expectedLocation:p,distance:s,ignoreLocation:c});if(g=Math.min(_,g),S=I+h,A){let w=0;for(;w<h;)k[I+w]=1,w+=1}}S=-1;let y=[],v=1,P=h+f;const V=1<<h-1;for(let _=0;_<h;_+=1){let w=0,E=P;for(;w<E;)uu(e,{errors:_,currentLocation:p+E,expectedLocation:p,distance:s,ignoreLocation:c})<=g?w=E:P=E,E=Math.floor((P-w)/2+w);P=E;let R=Math.max(1,p-E+1),C=o?f:Math.min(p+E,f)+h,b=Array(C+2);b[C+1]=(1<<_)-1;for(let ce=C;ce>=R;ce-=1){let Ee=ce-1,Ut=n[t.charAt(Ee)];if(A&&(k[Ee]=+!!Ut),b[ce]=(b[ce+1]<<1|1)&Ut,_&&(b[ce]|=(y[ce+1]|y[ce])<<1|1|y[ce+1]),b[ce]&V&&(v=uu(e,{errors:_,currentLocation:Ee,expectedLocation:p,distance:s,ignoreLocation:c}),v<=g)){if(g=v,S=Ee,S<=p)break;R=Math.max(1,2*p-S)}}if(uu(e,{errors:_+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>g)break;y=b}const F={isMatch:S>=0,score:Math.max(.001,v)};if(A){const _=zP(k,a);_.length?u&&(F.indices=_):F.isMatch=!1}return F}function HP(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class NS{constructor(e,{location:n=oe.location,threshold:r=oe.threshold,distance:s=oe.distance,includeMatches:i=oe.includeMatches,findAllMatches:o=oe.findAllMatches,minMatchCharLength:a=oe.minMatchCharLength,isCaseSensitive:u=oe.isCaseSensitive,ignoreLocation:c=oe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(p,g)=>{this.chunks.push({pattern:p,alphabet:HP(p),startIndex:g})},f=this.pattern.length;if(f>As){let p=0;const g=f%As,S=f-g;for(;p<S;)h(this.pattern.substr(p,As),p),p+=As;if(g){const A=f-As;h(this.pattern.substr(A),A)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let S={isMatch:!0,score:0};return r&&(S.indices=[[0,e.length-1]]),S}const{location:s,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:c}=this.options;let h=[],f=0,p=!1;this.chunks.forEach(({pattern:S,alphabet:A,startIndex:k})=>{const{isMatch:I,score:y,indices:v}=WP(e,S,A,{location:s+k,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:c});I&&(p=!0),f+=y,I&&v&&(h=[...h,...v])});let g={isMatch:p,score:p?f/this.chunks.length:1};return p&&r&&(g.indices=h),g}}class hs{constructor(e){this.pattern=e}static isMultiMatch(e){return Ww(e,this.multiRegex)}static isSingleMatch(e){return Ww(e,this.singleRegex)}search(){}}function Ww(t,e){const n=t.match(e);return n?n[1]:null}class qP extends hs{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class KP extends hs{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class GP extends hs{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class QP extends hs{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class YP extends hs{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class XP extends hs{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class OS extends hs{constructor(e,{location:n=oe.location,threshold:r=oe.threshold,distance:s=oe.distance,includeMatches:i=oe.includeMatches,findAllMatches:o=oe.findAllMatches,minMatchCharLength:a=oe.minMatchCharLength,isCaseSensitive:u=oe.isCaseSensitive,ignoreLocation:c=oe.ignoreLocation}={}){super(e),this._bitapSearch=new NS(e,{location:n,threshold:r,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class DS extends hs{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+i,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const _p=[qP,DS,GP,QP,XP,YP,KP,OS],Hw=_p.length,JP=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ZP="|";function eb(t,e={}){return t.split(ZP).map(n=>{let r=n.trim().split(JP).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=r.length;i<o;i+=1){const a=r[i];let u=!1,c=-1;for(;!u&&++c<Hw;){const h=_p[c];let f=h.isMultiMatch(a);f&&(s.push(new h(f,e)),u=!0)}if(!u)for(c=-1;++c<Hw;){const h=_p[c];let f=h.isSingleMatch(a);if(f){s.push(new h(f,e));break}}}return s})}const tb=new Set([OS.type,DS.type]);class nb{constructor(e,{isCaseSensitive:n=oe.isCaseSensitive,includeMatches:r=oe.includeMatches,minMatchCharLength:s=oe.minMatchCharLength,ignoreLocation:i=oe.ignoreLocation,findAllMatches:o=oe.findAllMatches,location:a=oe.location,threshold:u=oe.threshold,distance:c=oe.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:i,location:a,threshold:u,distance:c},this.pattern=n?e:e.toLowerCase(),this.query=eb(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,o=[],a=0;for(let u=0,c=n.length;u<c;u+=1){const h=n[u];o.length=0,i=0;for(let f=0,p=h.length;f<p;f+=1){const g=h[f],{isMatch:S,indices:A,score:k}=g.search(e);if(S){if(i+=1,a+=k,r){const I=g.constructor.type;tb.has(I)?o=[...o,...A]:o.push(A)}}else{a=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:a/i};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const wp=[];function rb(...t){wp.push(...t)}function vp(t,e){for(let n=0,r=wp.length;n<r;n+=1){let s=wp[n];if(s.condition(t,e))return new s(t,e)}return new NS(t,e)}const kc={AND:"$and",OR:"$or"},Ep={PATH:"$path",PATTERN:"$val"},Ip=t=>!!(t[kc.AND]||t[kc.OR]),sb=t=>!!t[Ep.PATH],ib=t=>!fr(t)&&kS(t)&&!Ip(t),qw=t=>({[kc.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function LS(t,e,{auto:n=!0}={}){const r=s=>{let i=Object.keys(s);const o=sb(s);if(!o&&i.length>1&&!Ip(s))return r(qw(s));if(ib(s)){const u=o?s[Ep.PATH]:i[0],c=o?s[Ep.PATTERN]:s[u];if(!Mn(c))throw new Error(PP(u));const h={keyId:yp(u),pattern:c};return n&&(h.searcher=vp(c,e)),h}let a={children:[],operator:i[0]};return i.forEach(u=>{const c=s[u];fr(c)&&c.forEach(h=>{a.children.push(r(h))})}),a};return Ip(t)||(t=qw(t)),r(t)}function ob(t,{ignoreFieldNorm:e=oe.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),n.score=r})}function ab(t,e){const n=t.matches;e.matches=[],qt(n)&&n.forEach(r=>{if(!qt(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let o={indices:s,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function lb(t,e){e.score=t.score}function ub(t,e,{includeMatches:n=oe.includeMatches,includeScore:r=oe.includeScore}={}){const s=[];return n&&s.push(ab),r&&s.push(lb),t.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return s.length&&s.forEach(u=>{u(i,a)}),a})}class ir{constructor(e,n={},r){this.options={...oe,...n},this.options.useExtendedSearch,this._keyStore=new DP(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof ig))throw new Error(xP);this._myIndex=n||bS(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){qt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,n.push(i))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let u=Mn(e)?Mn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ob(u,{ignoreFieldNorm:a}),i&&u.sort(o),CS(n)&&n>-1&&(u=u.slice(0,n)),ub(u,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const n=vp(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:o,n:a})=>{if(!qt(i))return;const{isMatch:u,score:c,indices:h}=n.searchIn(i);u&&s.push({item:i,idx:o,matches:[{score:c,value:i,norm:a,indices:h}]})}),s}_searchLogical(e){const n=LS(e,this.options),r=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:p}=a,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:p});return g&&g.length?[{idx:c,item:u,matches:g}]:[]}const h=[];for(let f=0,p=a.children.length;f<p;f+=1){const g=a.children[f],S=r(g,u,c);if(S.length)h.push(...S);else if(a.operator===kc.AND)return[]}return h},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:u})=>{if(qt(a)){let c=r(n,a,u);c.length&&(i[u]||(i[u]={idx:u,item:a,matches:[]},o.push(i[u])),c.forEach(({matches:h})=>{i[u].matches.push(...h)}))}}),o}_searchObjectList(e){const n=vp(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!qt(o))return;let u=[];r.forEach((c,h)=>{u.push(...this._findMatches({key:c,value:o[h],searcher:n}))}),u.length&&i.push({idx:a,item:o,matches:u})}),i}_findMatches({key:e,value:n,searcher:r}){if(!qt(n))return[];let s=[];if(fr(n))n.forEach(({v:i,i:o,n:a})=>{if(!qt(i))return;const{isMatch:u,score:c,indices:h}=r.searchIn(i);u&&s.push({score:c,key:e,value:i,idx:o,norm:a,indices:h})});else{const{v:i,n:o}=n,{isMatch:a,score:u,indices:c}=r.searchIn(i);a&&s.push({score:u,key:e,value:i,norm:o,indices:c})}return s}}ir.version="6.6.2";ir.createIndex=bS;ir.parseIndex=BP;ir.config=oe;ir.parseQuery=LS;rb(nb);function re(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function L(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let MS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return MS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Sp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Tp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class J extends Error{}class ft extends J{constructor(e,n,r,s){super(`${ft.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s==null?void 0:s.get("x-request-id"),this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Th({message:r,cause:Tp(n)});const i=n==null?void 0:n.error;return e===400?new VS(e,i,r,s):e===401?new FS(e,i,r,s):e===403?new $S(e,i,r,s):e===404?new US(e,i,r,s):e===409?new jS(e,i,r,s):e===422?new BS(e,i,r,s):e===429?new zS(e,i,r,s):e>=500?new WS(e,i,r,s):new ft(e,i,r,s)}}class an extends ft{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Th extends ft{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class og extends Th{constructor({message:e}={}){super({message:e??"Request timed out."})}}class VS extends ft{}class FS extends ft{}class $S extends ft{}class US extends ft{}class jS extends ft{}class BS extends ft{}class zS extends ft{}class WS extends ft{}class HS extends J{constructor(){super("Could not parse response content as the length limit was reached")}}class qS extends J{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class ea extends Error{constructor(e){super(e)}}const cb=/^[a-z][a-z0-9+.-]*:/i,hb=t=>cb.test(t);let Ot=t=>(Ot=Array.isArray,Ot(t)),Kw=Ot;function KS(t){return typeof t!="object"?{}:t??{}}function db(t){if(!t)return!0;for(const e in t)return!1;return!0}function fb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qd(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const pb=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new J(`${t} must be an integer`);if(e<0)throw new J(`${t} must be a positive integer`);return e},mb=t=>{try{return JSON.parse(t)}catch{return}},_l=t=>new Promise(e=>setTimeout(e,t)),pi="6.1.0",gb=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function yb(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const _b=()=>{var n;const t=yb();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pi,"X-Stainless-OS":Qw(Deno.build.os),"X-Stainless-Arch":Gw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pi,"X-Stainless-OS":Qw(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Gw(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=wb();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wb(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const Gw=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Qw=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Yw;const vb=()=>Yw??(Yw=_b());function Eb(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function GS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function QS(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return GS({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function YS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Ib(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Sb=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),XS="RFC3986",JS=t=>String(t),Xw={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:JS},Tb="RFC1738";let Ap=(t,e)=>(Ap=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ap(t,e));const bn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Yd=1024,Ab=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=Yd){const u=i.length>=Yd?i.slice(a,a+Yd):i,c=[];for(let h=0;h<u.length;++h){let f=u.charCodeAt(h);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===Tb&&(f===40||f===41)){c[c.length]=u.charAt(h);continue}if(f<128){c[c.length]=bn[f];continue}if(f<2048){c[c.length]=bn[192|f>>6]+bn[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=bn[224|f>>12]+bn[128|f>>6&63]+bn[128|f&63];continue}h+=1,f=65536+((f&1023)<<10|u.charCodeAt(h)&1023),c[c.length]=bn[240|f>>18]+bn[128|f>>12&63]+bn[128|f>>6&63]+bn[128|f&63]}o+=c.join("")}return o};function Rb(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Jw(t,e){if(Ot(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const ZS={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},eT=function(t,e){Array.prototype.push.apply(t,Ot(e)?e:[e])};let Zw;const Ge={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ab,encodeValuesOnly:!1,format:XS,formatter:JS,indices:!1,serializeDate(t){return(Zw??(Zw=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Cb(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Xd={};function tT(t,e,n,r,s,i,o,a,u,c,h,f,p,g,S,A,k,I){let y=t,v=I,P=0,V=!1;for(;(v=v.get(Xd))!==void 0&&!V;){const R=v.get(t);if(P+=1,typeof R<"u"){if(R===P)throw new RangeError("Cyclic object value");V=!0}typeof v.get(Xd)>"u"&&(P=0)}if(typeof c=="function"?y=c(e,y):y instanceof Date?y=p==null?void 0:p(y):n==="comma"&&Ot(y)&&(y=Jw(y,function(R){return R instanceof Date?p==null?void 0:p(R):R})),y===null){if(i)return u&&!A?u(e,Ge.encoder,k,"key",g):e;y=""}if(Cb(y)||Rb(y)){if(u){const R=A?e:u(e,Ge.encoder,k,"key",g);return[(S==null?void 0:S(R))+"="+(S==null?void 0:S(u(y,Ge.encoder,k,"value",g)))]}return[(S==null?void 0:S(e))+"="+(S==null?void 0:S(String(y)))]}const F=[];if(typeof y>"u")return F;let _;if(n==="comma"&&Ot(y))A&&u&&(y=Jw(y,u)),_=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ot(c))_=c;else{const R=Object.keys(y);_=h?R.sort(h):R}const w=a?String(e).replace(/\./g,"%2E"):String(e),E=r&&Ot(y)&&y.length===1?w+"[]":w;if(s&&Ot(y)&&y.length===0)return E+"[]";for(let R=0;R<_.length;++R){const C=_[R],b=typeof C=="object"&&typeof C.value<"u"?C.value:y[C];if(o&&b===null)continue;const x=f&&a?C.replace(/\./g,"%2E"):C,ce=Ot(y)?typeof n=="function"?n(E,x):E:E+(f?"."+x:"["+x+"]");I.set(t,P);const Ee=new WeakMap;Ee.set(Xd,I),eT(F,tT(b,ce,n,r,s,i,o,a,n==="comma"&&A&&Ot(y)?null:u,c,h,f,p,g,S,A,k,Ee))}return F}function kb(t=Ge){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ge.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=XS;if(typeof t.format<"u"){if(!Ap(Xw,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Xw[n];let s=Ge.filter;(typeof t.filter=="function"||Ot(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in ZS?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ge.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ge.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ge.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ge.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ge.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ge.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ge.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ge.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ge.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ge.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ge.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ge.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ge.strictNullHandling}}function xb(t,e={}){let n=t;const r=kb(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Ot(r.filter)&&(i=r.filter,s=i);const o=[];if(typeof n!="object"||n===null)return"";const a=ZS[r.arrayFormat],u=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let p=0;p<s.length;++p){const g=s[p];r.skipNulls&&n[g]===null||eT(o,tT(n[g],g,a,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const h=o.join(r.delimiter);let f=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""}function Pb(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let ev;function ag(t){let e;return(ev??(e=new globalThis.TextEncoder,ev=e.encode.bind(e)))(t)}let tv;function nv(t){let e;return(tv??(e=new globalThis.TextDecoder,tv=e.decode.bind(e)))(t)}var Bt,zt;class Ah{constructor(){Bt.set(this,void 0),zt.set(this,void 0),re(this,Bt,new Uint8Array),re(this,zt,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ag(e):e;re(this,Bt,Pb([L(this,Bt,"f"),n]));const r=[];let s;for(;(s=bb(L(this,Bt,"f"),L(this,zt,"f")))!=null;){if(s.carriage&&L(this,zt,"f")==null){re(this,zt,s.index);continue}if(L(this,zt,"f")!=null&&(s.index!==L(this,zt,"f")+1||s.carriage)){r.push(nv(L(this,Bt,"f").subarray(0,L(this,zt,"f")-1))),re(this,Bt,L(this,Bt,"f").subarray(L(this,zt,"f"))),re(this,zt,null);continue}const i=L(this,zt,"f")!==null?s.preceding-1:s.preceding,o=nv(L(this,Bt,"f").subarray(0,i));r.push(o),re(this,Bt,L(this,Bt,"f").subarray(s.index)),re(this,zt,null)}return r}flush(){return L(this,Bt,"f").length?this.decode(`
`):[]}}Bt=new WeakMap,zt=new WeakMap;Ah.NEWLINE_CHARS=new Set([`
`,"\r"]);Ah.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bb(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Nb(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const xc={off:0,error:200,warn:300,info:400,debug:500},rv=(t,e,n)=>{if(t){if(fb(xc,t))return t;at(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(xc))}`)}};function ta(){}function cu(t,e,n){return!e||xc[t]>xc[n]?ta:e[t].bind(e)}const Ob={error:ta,warn:ta,info:ta,debug:ta};let sv=new WeakMap;function at(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Ob;const r=sv.get(e);if(r&&r[0]===n)return r[1];const s={error:cu("error",e,n),warn:cu("warn",e,n),info:cu("info",e,n),debug:cu("debug",e,n)};return sv.set(e,[n,s]),s}const Is=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ko;class Vn{constructor(e,n,r){this.iterator=e,Ko.set(this,void 0),this.controller=n,re(this,Ko,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?at(r):console;async function*o(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const u of Db(e,n))if(!a){if(u.data.startsWith("[DONE]")){a=!0;continue}if(u.event===null||!u.event.startsWith("thread.")){let c;try{c=JSON.parse(u.data)}catch(h){throw i.error("Could not parse message into JSON:",u.data),i.error("From chunk:",u.raw),h}if(c&&c.error)throw new ft(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(u.data)}catch(h){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),h}if(u.event=="error")throw new ft(void 0,c.error,c.message,void 0);yield{event:u.event,data:c}}}a=!0}catch(u){if(Sp(u))return;throw u}finally{a||n.abort()}}return new Vn(o,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const a=new Ah,u=YS(e);for await(const c of u)for(const h of a.decode(c))yield h;for(const c of a.flush())yield c}async function*o(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const u of i())a||u&&(yield JSON.parse(u));a=!0}catch(u){if(Sp(u))return;throw u}finally{a||n.abort()}}return new Vn(o,n,r)}[(Ko=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Vn(()=>s(e),this.controller,L(this,Ko,"f")),new Vn(()=>s(n),this.controller,L(this,Ko,"f"))]}toReadableStream(){const e=this;let n;return GS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=ag(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*Db(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new J("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new J("Attempted to iterate over a response with no body");const n=new Mb,r=new Ah,s=YS(t.body);for await(const i of Lb(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*Lb(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?ag(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=Nb(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Mb{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=Vb(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Vb(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function nT(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var f;if(e.options.stream)return at(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Vn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),u=(f=a==null?void 0:a.split(";")[0])==null?void 0:f.trim();if((u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))){const p=await n.json();return rT(p,n)}return await n.text()})();return at(t).debug(`[${r}] response parsed`,Is({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function rT(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var na;class Rh extends Promise{constructor(e,n,r=nT){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,na.set(this,void 0),re(this,na,e)}_thenUnwrap(e){return new Rh(L(this,na,"f"),this.responsePromise,async(n,r)=>rT(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(L(this,na,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}na=new WeakMap;var hu;class lg{constructor(e,n,r,s){hu.set(this,void 0),re(this,hu,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new J("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await L(this,hu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(hu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Fb extends Rh{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await nT(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ch extends lg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class He extends lg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var r;const e=this.getPaginatedItems(),n=(r=e[e.length-1])==null?void 0:r.id;return n?{...this.options,query:{...KS(this.options.query),after:n}}:null}}class $b extends lg{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...KS(this.options.query),after:e}}:null}}const sT=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ta(t,e,n){return sT(),new File(t,e??"unknown_file",n)}function Vu(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const iT=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Ws=async(t,e)=>({...t,body:await jb(t.body,e)}),iv=new WeakMap;function Ub(t){const e=typeof t=="function"?t:t.fetch,n=iv.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return iv.set(e,r),r}const jb=async(t,e)=>{if(!await Ub(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Rp(n,r,s))),n},Bb=t=>t instanceof Blob&&"name"in t,Rp=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ta([await n.blob()],Vu(n)));else if(iT(n))t.append(e,Ta([await new Response(QS(n)).blob()],Vu(n)));else if(Bb(n))t.append(e,n,Vu(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Rp(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Rp(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},oT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",zb=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&oT(t),Wb=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Hb(t,e,n){if(sT(),t=await t,zb(t))return t instanceof File?t:Ta([await t.arrayBuffer()],t.name);if(Wb(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ta(await Cp(s),e,n)}const r=await Cp(t);if(e||(e=Vu(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Ta(r,e,n)}async function Cp(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(oT(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(iT(t))for await(const r of t)e.push(...await Cp(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${qb(t)}`)}return e}function qb(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class ee{constructor(e){this._client=e}}function aT(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ov=Object.freeze(Object.create(null)),Kb=(t=aT)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((h,f,p)=>{var A;/[?#]/.test(f)&&(s=!0);const g=r[p];let S=(s?encodeURIComponent:t)(""+g);return p!==r.length&&(g==null||typeof g=="object"&&g.toString===((A=Object.getPrototypeOf(Object.getPrototypeOf(g.hasOwnProperty??ov)??ov))==null?void 0:A.toString))&&(S=g+"",i.push({start:h.length+f.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(g).slice(8,-1)} is not a valid path parameter`})),h+f+(p===r.length?"":S)},""),a=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((h,f)=>h.start-f.start),i.length>0){let h=0;const f=i.reduce((p,g)=>{const S=" ".repeat(g.start-h),A="^".repeat(g.length);return h=g.start+g.length,p+S+A},"");throw new J(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${o}
${f}`)}return o},B=Kb(aT);let lT=class extends ee{list(e,n={},r){return this._client.getAPIList(B`/chat/completions/${e}/messages`,He,{query:n,...r})}};function Pc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function ug(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function wl(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function Gb(t,e){return!e||!uT(e)?{...t,choices:t.choices.map(n=>(cT(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:cg(t,e)}function cg(t,e){const n=t.choices.map(r=>{var s;if(r.finish_reason==="length")throw new HS;if(r.finish_reason==="content_filter")throw new qS;return cT(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(i=>Yb(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Qb(e,r.message.content):null}}});return{...t,choices:n}}function Qb(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Yb(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Pc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:wl(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function Xb(t,e){var r;if(!t||!("tools"in t)||!t.tools)return!1;const n=(r=t.tools)==null?void 0:r.find(s=>{var i;return Pc(s)&&((i=s.function)==null?void 0:i.name)===e.function.name});return Pc(n)&&(wl(n)||(n==null?void 0:n.function.strict)||!1)}function uT(t){var e;return ug(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>wl(n)||n.type==="function"&&n.function.strict===!0))??!1}function cT(t){for(const e of t||[])if(e.type!=="function")throw new J(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Jb(t){for(const e of t??[]){if(e.type!=="function")throw new J(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new J(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const bc=t=>(t==null?void 0:t.role)==="assistant",hT=t=>(t==null?void 0:t.role)==="tool";var kp,Fu,$u,ra,sa,Uu,ia,Xn,oa,Nc,Oc,mi,dT;class hg{constructor(){kp.add(this),this.controller=new AbortController,Fu.set(this,void 0),$u.set(this,()=>{}),ra.set(this,()=>{}),sa.set(this,void 0),Uu.set(this,()=>{}),ia.set(this,()=>{}),Xn.set(this,{}),oa.set(this,!1),Nc.set(this,!1),Oc.set(this,!1),mi.set(this,!1),re(this,Fu,new Promise((e,n)=>{re(this,$u,e,"f"),re(this,ra,n,"f")})),re(this,sa,new Promise((e,n)=>{re(this,Uu,e,"f"),re(this,ia,n,"f")})),L(this,Fu,"f").catch(()=>{}),L(this,sa,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},L(this,kp,"m",dT).bind(this))},0)}_connected(){this.ended||(L(this,$u,"f").call(this),this._emit("connect"))}get ended(){return L(this,oa,"f")}get errored(){return L(this,Nc,"f")}get aborted(){return L(this,Oc,"f")}abort(){this.controller.abort()}on(e,n){return(L(this,Xn,"f")[e]||(L(this,Xn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=L(this,Xn,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(L(this,Xn,"f")[e]||(L(this,Xn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{re(this,mi,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){re(this,mi,!0),await L(this,sa,"f")}_emit(e,...n){if(L(this,oa,"f"))return;e==="end"&&(re(this,oa,!0),L(this,Uu,"f").call(this));const r=L(this,Xn,"f")[e];if(r&&(L(this,Xn,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!L(this,mi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),L(this,ra,"f").call(this,s),L(this,ia,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!L(this,mi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),L(this,ra,"f").call(this,s),L(this,ia,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Fu=new WeakMap,$u=new WeakMap,ra=new WeakMap,sa=new WeakMap,Uu=new WeakMap,ia=new WeakMap,Xn=new WeakMap,oa=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,mi=new WeakMap,kp=new WeakSet,dT=function(e){if(re(this,Nc,!0),e instanceof Error&&e.name==="AbortError"&&(e=new an),e instanceof an)return re(this,Oc,!0),this._emit("abort",e);if(e instanceof J)return this._emit("error",e);if(e instanceof Error){const n=new J(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new J(String(e)))};function Zb(t){return typeof t.parse=="function"}var Ct,xp,Dc,Pp,bp,Np,fT,pT;const e2=10;class mT extends hg{constructor(){super(...arguments),Ct.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),hT(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(bc(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new J("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),L(this,Ct,"m",xp).call(this)}async finalMessage(){return await this.done(),L(this,Ct,"m",Dc).call(this)}async finalFunctionToolCall(){return await this.done(),L(this,Ct,"m",Pp).call(this)}async finalFunctionToolCallResult(){return await this.done(),L(this,Ct,"m",bp).call(this)}async totalUsage(){return await this.done(),L(this,Ct,"m",Np).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=L(this,Ct,"m",Dc).call(this);n&&this._emit("finalMessage",n);const r=L(this,Ct,"m",xp).call(this);r&&this._emit("finalContent",r);const s=L(this,Ct,"m",Pp).call(this);s&&this._emit("finalFunctionToolCall",s);const i=L(this,Ct,"m",bp).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",L(this,Ct,"m",Np).call(this))}async _createChatCompletion(e,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,Ct,"m",fT).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(cg(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){var g,S,A;const s="tool",{tool_choice:i="auto",stream:o,...a}=n,u=typeof i!="string"&&i.type==="function"&&((g=i==null?void 0:i.function)==null?void 0:g.name),{maxChatCompletions:c=e2}=r||{},h=n.tools.map(k=>{if(wl(k)){if(!k.$callback)throw new J("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:k.$callback,name:k.function.name,description:k.function.description||"",parameters:k.function.parameters,parse:k.$parseRaw,strict:!0}}}return k}),f={};for(const k of h)k.type==="function"&&(f[k.function.name||k.function.function.name]=k.function);const p="tools"in n?h.map(k=>k.type==="function"?{type:"function",function:{name:k.function.name||k.function.function.name,parameters:k.function.parameters,description:k.function.description,strict:k.function.strict}}:k):void 0;for(const k of n.messages)this._addMessage(k,!1);for(let k=0;k<c;++k){const y=(S=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:S.message;if(!y)throw new J("missing message in ChatCompletion response");if(!((A=y.tool_calls)!=null&&A.length))return;for(const v of y.tool_calls){if(v.type!=="function")continue;const P=v.id,{name:V,arguments:F}=v.function,_=f[V];if(_){if(u&&u!==V){const C=`Invalid tool_call: ${JSON.stringify(V)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:s,tool_call_id:P,content:C});continue}}else{const C=`Invalid tool_call: ${JSON.stringify(V)}. Available options are: ${Object.keys(f).map(b=>JSON.stringify(b)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:P,content:C});continue}let w;try{w=Zb(_)?await _.parse(F):F}catch(C){const b=C instanceof Error?C.message:String(C);this._addMessage({role:s,tool_call_id:P,content:b});continue}const E=await _.function(w,this),R=L(this,Ct,"m",pT).call(this,E);if(this._addMessage({role:s,tool_call_id:P,content:R}),u)return}}}}Ct=new WeakSet,xp=function(){return L(this,Ct,"m",Dc).call(this).content??null},Dc=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(bc(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new J("stream ended without producing a ChatCompletionMessage with role=assistant")},Pp=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(bc(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(n=s.tool_calls.filter(i=>i.type==="function").at(-1))==null?void 0:n.function}},bp=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(hT(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Np=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},fT=function(e){if(e.n!=null&&e.n>1)throw new J("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},pT=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class dg extends mT{static runTools(e,n,r){const s=new dg,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),bc(e)&&e.content&&this._emit("content",e.content)}}const gT=1,yT=2,_T=4,wT=8,vT=16,ET=32,IT=64,ST=128,TT=256,AT=ST|TT,RT=vT|ET|AT|IT,CT=gT|yT|RT,kT=_T|wT,t2=CT|kT,tt={STR:gT,NUM:yT,ARR:_T,OBJ:wT,NULL:vT,BOOL:ET,NAN:IT,INFINITY:ST,MINUS_INFINITY:TT,INF:AT,SPECIAL:RT,ATOM:CT,COLLECTION:kT,ALL:t2};class n2 extends Error{}class r2 extends Error{}function s2(t,e=tt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return i2(t.trim(),e)}const i2=(t,e)=>{const n=t.length;let r=0;const s=p=>{throw new n2(`${p} at position ${r}`)},i=p=>{throw new r2(`${p} at position ${r}`)},o=()=>(f(),r>=n&&s("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?u():t[r]==="["?c():t.substring(r,r+4)==="null"||tt.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||tt.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||tt.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||tt.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||tt.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||tt.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):h()),a=()=>{const p=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(g)))}catch(S){i(String(S))}else if(tt.STR&e)try{return JSON.parse(t.substring(p,r-Number(g))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},u=()=>{r++,f();const p={};try{for(;t[r]!=="}";){if(f(),r>=n&&tt.OBJ&e)return p;const g=a();f(),r++;try{const S=o();Object.defineProperty(p,g,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(tt.OBJ&e)return p;throw S}f(),t[r]===","&&r++}}catch{if(tt.OBJ&e)return p;s("Expected '}' at end of object")}return r++,p},c=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(o()),f(),t[r]===","&&r++}catch{if(tt.ARR&e)return p;s("Expected ']' at end of array")}return r++,p},h=()=>{if(r===0){t==="-"&&tt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(tt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(g))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(tt.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&tt.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(S){i(String(S))}}},f=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},av=t=>s2(t,tt.ALL^tt.NUM);var Ke,Yn,hi,Cr,Jd,du,Zd,ef,tf,fu,nf,lv;class Za extends mT{constructor(e){super(),Ke.add(this),Yn.set(this,void 0),hi.set(this,void 0),Cr.set(this,void 0),re(this,Yn,e),re(this,hi,[])}get currentChatCompletionSnapshot(){return L(this,Cr,"f")}static fromReadableStream(e){const n=new Za(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Za(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,Ke,"m",Jd).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)L(this,Ke,"m",Zd).call(this,a);if((o=i.controller.signal)!=null&&o.aborted)throw new an;return this._addChatCompletion(L(this,Ke,"m",fu).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),L(this,Ke,"m",Jd).call(this),this._connected();const s=Vn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(L(this,Ke,"m",fu).call(this)),L(this,Ke,"m",Zd).call(this,a),i=a.id;if((o=s.controller.signal)!=null&&o.aborted)throw new an;return this._addChatCompletion(L(this,Ke,"m",fu).call(this))}[(Yn=new WeakMap,hi=new WeakMap,Cr=new WeakMap,Ke=new WeakSet,Jd=function(){this.ended||re(this,Cr,void 0)},du=function(n){let r=L(this,hi,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},L(this,hi,"f")[n.index]=r,r)},Zd=function(n){var s,i,o,a,u,c,h,f,p,g,S,A,k,I,y;if(this.ended)return;const r=L(this,Ke,"m",lv).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const P=r.choices[v.index];v.delta.content!=null&&((s=P.message)==null?void 0:s.role)==="assistant"&&((i=P.message)!=null&&i.content)&&(this._emit("content",v.delta.content,P.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:P.message.content,parsed:P.message.parsed})),v.delta.refusal!=null&&((o=P.message)==null?void 0:o.role)==="assistant"&&((a=P.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:P.message.refusal}),((u=v.logprobs)==null?void 0:u.content)!=null&&((c=P.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=v.logprobs)==null?void 0:h.content,snapshot:((f=P.logprobs)==null?void 0:f.content)??[]}),((p=v.logprobs)==null?void 0:p.refusal)!=null&&((g=P.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(S=v.logprobs)==null?void 0:S.refusal,snapshot:((A=P.logprobs)==null?void 0:A.refusal)??[]});const V=L(this,Ke,"m",du).call(this,P);P.finish_reason&&(L(this,Ke,"m",tf).call(this,P),V.current_tool_call_index!=null&&L(this,Ke,"m",ef).call(this,P,V.current_tool_call_index));for(const F of v.delta.tool_calls??[])V.current_tool_call_index!==F.index&&(L(this,Ke,"m",tf).call(this,P),V.current_tool_call_index!=null&&L(this,Ke,"m",ef).call(this,P,V.current_tool_call_index)),V.current_tool_call_index=F.index;for(const F of v.delta.tool_calls??[]){const _=(k=P.message.tool_calls)==null?void 0:k[F.index];_!=null&&_.type&&((_==null?void 0:_.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(I=_.function)==null?void 0:I.name,index:F.index,arguments:_.function.arguments,parsed_arguments:_.function.parsed_arguments,arguments_delta:((y=F.function)==null?void 0:y.arguments)??""}):(_==null||_.type,void 0))}}},ef=function(n,r){var o,a,u;if(L(this,Ke,"m",du).call(this,n).done_tool_calls.has(r))return;const i=(o=n.message.tool_calls)==null?void 0:o[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const c=(u=(a=L(this,Yn,"f"))==null?void 0:a.tools)==null?void 0:u.find(h=>Pc(h)&&h.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:wl(c)?c.$parseRaw(i.function.arguments):c!=null&&c.function.strict?JSON.parse(i.function.arguments):null})}else i.type},tf=function(n){var s,i;const r=L(this,Ke,"m",du).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=L(this,Ke,"m",nf).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},fu=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=L(this,Cr,"f");if(!n)throw new J("request ended without sending any chunks");return re(this,Cr,void 0),re(this,hi,[]),o2(n,L(this,Yn,"f"))},nf=function(){var r;const n=(r=L(this,Yn,"f"))==null?void 0:r.response_format;return ug(n)?n:null},lv=function(n){var r,s,i,o;let a=L(this,Cr,"f");const{choices:u,...c}=n;a?Object.assign(a,c):a=re(this,Cr,{...c,choices:[]});for(const{delta:h,finish_reason:f,index:p,logprobs:g=null,...S}of n.choices){let A=a.choices[p];if(A||(A=a.choices[p]={finish_reason:f,index:p,message:{},logprobs:g,...S}),g)if(!A.logprobs)A.logprobs=Object.assign({},g);else{const{content:F,refusal:_,...w}=g;Object.assign(A.logprobs,w),F&&((r=A.logprobs).content??(r.content=[]),A.logprobs.content.push(...F)),_&&((s=A.logprobs).refusal??(s.refusal=[]),A.logprobs.refusal.push(..._))}if(f&&(A.finish_reason=f,L(this,Yn,"f")&&uT(L(this,Yn,"f")))){if(f==="length")throw new HS;if(f==="content_filter")throw new qS}if(Object.assign(A,S),!h)continue;const{content:k,refusal:I,function_call:y,role:v,tool_calls:P,...V}=h;if(Object.assign(A.message,V),I&&(A.message.refusal=(A.message.refusal||"")+I),v&&(A.message.role=v),y&&(A.message.function_call?(y.name&&(A.message.function_call.name=y.name),y.arguments&&((i=A.message.function_call).arguments??(i.arguments=""),A.message.function_call.arguments+=y.arguments)):A.message.function_call=y),k&&(A.message.content=(A.message.content||"")+k,!A.message.refusal&&L(this,Ke,"m",nf).call(this)&&(A.message.parsed=av(A.message.content))),P){A.message.tool_calls||(A.message.tool_calls=[]);for(const{index:F,id:_,type:w,function:E,...R}of P){const C=(o=A.message.tool_calls)[F]??(o[F]={});Object.assign(C,R),_&&(C.id=_),w&&(C.type=w),E&&(C.function??(C.function={name:E.name??"",arguments:""})),E!=null&&E.name&&(C.function.name=E.name),E!=null&&E.arguments&&(C.function.arguments+=E.arguments,Xb(L(this,Yn,"f"),C)&&(C.function.parsed_arguments=av(C.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Vn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function o2(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:o,...a}=t,u={...a,id:n,choices:r.map(({message:c,finish_reason:h,index:f,logprobs:p,...g})=>{if(!h)throw new J(`missing finish_reason for choice ${f}`);const{content:S=null,function_call:A,tool_calls:k,...I}=c,y=c.role;if(!y)throw new J(`missing role for choice ${f}`);if(A){const{arguments:v,name:P}=A;if(v==null)throw new J(`missing function_call.arguments for choice ${f}`);if(!P)throw new J(`missing function_call.name for choice ${f}`);return{...g,message:{content:S,function_call:{arguments:v,name:P},role:y,refusal:c.refusal??null},finish_reason:h,index:f,logprobs:p}}return k?{...g,index:f,finish_reason:h,logprobs:p,message:{...I,role:y,content:S,refusal:c.refusal??null,tool_calls:k.map((v,P)=>{const{function:V,type:F,id:_,...w}=v,{arguments:E,name:R,...C}=V||{};if(_==null)throw new J(`missing choices[${f}].tool_calls[${P}].id
${pu(t)}`);if(F==null)throw new J(`missing choices[${f}].tool_calls[${P}].type
${pu(t)}`);if(R==null)throw new J(`missing choices[${f}].tool_calls[${P}].function.name
${pu(t)}`);if(E==null)throw new J(`missing choices[${f}].tool_calls[${P}].function.arguments
${pu(t)}`);return{...w,id:_,type:F,function:{...C,name:R,arguments:E}}})}}:{...g,message:{...I,content:S,role:y,refusal:c.refusal??null},finish_reason:h,index:f,logprobs:p}}),created:s,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Gb(u,e)}function pu(t){return JSON.stringify(t)}class Lc extends Za{static fromReadableStream(e){const n=new Lc(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Lc(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let fg=class extends ee{constructor(){super(...arguments),this.messages=new lT(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(B`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(B`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",He,{query:e,...n})}delete(e,n){return this._client.delete(B`/chat/completions/${e}`,n)}parse(e,n){return Jb(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>cg(r,e))}runTools(e,n){return e.stream?Lc.runTools(this._client,e,n):dg.runTools(this._client,e,n)}stream(e,n){return Za.createChatCompletion(this._client,e,n)}};fg.Messages=lT;class pg extends ee{constructor(){super(...arguments),this.completions=new fg(this._client)}}pg.Completions=fg;const xT=Symbol("brand.privateNullableHeaders");function*a2(t){if(!t)return;if(xT in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Kw(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Kw(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Y=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of a2(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[xT]:!0,values:e,nulls:n}};class PT extends ee{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Y([{Accept:"application/octet-stream"},n==null?void 0:n.headers]),__binaryResponse:!0})}}class bT extends ee{create(e,n){return this._client.post("/audio/transcriptions",Ws({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class NT extends ee{create(e,n){return this._client.post("/audio/translations",Ws({body:e,...n,__metadata:{model:e.model}},this._client))}}class vl extends ee{constructor(){super(...arguments),this.transcriptions=new bT(this._client),this.translations=new NT(this._client),this.speech=new PT(this._client)}}vl.Transcriptions=bT;vl.Translations=NT;vl.Speech=PT;class OT extends ee{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(B`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",He,{query:e,...n})}cancel(e,n){return this._client.post(B`/batches/${e}/cancel`,n)}}class DT extends ee{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/assistants/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/assistants/${e}`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/assistants",He,{query:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(B`/assistants/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class LT extends ee{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class MT extends ee{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}let kh=class extends ee{constructor(){super(...arguments),this.sessions=new LT(this._client),this.transcriptionSessions=new MT(this._client)}};kh.Sessions=LT;kh.TranscriptionSessions=MT;class VT extends ee{create(e,n,r){return this._client.post(B`/threads/${e}/messages`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(B`/threads/${s}/messages/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/messages/${e}`,{body:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/threads/${e}/messages`,He,{query:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(B`/threads/${s}/messages/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class FT extends ee{retrieve(e,n,r){const{thread_id:s,run_id:i,...o}=n;return this._client.get(B`/threads/${s}/runs/${i}/steps/${e}`,{query:o,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(B`/threads/${s}/runs/${e}/steps`,He,{query:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}const l2=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var rf={};const di=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=rf==null?void 0:rf[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var lt,bs,Op,On,ju,pn,Ns,Oi,Rs,Mc,Wt,Bu,zu,Aa,aa,la,uv,cv,hv,dv,fv,pv,mv;class Ra extends hg{constructor(){super(...arguments),lt.add(this),Op.set(this,[]),On.set(this,{}),ju.set(this,{}),pn.set(this,void 0),Ns.set(this,void 0),Oi.set(this,void 0),Rs.set(this,void 0),Mc.set(this,void 0),Wt.set(this,void 0),Bu.set(this,void 0),zu.set(this,void 0),Aa.set(this,void 0)}[(Op=new WeakMap,On=new WeakMap,ju=new WeakMap,pn=new WeakMap,Ns=new WeakMap,Oi=new WeakMap,Rs=new WeakMap,Mc=new WeakMap,Wt=new WeakMap,Bu=new WeakMap,zu=new WeakMap,Aa=new WeakMap,lt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new bs;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Vn.fromReadableStream(e,this.controller);for await(const o of s)L(this,lt,"m",aa).call(this,o);if((i=s.controller.signal)!=null&&i.aborted)throw new an;return this._addRun(L(this,lt,"m",la).call(this))}toReadableStream(){return new Vn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new bs;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){var u;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...s,signal:this.controller.signal});this._connected();for await(const c of a)L(this,lt,"m",aa).call(this,c);if((u=a.controller.signal)!=null&&u.aborted)throw new an;return this._addRun(L(this,lt,"m",la).call(this))}static createThreadAssistantStream(e,n,r){const s=new bs;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new bs;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return L(this,Bu,"f")}currentRun(){return L(this,zu,"f")}currentMessageSnapshot(){return L(this,pn,"f")}currentRunStepSnapshot(){return L(this,Aa,"f")}async finalRunSteps(){return await this.done(),Object.values(L(this,On,"f"))}async finalMessages(){return await this.done(),Object.values(L(this,ju,"f"))}async finalRun(){if(await this.done(),!L(this,Ns,"f"))throw Error("Final run was not received.");return L(this,Ns,"f")}async _createThreadAssistantStream(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const u of o)L(this,lt,"m",aa).call(this,u);if((a=o.controller.signal)!=null&&a.aborted)throw new an;return this._addRun(L(this,lt,"m",la).call(this))}async _createAssistantStream(e,n,r,s){var u;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...s,signal:this.controller.signal});this._connected();for await(const c of a)L(this,lt,"m",aa).call(this,c);if((u=a.controller.signal)!=null&&u.aborted)throw new an;return this._addRun(L(this,lt,"m",la).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(Qd(i)&&Qd(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(o=>typeof o=="string"||typeof o=="number")){i.push(...s);continue}for(const o of s){if(!Qd(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const u=i[a];u==null?i.push(o):i[a]=this.accumulateDelta(u,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}bs=Ra,aa=function(e){if(!this.ended)switch(re(this,Bu,e),L(this,lt,"m",hv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":L(this,lt,"m",mv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":L(this,lt,"m",cv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":L(this,lt,"m",uv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},la=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");if(!L(this,Ns,"f"))throw Error("Final run has not been received");return L(this,Ns,"f")},uv=function(e){const[n,r]=L(this,lt,"m",fv).call(this,e,L(this,pn,"f"));re(this,pn,n),L(this,ju,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,o=n.content[s.index];if(o&&o.type=="text")this._emit("textDelta",i,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=L(this,Oi,"f")){if(L(this,Rs,"f"))switch(L(this,Rs,"f").type){case"text":this._emit("textDone",L(this,Rs,"f").text,L(this,pn,"f"));break;case"image_file":this._emit("imageFileDone",L(this,Rs,"f").image_file,L(this,pn,"f"));break}re(this,Oi,s.index)}re(this,Rs,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(L(this,Oi,"f")!==void 0){const s=e.data.content[L(this,Oi,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,L(this,pn,"f"));break;case"text":this._emit("textDone",s.text,L(this,pn,"f"));break}}L(this,pn,"f")&&this._emit("messageDone",e.data),re(this,pn,void 0)}},cv=function(e){const n=L(this,lt,"m",dv).call(this,e);switch(re(this,Aa,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==L(this,Mc,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(L(this,Wt,"f")&&this._emit("toolCallDone",L(this,Wt,"f")),re(this,Mc,i.index),re(this,Wt,n.step_details.tool_calls[i.index]),L(this,Wt,"f")&&this._emit("toolCallCreated",L(this,Wt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":re(this,Aa,void 0),e.data.step_details.type=="tool_calls"&&L(this,Wt,"f")&&(this._emit("toolCallDone",L(this,Wt,"f")),re(this,Wt,void 0)),this._emit("runStepDone",e.data,n);break}},hv=function(e){L(this,Op,"f").push(e),this._emit("event",e)},dv=function(e){switch(e.event){case"thread.run.step.created":return L(this,On,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=L(this,On,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=bs.accumulateDelta(n,r.delta);L(this,On,"f")[e.data.id]=s}return L(this,On,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":L(this,On,"f")[e.data.id]=e.data;break}if(L(this,On,"f")[e.data.id])return L(this,On,"f")[e.data.id];throw new Error("No snapshot available")},fv=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let o=n.content[i.index];n.content[i.index]=L(this,lt,"m",pv).call(this,i,o)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},pv=function(e,n){return bs.accumulateDelta(n,e)},mv=function(e){switch(re(this,zu,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":re(this,Ns,e.data),L(this,Wt,"f")&&(this._emit("toolCallDone",L(this,Wt,"f")),re(this,Wt,void 0));break}};let mg=class extends ee{constructor(){super(...arguments),this.steps=new FT(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(B`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(B`/threads/${s}/runs/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/runs/${e}`,{body:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/threads/${e}/runs`,He,{query:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(B`/threads/${s}/runs/${e}/cancel`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Ra.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){var i;const s=Y([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=a.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await _l(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,r){return Ra.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(B`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Ra.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};mg.Steps=FT;class xh extends ee{constructor(){super(...arguments),this.runs=new mg(this._client),this.messages=new VT(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/threads/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/threads/${e}`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n){return this._client.delete(B`/threads/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Ra.createThreadAssistantStream(e,this._client.beta.threads,n)}}xh.Runs=mg;xh.Messages=VT;class El extends ee{constructor(){super(...arguments),this.realtime=new kh(this._client),this.assistants=new DT(this._client),this.threads=new xh(this._client)}}El.Realtime=kh;El.Assistants=DT;El.Threads=xh;class $T extends ee{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class UT extends ee{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(B`/containers/${s}/files/${e}/content`,{...r,headers:Y([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}}let gg=class extends ee{constructor(){super(...arguments),this.content=new UT(this._client)}create(e,n,r){return this._client.post(B`/containers/${e}/files`,Ws({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(B`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(B`/containers/${e}/files`,He,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(B`/containers/${s}/files/${e}`,{...r,headers:Y([{Accept:"*/*"},r==null?void 0:r.headers])})}};gg.Content=UT;class yg extends ee{constructor(){super(...arguments),this.files=new gg(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(B`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",He,{query:e,...n})}delete(e,n){return this._client.delete(B`/containers/${e}`,{...n,headers:Y([{Accept:"*/*"},n==null?void 0:n.headers])})}}yg.Files=gg;class jT extends ee{create(e,n,r){const{include:s,...i}=n;return this._client.post(B`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(B`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(B`/conversations/${e}/items`,$b,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(B`/conversations/${s}/items/${e}`,r)}}class _g extends ee{constructor(){super(...arguments),this.items=new jT(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(B`/conversations/${e}`,n)}update(e,n,r){return this._client.post(B`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(B`/conversations/${e}`,n)}}_g.Items=jT;class BT extends ee{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&at(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(at(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const u=a.embedding;a.embedding=l2(u)}),o)))}}class zT extends ee{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(B`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(B`/evals/${s}/runs/${e}/output_items`,He,{query:i,...r})}}class wg extends ee{constructor(){super(...arguments),this.outputItems=new zT(this._client)}create(e,n,r){return this._client.post(B`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(B`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(B`/evals/${e}/runs`,He,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(B`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(B`/evals/${s}/runs/${e}`,r)}}wg.OutputItems=zT;class vg extends ee{constructor(){super(...arguments),this.runs=new wg(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(B`/evals/${e}`,n)}update(e,n,r){return this._client.post(B`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",He,{query:e,...n})}delete(e,n){return this._client.delete(B`/evals/${e}`,n)}}vg.Runs=wg;let WT=class extends ee{create(e,n){return this._client.post("/files",Ws({body:e,...n},this._client))}retrieve(e,n){return this._client.get(B`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",He,{query:e,...n})}delete(e,n){return this._client.delete(B`/files/${e}`,n)}content(e,n){return this._client.get(B`/files/${e}/content`,{...n,headers:Y([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await _l(n),o=await this.retrieve(e),Date.now()-i>r)throw new og({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class HT extends ee{}let qT=class extends ee{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Eg extends ee{constructor(){super(...arguments),this.graders=new qT(this._client)}}Eg.Graders=qT;class KT extends ee{create(e,n,r){return this._client.getAPIList(B`/fine_tuning/checkpoints/${e}/permissions`,Ch,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(B`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(B`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Ig=class extends ee{constructor(){super(...arguments),this.permissions=new KT(this._client)}};Ig.Permissions=KT;class GT extends ee{list(e,n={},r){return this._client.getAPIList(B`/fine_tuning/jobs/${e}/checkpoints`,He,{query:n,...r})}}class Sg extends ee{constructor(){super(...arguments),this.checkpoints=new GT(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(B`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",He,{query:e,...n})}cancel(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(B`/fine_tuning/jobs/${e}/events`,He,{query:n,...r})}pause(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(B`/fine_tuning/jobs/${e}/resume`,n)}}Sg.Checkpoints=GT;class uo extends ee{constructor(){super(...arguments),this.methods=new HT(this._client),this.jobs=new Sg(this._client),this.checkpoints=new Ig(this._client),this.alpha=new Eg(this._client)}}uo.Methods=HT;uo.Jobs=Sg;uo.Checkpoints=Ig;uo.Alpha=Eg;class QT extends ee{}class Tg extends ee{constructor(){super(...arguments),this.graderModels=new QT(this._client)}}Tg.GraderModels=QT;class YT extends ee{createVariation(e,n){return this._client.post("/images/variations",Ws({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",Ws({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class XT extends ee{retrieve(e,n){return this._client.get(B`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ch,e)}delete(e,n){return this._client.delete(B`/models/${e}`,n)}}class JT extends ee{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class ZT extends ee{accept(e,n,r){return this._client.post(B`/realtime/calls/${e}/accept`,{body:n,...r,headers:Y([{Accept:"*/*"},r==null?void 0:r.headers])})}hangup(e,n){return this._client.post(B`/realtime/calls/${e}/hangup`,{...n,headers:Y([{Accept:"*/*"},n==null?void 0:n.headers])})}refer(e,n,r){return this._client.post(B`/realtime/calls/${e}/refer`,{body:n,...r,headers:Y([{Accept:"*/*"},r==null?void 0:r.headers])})}reject(e,n={},r){return this._client.post(B`/realtime/calls/${e}/reject`,{body:n,...r,headers:Y([{Accept:"*/*"},r==null?void 0:r.headers])})}}class e1 extends ee{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ph extends ee{constructor(){super(...arguments),this.clientSecrets=new e1(this._client),this.calls=new ZT(this._client)}}Ph.ClientSecrets=e1;Ph.Calls=ZT;function u2(t,e){return!e||!h2(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:t1(t,e)}function t1(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:p2(e,s)};if(s.type==="message"){const i=s.content.map(o=>o.type==="output_text"?{...o,parsed:c2(e,o.text)}:o);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Dp(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function c2(t,e){var n,r,s,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=t.text)==null?void 0:s.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function h2(t){var e;return!!ug((e=t.text)==null?void 0:e.format)}function d2(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function f2(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function p2(t,e){const n=f2(t.tools??[],e.name);return{...e,...e,parsed_arguments:d2(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Dp(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var fi,mu,kr,gu,gv,yv,_v,wv;class Ag extends hg{constructor(e){super(),fi.add(this),mu.set(this,void 0),kr.set(this,void 0),gu.set(this,void 0),re(this,mu,e)}static createResponse(e,n,r){const s=new Ag(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,fi,"m",gv).call(this);let i,o=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const u of i)L(this,fi,"m",yv).call(this,u,o);if((a=i.controller.signal)!=null&&a.aborted)throw new an;return L(this,fi,"m",_v).call(this)}[(mu=new WeakMap,kr=new WeakMap,gu=new WeakMap,fi=new WeakSet,gv=function(){this.ended||re(this,kr,void 0)},yv=function(n,r){if(this.ended)return;const s=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},i=L(this,fi,"m",wv).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new J(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new J(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new J(`expected content to be 'output_text', got ${a.type}`);s("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new J(`missing output at index ${n.output_index}`);o.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:s(n.type,n);break}},_v=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=L(this,kr,"f");if(!n)throw new J("request ended without sending any events");re(this,kr,void 0);const r=m2(n,L(this,mu,"f"));return re(this,gu,r),r},wv=function(n){var s;let r=L(this,kr,"f");if(!r){if(n.type!=="response.created")throw new J(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=re(this,kr,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);const o=i.type,a=n.part;o==="message"&&a.type!=="reasoning_text"?i.content.push(a):o==="reasoning"&&a.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(a));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);if(i.type==="message"){const o=i.content[n.content_index];if(!o)throw new J(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new J(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new J(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const o=(s=i.content)==null?void 0:s[n.content_index];if(!o)throw new J(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new J(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{re(this,kr,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,o)=>n.push({resolve:i,reject:o})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=L(this,gu,"f");if(!e)throw new J("stream ended without producing a ChatCompletion");return e}}function m2(t,e){return u2(t,e)}class n1 extends ee{list(e,n={},r){return this._client.getAPIList(B`/responses/${e}/input_items`,He,{query:n,...r})}}class Rg extends ee{constructor(){super(...arguments),this.inputItems=new n1(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Dp(r),r))}retrieve(e,n={},r){return this._client.get(B`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Dp(s),s))}delete(e,n){return this._client.delete(B`/responses/${e}`,{...n,headers:Y([{Accept:"*/*"},n==null?void 0:n.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>t1(r,e))}stream(e,n){return Ag.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(B`/responses/${e}/cancel`,n)}}Rg.InputItems=n1;class r1 extends ee{create(e,n,r){return this._client.post(B`/uploads/${e}/parts`,Ws({body:n,...r},this._client))}}class Cg extends ee{constructor(){super(...arguments),this.parts=new r1(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(B`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(B`/uploads/${e}/complete`,{body:n,...r})}}Cg.Parts=r1;const g2=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class s1 extends ee{create(e,n,r){return this._client.post(B`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(B`/vector_stores/${s}/file_batches/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(B`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(B`/vector_stores/${s}/file_batches/${e}/files`,He,{query:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async poll(e,n,r){var i;const s=Y([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const{data:o,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(o.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=a.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await _l(u);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(i,n.length),a=this._client,u=n.values(),c=[...r];async function h(p){for(let g of p){const S=await a.files.create({file:g,purpose:"assistants"},s);c.push(S.id)}}const f=Array(o).fill(u).map(h);return await g2(f),await this.createAndPoll(e,{file_ids:c})}}class i1 extends ee{create(e,n,r){return this._client.post(B`/vector_stores/${e}/files`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(B`/vector_stores/${s}/files/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(B`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e,n={},r){return this._client.getAPIList(B`/vector_stores/${e}/files`,He,{query:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(B`/vector_stores/${s}/files/${e}`,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){var i;const s=Y([r==null?void 0:r.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((i=r==null?void 0:r.pollIntervalMs)==null?void 0:i.toString())??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),a=o.data;switch(a.status){case"in_progress":let u=5e3;if(r!=null&&r.pollIntervalMs)u=r.pollIntervalMs;else{const c=o.response.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(u=h)}}await _l(u);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(B`/vector_stores/${s}/files/${e}/content`,Ch,{...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class bh extends ee{constructor(){super(...arguments),this.files=new i1(this._client),this.fileBatches=new s1(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(e,n){return this._client.get(B`/vector_stores/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(e,n,r){return this._client.post(B`/vector_stores/${e}`,{body:n,...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",He,{query:e,...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(e,n){return this._client.delete(B`/vector_stores/${e}`,{...n,headers:Y([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}search(e,n,r){return this._client.getAPIList(B`/vector_stores/${e}/search`,Ch,{body:n,method:"post",...r,headers:Y([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}bh.Files=i1;bh.FileBatches=s1;var gi,o1,Wu;class a1 extends ee{constructor(){super(...arguments),gi.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");L(this,gi,"m",o1).call(this,r);const i=Y([n]).values,o=L(this,gi,"m",Wu).call(this,i,"webhook-signature"),a=L(this,gi,"m",Wu).call(this,i,"webhook-timestamp"),u=L(this,gi,"m",Wu).call(this,i,"webhook-id"),c=parseInt(a,10);if(isNaN(c))throw new ea("Invalid webhook timestamp format");const h=Math.floor(Date.now()/1e3);if(h-c>s)throw new ea("Webhook timestamp is too old");if(c>h+s)throw new ea("Webhook timestamp is too new");const f=o.split(" ").map(A=>A.startsWith("v1,")?A.substring(3):A),p=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=u?`${u}.${a}.${e}`:`${a}.${e}`,S=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const A of f)try{const k=Buffer.from(A,"base64");if(await crypto.subtle.verify("HMAC",S,k,new TextEncoder().encode(g)))return}catch{continue}throw new ea("The given webhook signature does not match the expected signature")}}gi=new WeakSet,o1=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Wu=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var Lp,kg,Hu,l1;class ue{constructor({baseURL:e=di("OPENAI_BASE_URL"),apiKey:n=di("OPENAI_API_KEY"),organization:r=di("OPENAI_ORG_ID")??null,project:s=di("OPENAI_PROJECT_ID")??null,webhookSecret:i=di("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(Lp.add(this),Hu.set(this,void 0),this.completions=new $T(this),this.chat=new pg(this),this.embeddings=new BT(this),this.files=new WT(this),this.images=new YT(this),this.audio=new vl(this),this.moderations=new JT(this),this.models=new XT(this),this.fineTuning=new uo(this),this.graders=new Tg(this),this.vectorStores=new bh(this),this.webhooks=new a1(this),this.beta=new El(this),this.batches=new OT(this),this.uploads=new Cg(this),this.responses=new Rg(this),this.realtime=new Ph(this),this.conversations=new _g(this),this.evals=new vg(this),this.containers=new yg(this),n===void 0)throw new J("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:s,webhookSecret:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&gb())throw new J(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??kg.DEFAULT_TIMEOUT,this.logger=a.logger??console;const u="warn";this.logLevel=u,this.logLevel=rv(a.logLevel,"ClientOptions.logLevel",this)??rv(di("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Eb(),re(this,Hu,Sb),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Y([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return xb(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${pi}`}defaultIdempotencyKey(){return`stainless-node-retry-${MS()}`}makeStatusError(e,n,r,s){return ft.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof J?r:new J(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new J(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!L(this,Lp,"m",l1).call(this)&&r||this.baseURL,i=hb(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return db(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Rh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var I,y;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:o,url:a,timeout:u}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(o,{url:a,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=r===void 0?"":`, retryOf: ${r}`,f=Date.now();if(at(this).debug(`[${c}] sending request`,Is({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:o.headers})),(I=s.signal)!=null&&I.aborted)throw new an;const p=new AbortController,g=await this.fetchWithTimeout(a,o,u,p).catch(Tp),S=Date.now();if(g instanceof globalThis.Error){const v=`retrying, ${n} attempts remaining`;if((y=s.signal)!=null&&y.aborted)throw new an;const P=Sp(g)||/timed? ?out/i.test(String(g)+("cause"in g?String(g.cause):""));if(n)return at(this).info(`[${c}] connection ${P?"timed out":"failed"} - ${v}`),at(this).debug(`[${c}] connection ${P?"timed out":"failed"} (${v})`,Is({retryOfRequestLogID:r,url:a,durationMs:S-f,message:g.message})),this.retryRequest(s,n,r??c);throw at(this).info(`[${c}] connection ${P?"timed out":"failed"} - error; no more retries left`),at(this).debug(`[${c}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Is({retryOfRequestLogID:r,url:a,durationMs:S-f,message:g.message})),P?new og:new Th({cause:g})}const A=[...g.headers.entries()].filter(([v])=>v==="x-request-id").map(([v,P])=>", "+v+": "+JSON.stringify(P)).join(""),k=`[${c}${h}${A}] ${o.method} ${a} ${g.ok?"succeeded":"failed"} with status ${g.status} in ${S-f}ms`;if(!g.ok){const v=await this.shouldRetry(g);if(n&&v){const E=`retrying, ${n} attempts remaining`;return await Ib(g.body),at(this).info(`${k} - ${E}`),at(this).debug(`[${c}] response error (${E})`,Is({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:S-f})),this.retryRequest(s,n,r??c,g.headers)}const P=v?"error; no more retries left":"error; not retryable";at(this).info(`${k} - ${P}`);const V=await g.text().catch(E=>Tp(E).message),F=mb(V),_=F?void 0:V;throw at(this).debug(`[${c}] response error (${P})`,Is({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,message:_,durationMs:Date.now()-f})),this.makeStatusError(g.status,F,_,g.headers)}return at(this).info(k),at(this).debug(`[${c}] response start`,Is({retryOfRequestLogID:r,url:g.url,status:g.status,headers:g.headers,durationMs:S-f})),{response:g,options:s,controller:p,requestLogID:c,retryOfRequestLogID:r,startTime:f}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Fb(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:o,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,h={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...a};o&&(h.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const o=s==null?void 0:s.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(i=u)}const a=s==null?void 0:s.get("retry-after");if(a&&!i){const u=parseFloat(a);Number.isNaN(u)?i=Date.parse(a)-Date.now():i=u*1e3}if(!(i&&0<=i&&i<60*1e3)){const u=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,u)}return await _l(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:o,defaultBaseURL:a}=r,u=this.buildURL(i,o,a);"timeout"in r&&pb("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:h}=this.buildBody({options:r}),f=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:f,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"},...h&&{body:h},...this.fetchOptions??{},...r.fetchOptions??{}},url:u,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=Y([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...vb(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Y([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:QS(e)}:L(this,Hu,"f").call(this,{body:e,headers:r})}}kg=ue,Hu=new WeakMap,Lp=new WeakSet,l1=function(){return this.baseURL!=="https://api.openai.com/v1"};ue.OpenAI=kg;ue.DEFAULT_TIMEOUT=6e5;ue.OpenAIError=J;ue.APIError=ft;ue.APIConnectionError=Th;ue.APIConnectionTimeoutError=og;ue.APIUserAbortError=an;ue.NotFoundError=US;ue.ConflictError=jS;ue.RateLimitError=zS;ue.BadRequestError=VS;ue.AuthenticationError=FS;ue.InternalServerError=WS;ue.PermissionDeniedError=$S;ue.UnprocessableEntityError=BS;ue.InvalidWebhookSignatureError=ea;ue.toFile=Hb;ue.Completions=$T;ue.Chat=pg;ue.Embeddings=BT;ue.Files=WT;ue.Images=YT;ue.Audio=vl;ue.Moderations=JT;ue.Models=XT;ue.FineTuning=uo;ue.Graders=Tg;ue.VectorStores=bh;ue.Webhooks=a1;ue.Beta=El;ue.Batches=OT;ue.Uploads=Cg;ue.Responses=Rg;ue.Realtime=Ph;ue.Conversations=_g;ue.Evals=vg;ue.Containers=yg;var ds={exports:{}};const y2={},_2=Object.freeze(Object.defineProperty({__proto__:null,default:y2},Symbol.toStringTag,{value:"Module"})),Nh=JC(_2),w2="17.2.3",v2={version:w2};var Vs={};const Mp=Nh,Vc=Nh,E2=Nh,I2=Nh,S2=v2,xg=S2.version,vv=[" encrypt with Dotenvx: https://dotenvx.com"," prevent committing .env to code: https://dotenvx.com/precommit"," prevent building .env in docker: https://dotenvx.com/prebuild"," add observability to secrets: https://dotenvx.com/ops"," sync secrets across teammates & machines: https://dotenvx.com/ops"," backup and recover secrets: https://dotenvx.com/ops"," audit secrets and track compliance: https://dotenvx.com/ops"," add secrets lifecycle management: https://dotenvx.com/ops"," add access controls to secrets: https://dotenvx.com/ops","  run anywhere with `dotenvx run -- yourcommand`","  specify custom .env file path with { path: '/custom/path/.env' }","  enable debug logging with { debug: true }","  override existing env vars with { override: true }","  suppress all logs with { quiet: true }","  write to custom object with { processEnv: myObject }","  load multiple .env files with { path: ['.env.local', '.env'] }"];function T2(){return vv[Math.floor(Math.random()*vv.length)]}function Di(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function A2(){return process.stdout.isTTY}function R2(t){return A2()?`\x1B[2m${t}\x1B[0m`:t}const C2=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function k2(t){const e={};let n=t.toString();n=n.replace(/\r\n?/mg,`
`);let r;for(;(r=C2.exec(n))!=null;){const s=r[1];let i=r[2]||"";i=i.trim();const o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[s]=i}return e}function x2(t){t=t||{};const e=h1(t);t.path=e;const n=Je.configDotenv(t);if(!n.parsed){const o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}const r=c1(t).split(","),s=r.length;let i;for(let o=0;o<s;o++)try{const a=r[o].trim(),u=b2(n,a);i=Je.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=s)throw a}return Je.parse(i)}function P2(t){console.error(`[dotenv@${xg}][WARN] ${t}`)}function Ca(t){console.log(`[dotenv@${xg}][DEBUG] ${t}`)}function u1(t){console.log(`[dotenv@${xg}] ${t}`)}function c1(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:Vs.DOTENV_KEY&&Vs.DOTENV_KEY.length>0?Vs.DOTENV_KEY:""}function b2(t,e){let n;try{n=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){const u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}const r=n.password;if(!r){const a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}const s=n.searchParams.get("environment");if(!s){const a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}const i=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[i];if(!o){const a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:r}}function h1(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(const n of t.path)Mp.existsSync(n)&&(e=n.endsWith(".vault")?n:`${n}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=Vc.resolve(process.cwd(),".env.vault");return Mp.existsSync(e)?e:null}function Ev(t){return t[0]==="~"?Vc.join(E2.homedir(),t.slice(1)):t}function N2(t){const e=Di(Vs.DOTENV_CONFIG_DEBUG||t&&t.debug),n=Di(Vs.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!n)&&u1("Loading env from encrypted .env.vault");const r=Je._parseVault(t);let s=Vs;return t&&t.processEnv!=null&&(s=t.processEnv),Je.populate(s,r,t),{parsed:r}}function O2(t){const e=Vc.resolve(process.cwd(),".env");let n="utf8",r=Vs;t&&t.processEnv!=null&&(r=t.processEnv);let s=Di(r.DOTENV_CONFIG_DEBUG||t&&t.debug),i=Di(r.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?n=t.encoding:s&&Ca("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Ev(t.path)];else{o=[];for(const h of t.path)o.push(Ev(h))}let a;const u={};for(const h of o)try{const f=Je.parse(Mp.readFileSync(h,{encoding:n}));Je.populate(u,f,t)}catch(f){s&&Ca(`Failed to load ${h} ${f.message}`),a=f}const c=Je.populate(r,u,t);if(s=Di(r.DOTENV_CONFIG_DEBUG||s),i=Di(r.DOTENV_CONFIG_QUIET||i),s||!i){const h=Object.keys(c).length,f=[];for(const p of o)try{const g=Vc.relative(process.cwd(),p);f.push(g)}catch(g){s&&Ca(`Failed to load ${p} ${g.message}`),a=g}u1(`injecting env (${h}) from ${f.join(",")} ${R2(`-- tip: ${T2()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function D2(t){if(c1(t).length===0)return Je.configDotenv(t);const e=h1(t);return e?Je._configVault(t):(P2(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Je.configDotenv(t))}function L2(t,e){const n=Buffer.from(e.slice(-64),"hex");let r=Buffer.from(t,"base64");const s=r.subarray(0,12),i=r.subarray(-16);r=r.subarray(12,-16);try{const o=I2.createDecipheriv("aes-256-gcm",n,s);return o.setAuthTag(i),`${o.update(r)}${o.final()}`}catch(o){const a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){const h=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw h.code="INVALID_DOTENV_KEY",h}else if(c){const h=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw h.code="DECRYPTION_FAILED",h}else throw o}}function M2(t,e,n={}){const r=!!(n&&n.debug),s=!!(n&&n.override),i={};if(typeof e!="object"){const o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(const o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(s===!0&&(t[o]=e[o],i[o]=e[o]),r&&Ca(s===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],i[o]=e[o]);return i}const Je={configDotenv:O2,_configVault:N2,_parseVault:x2,config:D2,decrypt:L2,parse:k2,populate:M2};ds.exports.configDotenv=Je.configDotenv;ds.exports._configVault=Je._configVault;ds.exports._parseVault=Je._parseVault;ds.exports.config=Je.config;ds.exports.decrypt=Je.decrypt;ds.exports.parse=Je.parse;ds.exports.populate=Je.populate;ds.exports=Je;async function Iv(t,e){var n,r,s,i;try{const o=localStorage.getItem("openai_api_key");console.log("Current API Key:",o);const u=await new ue({apiKey:o,dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-4.1-nano",messages:[{role:"system",content:t},{role:"user",content:e}]});return console.log(((r=(n=u.choices[0].message)==null?void 0:n.content)==null?void 0:r.trim())||""),((i=(s=u.choices[0].message)==null?void 0:s.content)==null?void 0:i.trim())||""}catch(o){console.error("Error calling GPT:",o.message||o)}return"ERROR"}/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sv="popstate";function V2(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Vp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:el(s)}return $2(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function In(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F2(){return Math.random().toString(36).substring(2,10)}function Tv(t,e){return{usr:t.state,key:t.key,idx:e}}function Vp(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:n,key:e&&e.key||r||F2()}}function el({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let k=h(),I=k==null?null:k-c;c=k,u&&u({action:a,location:A.location,delta:I})}function p(k,I){a="PUSH";let y=Vp(A.location,k,I);c=h()+1;let v=Tv(y,c),P=A.createHref(y);try{o.pushState(v,"",P)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(P)}i&&u&&u({action:a,location:A.location,delta:1})}function g(k,I){a="REPLACE";let y=Vp(A.location,k,I);c=h();let v=Tv(y,c),P=A.createHref(y);o.replaceState(v,"",P),i&&u&&u({action:a,location:A.location,delta:0})}function S(k){return U2(k)}let A={get action(){return a},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Sv,f),u=k,()=>{s.removeEventListener(Sv,f),u=null}},createHref(k){return e(s,k)},createURL:S,encodeLocation(k){let I=S(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:g,go(k){return o.go(k)}};return A}function U2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:el(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function d1(t,e,n="/"){return j2(t,e,n,!1)}function j2(t,e,n,r){let s=typeof e=="string"?co(e):e,i=pr(s.pathname||"/",n);if(i==null)return null;let o=f1(t);B2(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Z2(i);a=X2(o[u],c,r)}return a}function f1(t,e=[],n=[],r="",s=!1){let i=(o,a,u=s,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;Pe(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=or([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(Pe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),f1(o.children,e,p,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Q2(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of p1(o.path))i(o,a,!0,c)}),e}function p1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=p1(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function B2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Y2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var z2=/^:[\w-]+$/,W2=3,H2=2,q2=1,K2=10,G2=-2,Av=t=>t==="*";function Q2(t,e){let n=t.split("/"),r=n.length;return n.some(Av)&&(r+=G2),e&&(r+=H2),n.filter(s=>!Av(s)).reduce((s,i)=>s+(z2.test(i)?W2:i===""?q2:K2),r)}function Y2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function X2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Fc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Fc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:or([i,f.pathname]),pathnameBase:rN(or([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=or([i,f.pathnameBase]))}return o}function Fc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=J2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let S=a[p]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function J2(t,e=!1,n=!0){In(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Z2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return In(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function pr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function eN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?co(t):t;return{pathname:n?n.startsWith("/")?n:tN(n,e):e,search:sN(r),hash:iN(s)}}function tN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sf(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pg(t){let e=nN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function bg(t,e,n,r=!1){let s;typeof t=="string"?s=co(t):(s={...t},Pe(!s.pathname||!s.pathname.includes("?"),sf("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),sf("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),sf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=eN(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var or=t=>t.join("/").replace(/\/\/+/g,"/"),rN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var m1=["POST","PUT","PATCH","DELETE"];new Set(m1);var aN=["GET",...m1];new Set(aN);var ho=O.createContext(null);ho.displayName="DataRouter";var Oh=O.createContext(null);Oh.displayName="DataRouterState";O.createContext(!1);var g1=O.createContext({isTransitioning:!1});g1.displayName="ViewTransition";var lN=O.createContext(new Map);lN.displayName="Fetchers";var uN=O.createContext(null);uN.displayName="Await";var An=O.createContext(null);An.displayName="Navigation";var Il=O.createContext(null);Il.displayName="Location";var Rn=O.createContext({outlet:null,matches:[],isDataRoute:!1});Rn.displayName="Route";var Ng=O.createContext(null);Ng.displayName="RouteError";function cN(t,{relative:e}={}){Pe(fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(An),{hash:s,pathname:i,search:o}=Sl(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:or([n,i])),r.createHref({pathname:a,search:o,hash:s})}function fo(){return O.useContext(Il)!=null}function Qn(){return Pe(fo(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Il).location}var y1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _1(t){O.useContext(An).static||O.useLayoutEffect(t)}function po(){let{isDataRoute:t}=O.useContext(Rn);return t?TN():hN()}function hN(){Pe(fo(),"useNavigate() may be used only in the context of a <Router> component.");let t=O.useContext(ho),{basename:e,navigator:n}=O.useContext(An),{matches:r}=O.useContext(Rn),{pathname:s}=Qn(),i=JSON.stringify(Pg(r)),o=O.useRef(!1);return _1(()=>{o.current=!0}),O.useCallback((u,c={})=>{if(In(o.current,y1),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=bg(u,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:or([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,i,s,t])}O.createContext(null);function dN(){let{matches:t}=O.useContext(Rn),e=t[t.length-1];return e?e.params:{}}function Sl(t,{relative:e}={}){let{matches:n}=O.useContext(Rn),{pathname:r}=Qn(),s=JSON.stringify(Pg(n));return O.useMemo(()=>bg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function fN(t,e){return w1(t,e)}function w1(t,e,n,r,s){var y;Pe(fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=O.useContext(An),{matches:o}=O.useContext(Rn),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let v=f&&f.path||"";v1(c,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let p=Qn(),g;if(e){let v=typeof e=="string"?co(e):e;Pe(h==="/"||((y=v.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=p;let S=g.pathname||"/",A=S;if(h!=="/"){let v=h.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(v.length).join("/")}let k=d1(t,{pathname:A});In(f||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),In(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=_N(k&&k.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:or([h,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:or([h,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,s);return e&&I?O.createElement(Il.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},I):I}function pN(){let t=SN(),e=oN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:i},"ErrorBoundary")," or"," ",O.createElement("code",{style:i},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,o)}var mN=O.createElement(pN,null),gN=class extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?O.createElement(Rn.Provider,{value:this.props.routeContext},O.createElement(Ng.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yN({routeContext:t,match:e,children:n}){let r=O.useContext(ho);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(Rn.Provider,{value:t},n)}function _N(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let c=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Pe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,u=-1;if(n)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,h,f)=>{let p,g=!1,S=null,A=null;n&&(p=o&&h.route.id?o[h.route.id]:void 0,S=h.route.errorElement||mN,a&&(u<0&&f===0?(v1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,A=null):u===f&&(g=!0,A=h.route.hydrateFallbackElement||null)));let k=e.concat(i.slice(0,f+1)),I=()=>{let y;return p?y=S:g?y=A:h.route.Component?y=O.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,O.createElement(yN,{match:h,routeContext:{outlet:c,matches:k,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?O.createElement(gN,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:I(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:r}):I()},null)}function Og(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(t){let e=O.useContext(ho);return Pe(e,Og(t)),e}function vN(t){let e=O.useContext(Oh);return Pe(e,Og(t)),e}function EN(t){let e=O.useContext(Rn);return Pe(e,Og(t)),e}function Dg(t){let e=EN(t),n=e.matches[e.matches.length-1];return Pe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function IN(){return Dg("useRouteId")}function SN(){var r;let t=O.useContext(Ng),e=vN("useRouteError"),n=Dg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function TN(){let{router:t}=wN("useNavigate"),e=Dg("useNavigate"),n=O.useRef(!1);return _1(()=>{n.current=!0}),O.useCallback(async(s,i={})=>{In(n.current,y1),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var Rv={};function v1(t,e,n){!e&&!Rv[t]&&(Rv[t]=!0,In(!1,n))}O.memo(AN);function AN({routes:t,future:e,state:n,unstable_onError:r}){return w1(t,void 0,n,r,e)}function RN({to:t,replace:e,state:n,relative:r}){Pe(fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=O.useContext(An);In(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=O.useContext(Rn),{pathname:o}=Qn(),a=po(),u=bg(t,Pg(i),o,r==="path"),c=JSON.stringify(u);return O.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Ss(t){Pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Pe(!fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=O.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=co(n));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=n,g=O.useMemo(()=>{let S=pr(u,o);return S==null?null:{location:{pathname:S,search:c,hash:h,state:f,key:p},navigationType:r}},[o,u,c,h,f,p,r]);return In(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:O.createElement(An.Provider,{value:a},O.createElement(Il.Provider,{children:e,value:g}))}function kN({children:t,location:e}){return fN(Fp(t),e)}function Fp(t,e=[]){let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,Fp(r.props.children,i));return}Pe(r.type===Ss,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fp(r.props.children,i)),n.push(o)}),n}var qu="get",Ku="application/x-www-form-urlencoded";function Dh(t){return t!=null&&typeof t.tagName=="string"}function xN(t){return Dh(t)&&t.tagName.toLowerCase()==="button"}function PN(t){return Dh(t)&&t.tagName.toLowerCase()==="form"}function bN(t){return Dh(t)&&t.tagName.toLowerCase()==="input"}function NN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ON(t,e){return t.button===0&&(!e||e==="_self")&&!NN(t)}var yu=null;function DN(){if(yu===null)try{new FormData(document.createElement("form"),0),yu=!1}catch{yu=!0}return yu}var LN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function of(t){return t!=null&&!LN.has(t)?(In(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ku}"`),null):t}function MN(t,e){let n,r,s,i,o;if(PN(t)){let a=t.getAttribute("action");r=a?pr(a,e):null,n=t.getAttribute("method")||qu,s=of(t.getAttribute("enctype"))||Ku,i=new FormData(t)}else if(xN(t)||bN(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?pr(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||qu,s=of(t.getAttribute("formenctype"))||of(a.getAttribute("enctype"))||Ku,i=new FormData(a,t),!DN()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,f)}}else{if(Dh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qu,r=null,s=Ku,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&pr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function FN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $N(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UN(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await FN(i,n);return o.links?o.links():[]}return[]}));return WN(r.flat(1).filter($N).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Cv(t,e,n,r,s,i){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var h;return n[c].pathname!==u.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):i==="data"?e.filter((u,c)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function jN(t,e,{includeHydrateFallback:n}={}){return BN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function BN(t){return[...new Set(t)]}function zN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function WN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(zN(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function E1(){let t=O.useContext(ho);return Lg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HN(){let t=O.useContext(Oh);return Lg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mg=O.createContext(void 0);Mg.displayName="FrameworkContext";function I1(){let t=O.useContext(Mg);return Lg(t,"You must render this element inside a <HydratedRouter> element"),t}function qN(t,e){let n=O.useContext(Mg),[r,s]=O.useState(!1),[i,o]=O.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=O.useRef(null);O.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=I=>{I.forEach(y=>{o(y.isIntersecting)})},k=new IntersectionObserver(A,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[t]),O.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let g=()=>{s(!0)},S=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Go(a,g),onBlur:Go(u,S),onMouseEnter:Go(c,g),onMouseLeave:Go(h,S),onTouchStart:Go(f,g)}]:[!1,p,{}]}function Go(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function KN({page:t,...e}){let{router:n}=E1(),r=O.useMemo(()=>d1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?O.createElement(QN,{page:t,matches:r,...e}):null}function GN(t){let{manifest:e,routeModules:n}=I1(),[r,s]=O.useState([]);return O.useEffect(()=>{let i=!1;return UN(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function QN({page:t,matches:e,...n}){let r=Qn(),{manifest:s,routeModules:i}=I1(),{basename:o}=E1(),{loaderData:a,matches:u}=HN(),c=O.useMemo(()=>Cv(t,e,u,s,r,"data"),[t,e,u,s,r]),h=O.useMemo(()=>Cv(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=O.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,A=!1;if(e.forEach(I=>{var v;let y=s.routes[I.route.id];!y||!y.hasLoader||(!c.some(P=>P.route.id===I.route.id)&&I.route.id in a&&((v=i[I.route.id])!=null&&v.shouldRevalidate)||y.hasClientLoader?A=!0:S.add(I.route.id))}),S.size===0)return[];let k=VN(t,o,"data");return A&&S.size>0&&k.searchParams.set("_routes",e.filter(I=>S.has(I.route.id)).map(I=>I.route.id).join(",")),[k.pathname+k.search]},[o,a,r,s,c,e,t,i]),p=O.useMemo(()=>jN(h,s),[h,s]),g=GN(h);return O.createElement(O.Fragment,null,f.map(S=>O.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),p.map(S=>O.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),g.map(({key:S,link:A})=>O.createElement("link",{key:S,nonce:n.nonce,...A})))}function YN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var S1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{S1&&(window.__reactRouterVersion="7.9.3")}catch{}function XN({basename:t,children:e,window:n}){let r=O.useRef();r.current==null&&(r.current=V2({window:n,v5Compat:!0}));let s=r.current,[i,o]=O.useState({action:s.action,location:s.location}),a=O.useCallback(u=>{O.startTransition(()=>o(u))},[o]);return O.useLayoutEffect(()=>s.listen(a),[s,a]),O.createElement(CN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var T1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mo=O.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:S}=O.useContext(An),A=typeof c=="string"&&T1.test(c),k,I=!1;if(typeof c=="string"&&A&&(k=c,S1))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),C=pr(R.pathname,S);R.origin===E.origin&&C!=null?c=C+R.search+R.hash:I=!0}catch{In(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=cN(c,{relative:s}),[v,P,V]=qN(r,p),F=tO(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||F(E)}let w=O.createElement("a",{...p,...V,href:k||y,onClick:I||i?e:_,ref:YN(g,P),target:u,"data-discover":!A&&n==="render"?"true":void 0});return v&&!A?O.createElement(O.Fragment,null,w,O.createElement(KN,{page:y})):w});mo.displayName="Link";var JN=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:u,...c},h){let f=Sl(o,{relative:c.relative}),p=Qn(),g=O.useContext(Oh),{navigator:S,basename:A}=O.useContext(An),k=g!=null&&oO(f)&&a===!0,I=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,y=p.pathname,v=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),v=v?v.toLowerCase():null,I=I.toLowerCase()),v&&A&&(v=pr(v,A)||v);const P=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let V=y===I||!s&&y.startsWith(I)&&y.charAt(P)==="/",F=v!=null&&(v===I||!s&&v.startsWith(I)&&v.charAt(I.length)==="/"),_={isActive:V,isPending:F,isTransitioning:k},w=V?e:void 0,E;typeof r=="function"?E=r(_):E=[r,V?"active":null,F?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(_):i;return O.createElement(mo,{...c,"aria-current":w,className:E,ref:h,style:R,to:o,viewTransition:a},typeof u=="function"?u(_):u)});JN.displayName="NavLink";var ZN=O.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=qu,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let S=sO(),A=iO(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",I=typeof a=="string"&&T1.test(a),y=v=>{if(u&&u(v),v.defaultPrevented)return;v.preventDefault();let P=v.nativeEvent.submitter,V=(P==null?void 0:P.getAttribute("formmethod"))||o;S(P||v.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:s,state:i,relative:c,preventScrollReset:h,viewTransition:f})};return O.createElement("form",{ref:g,method:k,action:A,onSubmit:r?u:y,...p,"data-discover":!I&&t==="render"?"true":void 0})});ZN.displayName="Form";function eO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A1(t){let e=O.useContext(ho);return Pe(e,eO(t)),e}function tO(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=po(),u=Qn(),c=Sl(t,{relative:i});return O.useCallback(h=>{if(ON(h,e)){h.preventDefault();let f=n!==void 0?n:el(u)===el(c);a(t,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,a,c,n,r,e,t,s,i,o])}var nO=0,rO=()=>`__${String(++nO)}__`;function sO(){let{router:t}=A1("useSubmit"),{basename:e}=O.useContext(An),n=IN();return O.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:u,body:c}=MN(r,e);if(s.navigate===!1){let h=s.fetcherKey||rO();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function iO(t,{relative:e}={}){let{basename:n}=O.useContext(An),r=O.useContext(Rn);Pe(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Sl(t||".",{relative:e})},o=Qn();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:or([n,i.pathname])),el(i)}function oO(t,{relative:e}={}){let n=O.useContext(g1);Pe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=A1("useViewTransitionState"),s=Sl(t,{relative:e});if(!n.isTransitioning)return!1;let i=pr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=pr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fc(s.pathname,o)!=null||Fc(s.pathname,i)!=null}const aO=()=>{};var kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},C1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new uO;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cO=function(t){const e=R1(t);return C1.encodeByteArray(e,!0)},$c=function(t){return cO(t).replace(/\./g,"")},k1=function(t){try{return C1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=()=>hO().__FIREBASE_DEFAULTS__,fO=()=>{if(typeof process>"u"||typeof kv>"u")return;const t=kv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k1(t[1]);return e&&JSON.parse(e)},Lh=()=>{try{return aO()||dO()||fO()||pO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x1=t=>{var e,n;return(n=(e=Lh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mO=t=>{const e=x1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},P1=()=>{var t;return(t=Lh())==null?void 0:t.config},b1=t=>{var e;return(e=Lh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$c(JSON.stringify(n)),$c(JSON.stringify(o)),""].join(".")}const ka={};function _O(){const t={prod:[],emulator:[]};for(const e of Object.keys(ka))ka[e]?t.emulator.push(e):t.prod.push(e);return t}function wO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xv=!1;function O1(t,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||ka[t]===e||ka[t]||xv)return;ka[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=_O().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{xv=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=wO(r),g=n("text"),S=document.getElementById(g)||document.createElement("span"),A=n("learnmore"),k=document.getElementById(A)||document.createElement("a"),I=n("preprendIcon"),y=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;a(v),h(k,A);const P=c();u(y,I),v.append(y,S,k,P),document.body.appendChild(v)}i?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function EO(){var e;const t=(e=Lh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TO(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AO(){return!EO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L1(){try{return typeof indexedDB=="object"}catch{return!1}}function M1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function RO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CO,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}}class ei{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kO(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Cn(s,a,r)}}function kO(t,e){return t.replace(xO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xO=/\{\$([^}]+)}/g;function PO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ts(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pv(i)&&Pv(o)){if(!ts(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ua(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bO(t,e){const n=new NO(t,e);return n.subscribe.bind(n)}class NO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=af),s.error===void 0&&(s.error=af),s.complete===void 0&&(s.complete=af);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function af(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1e3,LO=2,MO=4*60*60*1e3,VO=.5;function bv(t,e=DO,n=LO){const r=e*Math.pow(n,t),s=Math.round(VO*r*(Math.random()-.5)*2);return Math.min(MO,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Sn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(t){return t===Ts?void 0:t}function UO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const BO={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},zO=de.INFO,WO={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},HO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=WO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=zO,this._logHandler=HO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const qO=(t,e)=>e.some(n=>t instanceof n);let Nv,Ov;function KO(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GO(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V1=new WeakMap,$p=new WeakMap,F1=new WeakMap,lf=new WeakMap,Vg=new WeakMap;function QO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&V1.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function YO(t){if($p.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$p.set(t,e)}let Up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $p.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XO(t){Up=t(Up)}function JO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(uf(this),e,...n);return F1.set(r,e.sort?e.sort():[e]),Qr(r)}:GO().includes(t)?function(...e){return t.apply(uf(this),e),Qr(V1.get(this))}:function(...e){return Qr(t.apply(uf(this),e))}}function ZO(t){return typeof t=="function"?JO(t):(t instanceof IDBTransaction&&YO(t),qO(t,KO())?new Proxy(t,Up):t)}function Qr(t){if(t instanceof IDBRequest)return QO(t);if(lf.has(t))return lf.get(t);const e=ZO(t);return e!==t&&(lf.set(t,e),Vg.set(e,t)),e}const uf=t=>Vg.get(t);function $1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Qr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Qr(o.result),u.oldVersion,u.newVersion,Qr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const eD=["get","getKey","getAll","getAllKeys","count"],tD=["put","add","delete","clear"],cf=new Map;function Dv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cf.get(e))return cf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eD.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return cf.set(e,i),i}XO(t=>({...t,get:(e,n,r)=>Dv(e,n)||t.get(e,n,r),has:(e,n)=>!!Dv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jp="@firebase/app",Lv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Mh("@firebase/app"),sD="@firebase/app-compat",iD="@firebase/analytics-compat",oD="@firebase/analytics",aD="@firebase/app-check-compat",lD="@firebase/app-check",uD="@firebase/auth",cD="@firebase/auth-compat",hD="@firebase/database",dD="@firebase/data-connect",fD="@firebase/database-compat",pD="@firebase/functions",mD="@firebase/functions-compat",gD="@firebase/installations",yD="@firebase/installations-compat",_D="@firebase/messaging",wD="@firebase/messaging-compat",vD="@firebase/performance",ED="@firebase/performance-compat",ID="@firebase/remote-config",SD="@firebase/remote-config-compat",TD="@firebase/storage",AD="@firebase/storage-compat",RD="@firebase/firestore",CD="@firebase/ai",kD="@firebase/firestore-compat",xD="firebase",PD="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="[DEFAULT]",bD={[jp]:"fire-core",[sD]:"fire-core-compat",[oD]:"fire-analytics",[iD]:"fire-analytics-compat",[lD]:"fire-app-check",[aD]:"fire-app-check-compat",[uD]:"fire-auth",[cD]:"fire-auth-compat",[hD]:"fire-rtdb",[dD]:"fire-data-connect",[fD]:"fire-rtdb-compat",[pD]:"fire-fn",[mD]:"fire-fn-compat",[gD]:"fire-iid",[yD]:"fire-iid-compat",[_D]:"fire-fcm",[wD]:"fire-fcm-compat",[vD]:"fire-perf",[ED]:"fire-perf-compat",[ID]:"fire-rc",[SD]:"fire-rc-compat",[TD]:"fire-gcs",[AD]:"fire-gcs-compat",[RD]:"fire-fst",[kD]:"fire-fst-compat",[CD]:"fire-vertex","fire-js":"fire-js",[xD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,ND=new Map,zp=new Map;function Mv(t,e){try{t.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qn(t){const e=t.name;if(zp.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,t);for(const n of Uc.values())Mv(n,t);for(const n of ND.values())Mv(n,t);return!0}function ti(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new ei("app","Firebase",OD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=PD;function Fg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Bp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Yr.create("bad-app-name",{appName:String(s)});if(n||(n=P1()),!n)throw Yr.create("no-options");const i=Uc.get(s);if(i){if(ts(n,i.options)&&ts(r,i.config))return i;throw Yr.create("duplicate-app",{appName:s})}const o=new jO(s);for(const u of zp.values())o.addComponent(u);const a=new DD(n,r,o);return Uc.set(s,a),a}function $g(t=Bp){const e=Uc.get(t);if(!e&&t===Bp&&P1())return Fg();if(!e)throw Yr.create("no-app",{appName:t});return e}function un(t,e,n){let r=bD[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(o.join(" "));return}qn(new Sn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-heartbeat-database",MD=1,tl="firebase-heartbeat-store";let hf=null;function U1(){return hf||(hf=$1(LD,MD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),hf}async function VD(t){try{const n=(await U1()).transaction(tl),r=await n.objectStore(tl).get(j1(t));return await n.done,r}catch(e){if(e instanceof Cn)mr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function Vv(t,e){try{const r=(await U1()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,j1(t)),await r.done}catch(n){if(n instanceof Cn)mr.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(r.message)}}}function j1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1024,$D=30;class UD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$D){const o=zD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:r,unsentEntries:s}=jD(this._heartbeatsCache.heartbeats),i=$c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mr.warn(n),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function jD(t,e=FD){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$v(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$v(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L1()?M1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $v(t){return $c(JSON.stringify({version:2,heartbeats:t})).length}function zD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){qn(new Sn("platform-logger",e=>new nD(e),"PRIVATE")),qn(new Sn("heartbeat",e=>new UD(e),"PRIVATE")),un(jp,Lv,t),un(jp,Lv,"esm2020"),un("fire-js","")}WD("");function B1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HD=B1,z1=new ei("auth","Firebase",B1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Mh("@firebase/auth");function qD(t,...e){jc.logLevel<=de.WARN&&jc.warn(`Auth (${yo}): ${t}`,...e)}function Gu(t,...e){jc.logLevel<=de.ERROR&&jc.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw Ug(t,...e)}function Un(t,...e){return Ug(t,...e)}function W1(t,e,n){const r={...HD(),[e]:n};return new ei("auth","Firebase",r).create(e,{appName:t.name})}function ar(t){return W1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ug(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return z1.create(t,...e)}function te(t,e,...n){if(!t)throw Ug(e,...n)}function nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gu(e),new Error(e)}function gr(t,e){t||nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function KD(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KD()||D1()||"connection"in navigator)?navigator.onLine:!0}function QD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=vO()||SO()}get(){return GD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JD=new Al(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ps(t,e,n,r,s={}){return q1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Tl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return IO()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&go(t.emulatorConfig.host)&&(c.credentials="include"),H1.fetch()(await K1(t,t.config.apiHost,n,a),c)})}async function q1(t,e,n){t._canInitEmulator=!1;const r={...YD,...e};try{const s=new eL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw _u(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw W1(t,h,c);Tn(t,h)}}catch(s){if(s instanceof Cn)throw s;Tn(t,"network-request-failed",{message:String(s)})}}async function Rl(t,e,n,r,s={}){const i=await ps(t,e,n,r,s);return"mfaPendingCredential"in i&&Tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function K1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?jg(t.config,s):`${t.config.apiScheme}://${s}`;return XD.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ZD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),JD.get())})}}function _u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Un(t,e,r);return s.customData._tokenResponse=n,s}function jv(t){return t!==void 0&&t.enterprise!==void 0}class tL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nL(t,e){return ps(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){return ps(t,"POST","/v1/accounts:delete",e)}async function Bc(t,e){return ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sL(t,e=!1){const n=Tt(t),r=await n.getIdToken(e),s=Bg(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:xa(df(s.auth_time)),issuedAtTime:xa(df(s.iat)),expirationTime:xa(df(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function df(t){return Number(t)*1e3}function Bg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const s=k1(n);return s?JSON.parse(s):(Gu("Failed to decode base64 JWT payload"),null)}catch(s){return Gu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bv(t){const e=Bg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&iL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xa(this.lastLoginAt),this.creationTime=xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await nl(t,Bc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?G1(s.providerUserInfo):[],o=lL(t.providerData,i),a=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function aL(t){const e=Tt(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function G1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){const n=await q1(t,{},async()=>{const r=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await K1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&go(t.emulatorConfig.host)&&(u.credentials="include"),H1.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cL(t,e){return ps(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await uL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new zi;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zi,this.toJSON())}_performRefresh(){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sL(this,e)}reload(){return aL(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(ar(this.auth));const e=await this.getIdToken();return await nl(this,rL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:S,stsTokenManager:A}=n;te(f&&A,e,"internal-error");const k=zi.fromJSON(this.name,A);te(typeof f=="string",e,"internal-error"),xr(r,e.name),xr(s,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof g=="boolean",e,"internal-error"),xr(i,e.name),xr(o,e.name),xr(a,e.name),xr(u,e.name),xr(c,e.name),xr(h,e.name);const I=new yn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:k,createdAt:c,lastLoginAt:h});return S&&Array.isArray(S)&&(I.providerData=S.map(y=>({...y}))),u&&(I._redirectEventId=u),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new zi;s.updateFromServerResponse(n);const i=new yn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?G1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new zi;a.updateFromIdToken(r);const u=new yn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function rr(t){gr(t instanceof Function,"Expected a class definition");let e=zv.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Q1.type="NONE";const Wv=Q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){return`firebase:${t}:${e}:${n}`}class Wi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Qu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bc(this.auth,{idToken:e}).catch(()=>{});return n?yn._fromGetAccountInfoResponse(this.auth,n,e):null}return yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wi(rr(Wv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||rr(Wv);const o=Qu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await Bc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await yn._fromGetAccountInfoResponse(e,p,h)}else f=yn._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Wi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Wi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tA(e))return"Blackberry";if(nA(e))return"Webos";if(X1(e))return"Safari";if((e.includes("chrome/")||J1(e))&&!e.includes("edge/"))return"Chrome";if(eA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y1(t=St()){return/firefox\//i.test(t)}function X1(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J1(t=St()){return/crios\//i.test(t)}function Z1(t=St()){return/iemobile/i.test(t)}function eA(t=St()){return/android/i.test(t)}function tA(t=St()){return/blackberry/i.test(t)}function nA(t=St()){return/webos/i.test(t)}function zg(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hL(t=St()){var e;return zg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dL(){return TO()&&document.documentMode===10}function rA(t=St()){return zg(t)||eA(t)||nA(t)||tA(t)||/windows phone/i.test(t)||Z1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e=[]){let n;switch(t){case"Browser":n=Hv(St());break;case"Worker":n=`${Hv(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e={}){return ps(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=6;class gL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new fL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Wi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bc(this,{idToken:e}),r=await yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(ar(this));const n=e?Tt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pL(this),n=new gL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ei("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Wi.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&qD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ni(t){return Tt(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=bO(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _L(t){Vh=t}function iA(t){return Vh.loadJS(t)}function wL(){return Vh.recaptchaEnterpriseScript}function vL(){return Vh.gapiScript}function EL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class IL{constructor(){this.enterprise=new SL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TL="recaptcha-enterprise",oA="NO_RECAPTCHA";class AL{constructor(e){this.type=TL,this.auth=ni(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{nL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new tL(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;jv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(oA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&jv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=wL();u.length!==0&&(u+=a),iA(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Kv(t,e,n,r=!1,s=!1){const i=new AL(t);let o;if(s)o=oA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Kv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Kv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t,e){const n=ti(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ts(i,e??{}))return s;Tn(s,"already-initialized")}return n.initialize({options:e})}function CL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kL(t,e,n){const r=ni(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=aA(e),{host:o,port:a}=xL(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(ts(c,r.config.emulator)&&ts(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,go(o)?(N1(`${i}//${o}${u}`),O1("Auth",!0)):PL()}function aA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xL(t){const e=aA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Gv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Gv(o)}}}function Gv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,n){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}async function bL(t,e){return ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return Rl(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function DL(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Wg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new rl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,n,"signInWithPassword",NL);case"emailLink":return OL(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,r,"signUpPassword",bL);case"emailLink":return DL(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t,e){return Rl(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="http://localhost";class Hs extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hi(e,n)}buildRequest(){const e={requestUri:LL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VL(t){const e=ua(ca(t)).link,n=e?ua(ca(e)).deep_link_id:null,r=ua(ca(t)).deep_link_id;return(r?ua(ca(r)).link:null)||r||n||e||t}class Hg{constructor(e){const n=ua(ca(e)),r=n.apiKey??null,s=n.oobCode??null,i=ML(n.mode??null);te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=VL(e);try{return new Hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,n){return rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Hg.parseLink(n);return te(r,"argument-error"),rl._fromEmailAndCode(e,r.code,r.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends lA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Cl{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Cl{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Cl{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e){return Rl(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yn._fromIdTokenResponse(e,r,s),o=Qv(r);return new qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qv(r);return new qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Cn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wc(e,n,r,s)}}function uA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,i,e,r):i})}async function $L(t,e,n=!1){const r=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e,n=!1){const{auth:r}=t;if(nn(r.app))return Promise.reject(ar(r));const s="reauthenticate";try{const i=await nl(t,uA(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Bg(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Tn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e,n=!1){if(nn(t.app))return Promise.reject(ar(t));const r="signIn",s=await uA(t,r,e),i=await qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jL(t,e){return cA(ni(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t){const e=ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BL(t,e,n){if(nn(t.app))return Promise.reject(ar(t));const r=ni(t),o=await qp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&hA(t),u}),a=await qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function zL(t,e,n){return nn(t.app)?Promise.reject(ar(t)):jL(Tt(t),_o.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){return Tt(t).setPersistence(e)}function WL(t,e,n,r){return Tt(t).onIdTokenChanged(e,n,r)}function HL(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function qg(t,e,n,r){return Tt(t).onAuthStateChanged(e,n,r)}function qL(t){return Tt(t).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=1e3,GL=10;class pA extends fA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pA.type="LOCAL";const Kg=pA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends fA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mA.type="SESSION";const gA=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await QL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Gg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function XL(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function JL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eM(){return yA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebaseLocalStorageDb",tM=1,qc="firebaseLocalStorage",wA="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(t,e){return t.transaction([qc],e?"readwrite":"readonly").objectStore(qc)}function nM(){const t=indexedDB.deleteDatabase(_A);return new kl(t).toPromise()}function Kp(){const t=indexedDB.open(_A,tM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qc,{keyPath:wA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qc)?e(r):(r.close(),await nM(),e(await Kp()))})})}async function Yv(t,e,n){const r=$h(t,!0).put({[wA]:e,value:n});return new kl(r).toPromise()}async function rM(t,e){const n=$h(t,!1).get(e),r=await new kl(n).toPromise();return r===void 0?null:r.value}function Xv(t,e){const n=$h(t,!0).delete(e);return new kl(n).toPromise()}const sM=800,iM=3;class vA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(eM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JL(),!this.activeServiceWorker)return;this.sender=new YL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await Yv(e,Hc,"1"),await Xv(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$h(s,!1).getAll();return new kl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vA.type="LOCAL";const oM=vA;new Al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e){return e?rr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lM(t){return cA(t.auth,new Qg(t),t.bypassAuthState)}function uM(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),UL(n,new Qg(t),t.bypassAuthState)}async function cM(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),$L(n,new Qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lM;case"linkViaPopup":case"linkViaRedirect":return cM;case"reauthViaPopup":case"reauthViaRedirect":return uM;default:Tn(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new Al(2e3,1e4);class Li extends EA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hM.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="pendingRedirect",Yu=new Map;class fM extends EA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const r=await pM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pM(t,e){const n=yM(e),r=gM(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mM(t,e){Yu.set(t._key(),e)}function gM(t){return rr(t._redirectPersistence)}function yM(t){return Qu(dM,t.config.apiKey,t.name)}async function _M(t,e,n=!1){if(nn(t.app))return Promise.reject(ar(t));const r=ni(t),s=aM(r,e),o=await new fM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=10*60*1e3;class vM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IA(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jv(e))}saveEventToCache(e){this.cachedEventUids.add(Jv(e)),this.lastProcessedEventTime=Date.now()}}function Jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e={}){return ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TM=/^https?/;async function AM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IM(t);for(const n of e)try{if(RM(n))return}catch{}Tn(t,"unauthorized-domain")}function RM(t){const e=Wp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TM.test(n))return!1;if(SM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new Al(3e4,6e4);function Zv(){const t=jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kM(t){return new Promise((e,n)=>{var s,i,o;function r(){Zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zv(),n(Un(t,"network-request-failed"))},timeout:CM.get()})}if((i=(s=jn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=jn().gapi)!=null&&o.load)r();else{const a=EL("iframefcb");return jn()[a]=()=>{gapi.load?r():n(Un(t,"network-request-failed"))},iA(`${vL()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function xM(t){return Xu=Xu||kM(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new Al(5e3,15e3),bM="__/auth/iframe",NM="emulator/auth/iframe",OM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LM(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jg(e,NM):`https://${t.config.authDomain}/${bM}`,r={apiKey:e.apiKey,appName:t.name,v:yo},s=DM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Tl(r).slice(1)}`}async function MM(t){const e=await xM(t),n=jn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:LM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),a=jn().setTimeout(()=>{i(o)},PM.get());function u(){jn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FM=500,$M=600,UM="_blank",jM="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BM(t,e,n,r=FM,s=$M){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...VM,width:r.toString(),height:s.toString(),top:i,left:o},c=St().toLowerCase();n&&(a=J1(c)?UM:n),Y1(c)&&(e=e||jM,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,S])=>`${p}${g}=${S},`,"");if(hL(c)&&a!=="_self")return zM(e||"",a),new e0(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new e0(f)}function zM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",HM="emulator/auth/handler",qM=encodeURIComponent("fac");async function t0(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yo,eventId:s};if(e instanceof lA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",PO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Cl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${qM}=${encodeURIComponent(u)}`:"";return`${KM(t)}?${Tl(a).slice(1)}${c}`}function KM({config:t}){return t.emulator?jg(t,HM):`https://${t.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="webStorageSupport";class GM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gA,this._completeRedirectFn=_M,this._overrideRedirectResult=mM}async _openPopup(e,n,r,s){var o;gr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await t0(e,n,r,Wp(),s);return BM(e,i,Gg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await t0(e,n,r,Wp(),s);return XL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(gr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MM(e),r=new vM(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ff,{type:ff},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ff];i!==void 0&&n(!!i),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rA()||X1()||zg()}}const QM=GM;var n0="@firebase/auth",r0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JM(t){qn(new Sn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sA(t)},c=new yL(r,s,i,u);return CL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qn(new Sn("auth-internal",e=>{const n=ni(e.getProvider("auth").getImmediate());return(r=>new YM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(n0,r0,XM(t)),un(n0,r0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=5*60,eV=b1("authIdTokenMaxAge")||ZM;let s0=null;const tV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eV)return;const s=n==null?void 0:n.token;s0!==s&&(s0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ks(t=$g()){const e=ti(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RL(t,{popupRedirectResolver:QM,persistence:[oM,Kg,gA]}),r=b1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=tV(i.toString());HL(n,o,()=>o(n.currentUser)),WL(n,a=>o(a))}}const s=x1("auth");return s&&kL(n,`http://${s}`),n}function nV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_L({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JM("Browser");var i0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,SA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,w){function E(){}E.prototype=w.prototype,_.F=w.prototype,_.prototype=new E,_.prototype.constructor=_,_.D=function(R,C,b){for(var x=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)x[ce-2]=arguments[ce];return w.prototype[C].apply(R,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,w,E){E||(E=0);const R=Array(16);if(typeof w=="string")for(var C=0;C<16;++C)R[C]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(C=0;C<16;++C)R[C]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=_.g[0],E=_.g[1],C=_.g[2];let b=_.g[3],x;x=w+(b^E&(C^b))+R[0]+3614090360&4294967295,w=E+(x<<7&4294967295|x>>>25),x=b+(C^w&(E^C))+R[1]+3905402710&4294967295,b=w+(x<<12&4294967295|x>>>20),x=C+(E^b&(w^E))+R[2]+606105819&4294967295,C=b+(x<<17&4294967295|x>>>15),x=E+(w^C&(b^w))+R[3]+3250441966&4294967295,E=C+(x<<22&4294967295|x>>>10),x=w+(b^E&(C^b))+R[4]+4118548399&4294967295,w=E+(x<<7&4294967295|x>>>25),x=b+(C^w&(E^C))+R[5]+1200080426&4294967295,b=w+(x<<12&4294967295|x>>>20),x=C+(E^b&(w^E))+R[6]+2821735955&4294967295,C=b+(x<<17&4294967295|x>>>15),x=E+(w^C&(b^w))+R[7]+4249261313&4294967295,E=C+(x<<22&4294967295|x>>>10),x=w+(b^E&(C^b))+R[8]+1770035416&4294967295,w=E+(x<<7&4294967295|x>>>25),x=b+(C^w&(E^C))+R[9]+2336552879&4294967295,b=w+(x<<12&4294967295|x>>>20),x=C+(E^b&(w^E))+R[10]+4294925233&4294967295,C=b+(x<<17&4294967295|x>>>15),x=E+(w^C&(b^w))+R[11]+2304563134&4294967295,E=C+(x<<22&4294967295|x>>>10),x=w+(b^E&(C^b))+R[12]+1804603682&4294967295,w=E+(x<<7&4294967295|x>>>25),x=b+(C^w&(E^C))+R[13]+4254626195&4294967295,b=w+(x<<12&4294967295|x>>>20),x=C+(E^b&(w^E))+R[14]+2792965006&4294967295,C=b+(x<<17&4294967295|x>>>15),x=E+(w^C&(b^w))+R[15]+1236535329&4294967295,E=C+(x<<22&4294967295|x>>>10),x=w+(C^b&(E^C))+R[1]+4129170786&4294967295,w=E+(x<<5&4294967295|x>>>27),x=b+(E^C&(w^E))+R[6]+3225465664&4294967295,b=w+(x<<9&4294967295|x>>>23),x=C+(w^E&(b^w))+R[11]+643717713&4294967295,C=b+(x<<14&4294967295|x>>>18),x=E+(b^w&(C^b))+R[0]+3921069994&4294967295,E=C+(x<<20&4294967295|x>>>12),x=w+(C^b&(E^C))+R[5]+3593408605&4294967295,w=E+(x<<5&4294967295|x>>>27),x=b+(E^C&(w^E))+R[10]+38016083&4294967295,b=w+(x<<9&4294967295|x>>>23),x=C+(w^E&(b^w))+R[15]+3634488961&4294967295,C=b+(x<<14&4294967295|x>>>18),x=E+(b^w&(C^b))+R[4]+3889429448&4294967295,E=C+(x<<20&4294967295|x>>>12),x=w+(C^b&(E^C))+R[9]+568446438&4294967295,w=E+(x<<5&4294967295|x>>>27),x=b+(E^C&(w^E))+R[14]+3275163606&4294967295,b=w+(x<<9&4294967295|x>>>23),x=C+(w^E&(b^w))+R[3]+4107603335&4294967295,C=b+(x<<14&4294967295|x>>>18),x=E+(b^w&(C^b))+R[8]+1163531501&4294967295,E=C+(x<<20&4294967295|x>>>12),x=w+(C^b&(E^C))+R[13]+2850285829&4294967295,w=E+(x<<5&4294967295|x>>>27),x=b+(E^C&(w^E))+R[2]+4243563512&4294967295,b=w+(x<<9&4294967295|x>>>23),x=C+(w^E&(b^w))+R[7]+1735328473&4294967295,C=b+(x<<14&4294967295|x>>>18),x=E+(b^w&(C^b))+R[12]+2368359562&4294967295,E=C+(x<<20&4294967295|x>>>12),x=w+(E^C^b)+R[5]+4294588738&4294967295,w=E+(x<<4&4294967295|x>>>28),x=b+(w^E^C)+R[8]+2272392833&4294967295,b=w+(x<<11&4294967295|x>>>21),x=C+(b^w^E)+R[11]+1839030562&4294967295,C=b+(x<<16&4294967295|x>>>16),x=E+(C^b^w)+R[14]+4259657740&4294967295,E=C+(x<<23&4294967295|x>>>9),x=w+(E^C^b)+R[1]+2763975236&4294967295,w=E+(x<<4&4294967295|x>>>28),x=b+(w^E^C)+R[4]+1272893353&4294967295,b=w+(x<<11&4294967295|x>>>21),x=C+(b^w^E)+R[7]+4139469664&4294967295,C=b+(x<<16&4294967295|x>>>16),x=E+(C^b^w)+R[10]+3200236656&4294967295,E=C+(x<<23&4294967295|x>>>9),x=w+(E^C^b)+R[13]+681279174&4294967295,w=E+(x<<4&4294967295|x>>>28),x=b+(w^E^C)+R[0]+3936430074&4294967295,b=w+(x<<11&4294967295|x>>>21),x=C+(b^w^E)+R[3]+3572445317&4294967295,C=b+(x<<16&4294967295|x>>>16),x=E+(C^b^w)+R[6]+76029189&4294967295,E=C+(x<<23&4294967295|x>>>9),x=w+(E^C^b)+R[9]+3654602809&4294967295,w=E+(x<<4&4294967295|x>>>28),x=b+(w^E^C)+R[12]+3873151461&4294967295,b=w+(x<<11&4294967295|x>>>21),x=C+(b^w^E)+R[15]+530742520&4294967295,C=b+(x<<16&4294967295|x>>>16),x=E+(C^b^w)+R[2]+3299628645&4294967295,E=C+(x<<23&4294967295|x>>>9),x=w+(C^(E|~b))+R[0]+4096336452&4294967295,w=E+(x<<6&4294967295|x>>>26),x=b+(E^(w|~C))+R[7]+1126891415&4294967295,b=w+(x<<10&4294967295|x>>>22),x=C+(w^(b|~E))+R[14]+2878612391&4294967295,C=b+(x<<15&4294967295|x>>>17),x=E+(b^(C|~w))+R[5]+4237533241&4294967295,E=C+(x<<21&4294967295|x>>>11),x=w+(C^(E|~b))+R[12]+1700485571&4294967295,w=E+(x<<6&4294967295|x>>>26),x=b+(E^(w|~C))+R[3]+2399980690&4294967295,b=w+(x<<10&4294967295|x>>>22),x=C+(w^(b|~E))+R[10]+4293915773&4294967295,C=b+(x<<15&4294967295|x>>>17),x=E+(b^(C|~w))+R[1]+2240044497&4294967295,E=C+(x<<21&4294967295|x>>>11),x=w+(C^(E|~b))+R[8]+1873313359&4294967295,w=E+(x<<6&4294967295|x>>>26),x=b+(E^(w|~C))+R[15]+4264355552&4294967295,b=w+(x<<10&4294967295|x>>>22),x=C+(w^(b|~E))+R[6]+2734768916&4294967295,C=b+(x<<15&4294967295|x>>>17),x=E+(b^(C|~w))+R[13]+1309151649&4294967295,E=C+(x<<21&4294967295|x>>>11),x=w+(C^(E|~b))+R[4]+4149444226&4294967295,w=E+(x<<6&4294967295|x>>>26),x=b+(E^(w|~C))+R[11]+3174756917&4294967295,b=w+(x<<10&4294967295|x>>>22),x=C+(w^(b|~E))+R[2]+718787259&4294967295,C=b+(x<<15&4294967295|x>>>17),x=E+(b^(C|~w))+R[9]+3951481745&4294967295,_.g[0]=_.g[0]+w&4294967295,_.g[1]=_.g[1]+(C+(x<<21&4294967295|x>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+b&4294967295}r.prototype.v=function(_,w){w===void 0&&(w=_.length);const E=w-this.blockSize,R=this.C;let C=this.h,b=0;for(;b<w;){if(C==0)for(;b<=E;)s(this,_,b),b+=this.blockSize;if(typeof _=="string"){for(;b<w;)if(R[C++]=_.charCodeAt(b++),C==this.blockSize){s(this,R),C=0;break}}else for(;b<w;)if(R[C++]=_[b++],C==this.blockSize){s(this,R),C=0;break}}this.h=C,this.o+=w},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var w=1;w<_.length-8;++w)_[w]=0;w=this.o*8;for(var E=_.length-8;E<_.length;++E)_[E]=w&255,w/=256;for(this.v(_),_=Array(16),w=0,E=0;E<4;++E)for(let R=0;R<32;R+=8)_[w++]=this.g[E]>>>R&255;return _};function i(_,w){var E=a;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=w(_)}function o(_,w){this.h=w;const E=[];let R=!0;for(let C=_.length-1;C>=0;C--){const b=_[C]|0;R&&b==w||(E[C]=b,R=!1)}this.g=E}var a={};function u(_){return-128<=_&&_<128?i(_,function(w){return new o([w|0],w<0?-1:0)}):new o([_|0],_<0?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return f;if(_<0)return k(c(-_));const w=[];let E=1;for(let R=0;_>=E;R++)w[R]=_/E|0,E*=4294967296;return new o(w,0)}function h(_,w){if(_.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(_.charAt(0)=="-")return k(h(_.substring(1),w));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=c(Math.pow(w,8));let R=f;for(let b=0;b<_.length;b+=8){var C=Math.min(8,_.length-b);const x=parseInt(_.substring(b,b+C),w);C<8?(C=c(Math.pow(w,C)),R=R.j(C).add(c(x))):(R=R.j(E),R=R.add(c(x)))}return R}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-k(this).m();let _=0,w=1;for(let E=0;E<this.g.length;E++){const R=this.i(E);_+=(R>=0?R:4294967296+R)*w,w*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(A(this))return"-"+k(this).toString(_);const w=c(Math.pow(_,6));var E=this;let R="";for(;;){const C=P(E,w).g;E=I(E,C.j(w));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(_);if(E=C,S(E))return b+R;for(;b.length<6;)b="0"+b;R=b+R}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(let w=0;w<_.g.length;w++)if(_.g[w]!=0)return!1;return!0}function A(_){return _.h==-1}t.l=function(_){return _=I(this,_),A(_)?-1:S(_)?0:1};function k(_){const w=_.g.length,E=[];for(let R=0;R<w;R++)E[R]=~_.g[R];return new o(E,~_.h).add(p)}t.abs=function(){return A(this)?k(this):this},t.add=function(_){const w=Math.max(this.g.length,_.g.length),E=[];let R=0;for(let C=0;C<=w;C++){let b=R+(this.i(C)&65535)+(_.i(C)&65535),x=(b>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);R=x>>>16,b&=65535,x&=65535,E[C]=x<<16|b}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(_,w){return _.add(k(w))}t.j=function(_){if(S(this)||S(_))return f;if(A(this))return A(_)?k(this).j(k(_)):k(k(this).j(_));if(A(_))return k(this.j(k(_)));if(this.l(g)<0&&_.l(g)<0)return c(this.m()*_.m());const w=this.g.length+_.g.length,E=[];for(var R=0;R<2*w;R++)E[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<_.g.length;C++){const b=this.i(R)>>>16,x=this.i(R)&65535,ce=_.i(C)>>>16,Ee=_.i(C)&65535;E[2*R+2*C]+=x*Ee,y(E,2*R+2*C),E[2*R+2*C+1]+=b*Ee,y(E,2*R+2*C+1),E[2*R+2*C+1]+=x*ce,y(E,2*R+2*C+1),E[2*R+2*C+2]+=b*ce,y(E,2*R+2*C+2)}for(_=0;_<w;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=w;_<2*w;_++)E[_]=0;return new o(E,0)};function y(_,w){for(;(_[w]&65535)!=_[w];)_[w+1]+=_[w]>>>16,_[w]&=65535,w++}function v(_,w){this.g=_,this.h=w}function P(_,w){if(S(w))throw Error("division by zero");if(S(_))return new v(f,f);if(A(_))return w=P(k(_),w),new v(k(w.g),k(w.h));if(A(w))return w=P(_,k(w)),new v(k(w.g),w.h);if(_.g.length>30){if(A(_)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var E=p,R=w;R.l(_)<=0;)E=V(E),R=V(R);var C=F(E,1),b=F(R,1);for(R=F(R,2),E=F(E,2);!S(R);){var x=b.add(R);x.l(_)<=0&&(C=C.add(E),b=x),R=F(R,1),E=F(E,1)}return w=I(_,C.j(w)),new v(C,w)}for(C=f;_.l(w)>=0;){for(E=Math.max(1,Math.floor(_.m()/w.m())),R=Math.ceil(Math.log(E)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),b=c(E),x=b.j(w);A(x)||x.l(_)>0;)E-=R,b=c(E),x=b.j(w);S(b)&&(b=p),C=C.add(b),_=I(_,x)}return new v(C,_)}t.B=function(_){return P(this,_).h},t.and=function(_){const w=Math.max(this.g.length,_.g.length),E=[];for(let R=0;R<w;R++)E[R]=this.i(R)&_.i(R);return new o(E,this.h&_.h)},t.or=function(_){const w=Math.max(this.g.length,_.g.length),E=[];for(let R=0;R<w;R++)E[R]=this.i(R)|_.i(R);return new o(E,this.h|_.h)},t.xor=function(_){const w=Math.max(this.g.length,_.g.length),E=[];for(let R=0;R<w;R++)E[R]=this.i(R)^_.i(R);return new o(E,this.h^_.h)};function V(_){const w=_.g.length+1,E=[];for(let R=0;R<w;R++)E[R]=_.i(R)<<1|_.i(R-1)>>>31;return new o(E,_.h)}function F(_,w){const E=w>>5;w%=32;const R=_.g.length-E,C=[];for(let b=0;b<R;b++)C[b]=w>0?_.i(b+E)>>>w|_.i(b+E+1)<<32-w:_.i(b+E);return new o(C,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,SA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Xr=o}).apply(typeof i0<"u"?i0:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TA,ha,AA,Ju,Gp,RA,CA,kA;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var D=l[T];if(!(D in m))break e;m=m[D]}l=l[l.length-1],T=m[l],d=d(T),d!=T&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(d){var m=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&m.push([T,d[T]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,m){return l.call.apply(l.bind,arguments)}function c(l,d,m){return c=u,c.apply(null,arguments)}function h(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function f(l,d){function m(){}m.prototype=d.prototype,l.Z=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(T,D,M){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return d.prototype[D].apply(T,z)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function g(l){const d=l.length;if(d>0){const m=Array(d);for(let T=0;T<d;T++)m[T]=l[T];return m}return[]}function S(l,d){for(let T=1;T<arguments.length;T++){const D=arguments[T];var m=typeof D;if(m=m!="object"?m:D?Array.isArray(D)?"array":m:"null",m=="array"||m=="object"&&typeof D.length=="number"){m=l.length||0;const M=D.length||0;l.length=m+M;for(let z=0;z<M;z++)l[m+z]=D[z]}else l.push(D)}}class A{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(l){o.setTimeout(()=>{throw l},0)}function I(){var l=_;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class y{constructor(){this.h=this.g=null}add(d,m){const T=v.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var v=new A(()=>new P,l=>l.reset());class P{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,F=!1,_=new y,w=()=>{const l=Promise.resolve(void 0);V=()=>{l.then(E)}};function E(){for(var l;l=I();){try{l.h.call(l.g)}catch(m){k(m)}var d=v;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var b=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return l}();function x(l){return/^[\s\xa0]*$/.test(l)}function ce(l,d){C.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}f(ce,C),ce.prototype.init=function(l,d){const m=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Ut=0;function Fe(l,d,m,T,D){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=D,this.key=++Ut,this.da=this.fa=!1}function W(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Q(l,d,m){for(const T in l)d.call(m,l[T],T,l)}function se(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function _e(l){const d={};for(const m in l)d[m]=l[m];return d}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(l,d){let m,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(m in T)l[m]=T[m];for(let M=0;M<K.length;M++)m=K[M],Object.prototype.hasOwnProperty.call(T,m)&&(l[m]=T[m])}}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,d,m,T,D){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const z=Ie(l,d,T,D);return z>-1?(d=l[z],m||(d.fa=!1)):(d=new Fe(d,this.src,M,!!T,D),d.fa=m,l.push(d)),d};function $e(l,d){const m=d.type;if(m in l.g){var T=l.g[m],D=Array.prototype.indexOf.call(T,d,void 0),M;(M=D>=0)&&Array.prototype.splice.call(T,D,1),M&&(W(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Ie(l,d,m,T){for(let D=0;D<l.length;++D){const M=l[D];if(!M.da&&M.listener==d&&M.capture==!!m&&M.ha==T)return D}return-1}var Zt="closure_lm_"+(Math.random()*1e6|0),td={};function Dy(l,d,m,T,D){if(Array.isArray(d)){for(let M=0;M<d.length;M++)Dy(l,d[M],m,T,D);return null}return m=Vy(m),l&&l[Ee]?l.J(d,m,a(T)?!!T.capture:!1,D):SC(l,d,m,!1,T,D)}function SC(l,d,m,T,D,M){if(!d)throw Error("Invalid event type");const z=a(D)?!!D.capture:!!D;let le=rd(l);if(le||(l[Zt]=le=new ye(l)),m=le.add(d,m,T,z,M),m.proxy)return m;if(T=TC(),m.proxy=T,T.src=l,T.listener=m,l.addEventListener)b||(D=z),D===void 0&&(D=!1),l.addEventListener(d.toString(),T,D);else if(l.attachEvent)l.attachEvent(My(d.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function TC(){function l(m){return d.call(l.src,l.listener,m)}const d=AC;return l}function Ly(l,d,m,T,D){if(Array.isArray(d))for(var M=0;M<d.length;M++)Ly(l,d[M],m,T,D);else T=a(T)?!!T.capture:!!T,m=Vy(m),l&&l[Ee]?(l=l.i,M=String(d).toString(),M in l.g&&(d=l.g[M],m=Ie(d,m,T,D),m>-1&&(W(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete l.g[M],l.h--)))):l&&(l=rd(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Ie(d,m,T,D)),(m=l>-1?d[l]:null)&&nd(m))}function nd(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ee])$e(d.i,l);else{var m=l.type,T=l.proxy;d.removeEventListener?d.removeEventListener(m,T,l.capture):d.detachEvent?d.detachEvent(My(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=rd(d))?($e(m,l),m.h==0&&(m.src=null,d[Zt]=null)):W(l)}}}function My(l){return l in td?td[l]:td[l]="on"+l}function AC(l,d){if(l.da)l=!0;else{d=new ce(d,this);const m=l.listener,T=l.ha||l.src;l.fa&&nd(l),l=m.call(T,d)}return l}function rd(l){return l=l[Zt],l instanceof ye?l:null}var sd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vy(l){return typeof l=="function"?l:(l[sd]||(l[sd]=function(d){return l.handleEvent(d)}),l[sd])}function mt(){R.call(this),this.i=new ye(this),this.M=this,this.G=null}f(mt,R),mt.prototype[Ee]=!0,mt.prototype.removeEventListener=function(l,d,m,T){Ly(this,l,d,m,T)};function At(l,d){var m,T=l.G;if(T)for(m=[];T;T=T.G)m.push(T);if(l=l.M,T=d.type||d,typeof d=="string")d=new C(d,l);else if(d instanceof C)d.target=d.target||l;else{var D=d;d=new C(T,l),G(d,D)}D=!0;let M,z;if(m)for(z=m.length-1;z>=0;z--)M=d.g=m[z],D=Dl(M,T,!0,d)&&D;if(M=d.g=l,D=Dl(M,T,!0,d)&&D,D=Dl(M,T,!1,d)&&D,m)for(z=0;z<m.length;z++)M=d.g=m[z],D=Dl(M,T,!1,d)&&D}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const m=l.g[d];for(let T=0;T<m.length;T++)W(m[T]);delete l.g[d],l.h--}}this.G=null},mt.prototype.J=function(l,d,m,T){return this.i.add(String(l),d,!1,m,T)},mt.prototype.K=function(l,d,m,T){return this.i.add(String(l),d,!0,m,T)};function Dl(l,d,m,T){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let M=0;M<d.length;++M){const z=d[M];if(z&&!z.da&&z.capture==m){const le=z.listener,qe=z.ha||z.src;z.fa&&$e(l.i,z),D=le.call(qe,T)!==!1&&D}}return D&&!T.defaultPrevented}function RC(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function Fy(l){l.g=RC(()=>{l.g=null,l.i&&(l.i=!1,Fy(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class CC extends R{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Fy(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function So(l){R.call(this),this.h=l,this.g={}}f(So,R);var $y=[];function Uy(l){Q(l.g,function(d,m){this.g.hasOwnProperty(m)&&nd(d)},l),l.g={}}So.prototype.N=function(){So.Z.N.call(this),Uy(this)},So.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var id=o.JSON.stringify,kC=o.JSON.parse,xC=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function jy(){}function By(){}var To={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function od(){C.call(this,"d")}f(od,C);function ad(){C.call(this,"c")}f(ad,C);var ms={},zy=null;function Ll(){return zy=zy||new mt}ms.Ia="serverreachability";function Wy(l){C.call(this,ms.Ia,l)}f(Wy,C);function Ao(l){const d=Ll();At(d,new Wy(d))}ms.STAT_EVENT="statevent";function Hy(l,d){C.call(this,ms.STAT_EVENT,l),this.stat=d}f(Hy,C);function Rt(l){const d=Ll();At(d,new Hy(d,l))}ms.Ja="timingevent";function qy(l,d){C.call(this,ms.Ja,l),this.size=d}f(qy,C);function Ro(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function Co(){this.g=!0}Co.prototype.ua=function(){this.g=!1};function PC(l,d,m,T,D,M){l.info(function(){if(l.g)if(M){var z="",le=M.split("&");for(let Se=0;Se<le.length;Se++){var qe=le[Se].split("=");if(qe.length>1){const et=qe[0];qe=qe[1];const xn=et.split("_");z=xn.length>=2&&xn[1]=="type"?z+(et+"="+qe+"&"):z+(et+"=redacted&")}}}else z=null;else z=M;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+d+`
`+m+`
`+z})}function bC(l,d,m,T,D,M,z){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+d+`
`+m+`
`+M+" "+z})}function ai(l,d,m,T){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+OC(l,m)+(T?" "+T:"")})}function NC(l,d){l.info(function(){return"TIMEOUT: "+d})}Co.prototype.info=function(){};function OC(l,d){if(!l.g)return d;if(!d)return null;try{const M=JSON.parse(d);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var m=M[l];if(!(m.length<2)){var T=m[1];if(Array.isArray(T)&&!(T.length<1)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(let z=1;z<T.length;z++)T[z]=""}}}}return id(M)}catch{return d}}var Ml={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ky={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gy;function ld(){}f(ld,jy),ld.prototype.g=function(){return new XMLHttpRequest},Gy=new ld;function ko(l){return encodeURIComponent(String(l))}function DC(l){var d=1;l=l.split(":");const m=[];for(;d>0&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function vr(l,d,m,T){this.j=l,this.i=d,this.l=m,this.S=T||1,this.V=new So(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qy}function Qy(){this.i=null,this.g="",this.h=!1}var Yy={},ud={};function cd(l,d,m){l.M=1,l.A=Fl(kn(d)),l.u=m,l.R=!0,Xy(l,null)}function Xy(l,d){l.F=Date.now(),Vl(l),l.B=kn(l.A);var m=l.B,T=l.S;Array.isArray(T)||(T=[String(T)]),c_(m.i,"t",T),l.C=0,m=l.j.L,l.h=new Qy,l.g=k_(l.j,m?d:null,!l.u),l.P>0&&(l.O=new CC(c(l.Y,l,l.g),l.P)),d=l.V,m=l.g,T=l.ba;var D="readystatechange";Array.isArray(D)||(D&&($y[0]=D.toString()),D=$y);for(let M=0;M<D.length;M++){const z=Dy(m,D[M],T||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=l.J?_e(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Ao(),PC(l.i,l.v,l.B,l.l,l.S,l.u)}vr.prototype.ba=function(l){l=l.target;const d=this.O;d&&Sr(l)==3?d.j():this.Y(l)},vr.prototype.Y=function(l){try{if(l==this.g)e:{const le=Sr(this.g),qe=this.g.ya(),Se=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||y_(this.g)))){this.K||le!=4||qe==7||(qe==8||Se<=0?Ao(3):Ao(2)),hd(this);var d=this.g.ca();this.X=d;var m=LC(this);if(this.o=d==200,bC(this.i,this.v,this.B,this.l,this.S,le,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,D=this.g;if((T=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(T)){var M=T;break t}}M=null}if(l=M)ai(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dd(this,l);else{this.o=!1,this.m=3,Rt(12),gs(this),xo(this);break e}}if(this.R){l=!0;let et;for(;!this.K&&this.C<m.length;)if(et=MC(this,m),et==ud){le==4&&(this.m=4,Rt(14),l=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Yy){this.m=4,Rt(15),ai(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else ai(this.i,this.l,et,null),dd(this,et);if(Jy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||m.length!=0||this.h.h||(this.m=1,Rt(16),l=!1),this.o=this.o&&l,!l)ai(this.i,this.l,m,"[Invalid Chunked Response]"),gs(this),xo(this);else if(m.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),vd(z),z.P=!0,Rt(11))}}else ai(this.i,this.l,m,null),dd(this,m);le==4&&gs(this),this.o&&!this.K&&(le==4?T_(this.j,this):(this.o=!1,Vl(this)))}else YC(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),gs(this),xo(this)}}}catch{}finally{}};function LC(l){if(!Jy(l))return l.g.la();const d=y_(l.g);if(d==="")return"";let m="";const T=d.length,D=Sr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return gs(l),xo(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<T;M++)l.h.h=!0,m+=l.h.i.decode(d[M],{stream:!(D&&M==T-1)});return d.length=0,l.h.g+=m,l.C=0,l.h.g}function Jy(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function MC(l,d){var m=l.C,T=d.indexOf(`
`,m);return T==-1?ud:(m=Number(d.substring(m,T)),isNaN(m)?Yy:(T+=1,T+m>d.length?ud:(d=d.slice(T,T+m),l.C=T+m,d)))}vr.prototype.cancel=function(){this.K=!0,gs(this)};function Vl(l){l.T=Date.now()+l.H,Zy(l,l.H)}function Zy(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Ro(c(l.aa,l),d)}function hd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}vr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(NC(this.i,this.B),this.M!=2&&(Ao(),Rt(17)),gs(this),this.m=2,xo(this)):Zy(this,this.T-l)};function xo(l){l.j.I==0||l.K||T_(l.j,l)}function gs(l){hd(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,Uy(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function dd(l,d){try{var m=l.j;if(m.I!=0&&(m.g==l||fd(m.h,l))){if(!l.L&&fd(m.h,l)&&m.I==3){try{var T=m.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)zl(m),jl(m);else break e;wd(m),Rt(18)}}else m.xa=D[1],0<m.xa-m.K&&D[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ro(c(m.Va,m),6e3));n_(m.h)<=1&&m.ta&&(m.ta=void 0)}else _s(m,11)}else if((l.L||m.g==l)&&zl(m),!x(d))for(D=m.Ba.g.parse(d),d=0;d<D.length;d++){let Se=D[d];const et=Se[0];if(!(et<=m.K))if(m.K=et,Se=Se[1],m.I==2)if(Se[0]=="c"){m.M=Se[1],m.ba=Se[2];const xn=Se[3];xn!=null&&(m.ka=xn,m.j.info("VER="+m.ka));const ws=Se[4];ws!=null&&(m.za=ws,m.j.info("SVER="+m.za));const Tr=Se[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(T=1.5*Tr,m.O=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Ar=l.g;if(Ar){const Hl=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var M=T.h;M.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(pd(M,M.h),M.h=null))}if(T.G){const Ed=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Ed&&(T.wa=Ed,Ae(T.J,T.G,Ed))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),T=m;var z=l;if(T.na=C_(T,T.L?T.ba:null,T.W),z.L){r_(T.h,z);var le=z,qe=T.O;qe&&(le.H=qe),le.D&&(hd(le),Vl(le)),T.g=z}else I_(T);m.i.length>0&&Bl(m)}else Se[0]!="stop"&&Se[0]!="close"||_s(m,7);else m.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?_s(m,7):_d(m):Se[0]!="noop"&&m.l&&m.l.qa(Se),m.A=0)}}Ao(4)}catch{}}var VC=class{constructor(l,d){this.g=l,this.map=d}};function e_(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function t_(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function n_(l){return l.h?1:l.g?l.g.size:0}function fd(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function pd(l,d){l.g?l.g.add(d):l.h=d}function r_(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}e_.prototype.cancel=function(){if(this.i=s_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function s_(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.G);return d}return g(l.i)}var i_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FC(l,d){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const T=l[m].indexOf("=");let D,M=null;T>=0?(D=l[m].substring(0,T),M=l[m].substring(T+1)):D=l[m],d(D,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Er(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof Er?(this.l=l.l,Po(this,l.j),this.o=l.o,this.g=l.g,bo(this,l.u),this.h=l.h,md(this,h_(l.i)),this.m=l.m):l&&(d=String(l).match(i_))?(this.l=!1,Po(this,d[1]||"",!0),this.o=No(d[2]||""),this.g=No(d[3]||"",!0),bo(this,d[4]),this.h=No(d[5]||"",!0),md(this,d[6]||"",!0),this.m=No(d[7]||"")):(this.l=!1,this.i=new Do(null,this.l))}Er.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(Oo(d,o_,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Oo(d,o_,!0),"@"),l.push(ko(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Oo(m,m.charAt(0)=="/"?jC:UC,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Oo(m,zC)),l.join("")},Er.prototype.resolve=function(l){const d=kn(this);let m=!!l.j;m?Po(d,l.j):m=!!l.o,m?d.o=l.o:m=!!l.g,m?d.g=l.g:m=l.u!=null;var T=l.h;if(m)bo(d,l.u);else if(m=!!l.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var D=d.h.lastIndexOf("/");D!=-1&&(T=d.h.slice(0,D+1)+T)}if(D=T,D==".."||D==".")T="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){T=D.lastIndexOf("/",0)==0,D=D.split("/");const M=[];for(let z=0;z<D.length;){const le=D[z++];le=="."?T&&z==D.length&&M.push(""):le==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),T&&z==D.length&&M.push("")):(M.push(le),T=!0)}T=M.join("/")}else T=D}return m?d.h=T:m=l.i.toString()!=="",m?md(d,h_(l.i)):m=!!l.m,m&&(d.m=l.m),d};function kn(l){return new Er(l)}function Po(l,d,m){l.j=m?No(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function bo(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function md(l,d,m){d instanceof Do?(l.i=d,WC(l.i,l.l)):(m||(d=Oo(d,BC)),l.i=new Do(d,l.l))}function Ae(l,d,m){l.i.set(d,m)}function Fl(l){return Ae(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function No(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Oo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,$C),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function $C(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var o_=/[#\/\?@]/g,UC=/[#\?:]/g,jC=/[#\?]/g,BC=/[#\?@]/g,zC=/#/g;function Do(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function ys(l){l.g||(l.g=new Map,l.h=0,l.i&&FC(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Do.prototype,t.add=function(l,d){ys(this),this.i=null,l=li(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function a_(l,d){ys(l),d=li(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function l_(l,d){return ys(l),d=li(l,d),l.g.has(d)}t.forEach=function(l,d){ys(this),this.g.forEach(function(m,T){m.forEach(function(D){l.call(d,D,T,this)},this)},this)};function u_(l,d){ys(l);let m=[];if(typeof d=="string")l_(l,d)&&(m=m.concat(l.g.get(li(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)m=m.concat(l[d]);return m}t.set=function(l,d){return ys(this),this.i=null,l=li(this,l),l_(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=u_(this,l),l.length>0?String(l[0]):d):d};function c_(l,d,m){a_(l,d),m.length>0&&(l.i=null,l.g.set(li(l,d),g(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var m=d[T];const D=ko(m);m=u_(this,m);for(let M=0;M<m.length;M++){let z=D;m[M]!==""&&(z+="="+ko(m[M])),l.push(z)}}return this.i=l.join("&")};function h_(l){const d=new Do;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function li(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function WC(l,d){d&&!l.j&&(ys(l),l.i=null,l.g.forEach(function(m,T){const D=T.toLowerCase();T!=D&&(a_(this,T),c_(this,D,m))},l)),l.j=d}function HC(l,d){const m=new Co;if(o.Image){const T=new Image;T.onload=h(Ir,m,"TestLoadImage: loaded",!0,d,T),T.onerror=h(Ir,m,"TestLoadImage: error",!1,d,T),T.onabort=h(Ir,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=h(Ir,m,"TestLoadImage: timeout",!1,d,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else d(!1)}function qC(l,d){const m=new Co,T=new AbortController,D=setTimeout(()=>{T.abort(),Ir(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(D),M.ok?Ir(m,"TestPingServer: ok",!0,d):Ir(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Ir(m,"TestPingServer: error",!1,d)})}function Ir(l,d,m,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(m)}catch{}}function KC(){this.g=new xC}function gd(l){this.i=l.Sb||null,this.h=l.ab||!1}f(gd,jy),gd.prototype.g=function(){return new $l(this.i,this.h)};function $l(l,d){mt.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f($l,mt),t=$l.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Mo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;d_(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function d_(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Lo(this):Mo(this),this.readyState==3&&d_(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Lo(this))},t.Na=function(l){this.g&&(this.response=l,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Mo(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Mo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function f_(l){let d="";return Q(l,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function yd(l,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=f_(m),typeof l=="string"?m!=null&&ko(m):Ae(l,d,m))}function Me(l){mt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Me,mt);var GC=/^https?$/i,QC=["POST","PUT"];t=Me.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gy.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(M){p_(this,M);return}if(l=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)m.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())m.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(QC,d,void 0)>=0)||T||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of m)this.g.setRequestHeader(M,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){p_(this,M)}};function p_(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,m_(l),Ul(l)}function m_(l){l.A||(l.A=!0,At(l,"complete"),At(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,At(this,"complete"),At(this,"abort"),Ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ul(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?g_(this):this.Xa())},t.Xa=function(){g_(this)};function g_(l){if(l.h&&typeof i<"u"){if(l.v&&Sr(l)==4)setTimeout(l.Ca.bind(l),0);else if(At(l,"readystatechange"),Sr(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=M===0){let z=String(l.D).match(i_)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),T=!GC.test(z?z.toLowerCase():"")}m=T}if(m)At(l,"complete"),At(l,"success");else{l.o=6;try{var D=Sr(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",m_(l)}}finally{Ul(l)}}}}function Ul(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,d||At(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),kC(d)}};function y_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YC(l){const d={};l=(l.g&&Sr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(x(l[T]))continue;var m=DC(l[T]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=d[D]||[];d[D]=M,M.push(m)}se(d,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function __(l){this.za=0,this.i=[],this.j=new Co,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vo("baseRetryDelayMs",5e3,l),this.Za=Vo("retryDelaySeedMs",1e4,l),this.Ta=Vo("forwardChannelMaxRetries",2,l),this.va=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new e_(l&&l.concurrentRequestLimit),this.Ba=new KC,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=__.prototype,t.ka=8,t.I=1,t.connect=function(l,d,m,T){Rt(0),this.W=l,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.J=C_(this,null,this.W),Bl(this)};function _d(l){if(w_(l),l.I==3){var d=l.V++,m=kn(l.J);if(Ae(m,"SID",l.M),Ae(m,"RID",d),Ae(m,"TYPE","terminate"),Fo(l,m),d=new vr(l,l.j,d),d.M=2,d.A=Fl(kn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=k_(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Vl(d)}R_(l)}function jl(l){l.g&&(vd(l),l.g.cancel(),l.g=null)}function w_(l){jl(l),l.v&&(o.clearTimeout(l.v),l.v=null),zl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Bl(l){if(!t_(l.h)&&!l.m){l.m=!0;var d=l.Ea;V||w(),F||(V(),F=!0),_.add(d,l),l.D=0}}function XC(l,d){return n_(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Ro(c(l.Ea,l,d),A_(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new vr(this,this.j,l);let M=this.o;if(this.U&&(M?(M=_e(M),G(M,this.U)):M=this.U),this.u!==null||this.R||(D.J=M,M=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=E_(this,D,d),m=kn(this.J),Ae(m,"RID",l),Ae(m,"CVER",22),this.G&&Ae(m,"X-HTTP-Session-Id",this.G),Fo(this,m),M&&(this.R?d="headers="+ko(f_(M))+"&"+d:this.u&&yd(m,this.u,M)),pd(this.h,D),this.Ra&&Ae(m,"TYPE","init"),this.S?(Ae(m,"$req",d),Ae(m,"SID","null"),D.U=!0,cd(D,m,null)):cd(D,m,d),this.I=2}}else this.I==3&&(l?v_(this,l):this.i.length==0||t_(this.h)||v_(this))};function v_(l,d){var m;d?m=d.l:m=l.V++;const T=kn(l.J);Ae(T,"SID",l.M),Ae(T,"RID",m),Ae(T,"AID",l.K),Fo(l,T),l.u&&l.o&&yd(T,l.u,l.o),m=new vr(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),d&&(l.i=d.G.concat(l.i)),d=E_(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),pd(l.h,m),cd(m,T,d)}function Fo(l,d){l.H&&Q(l.H,function(m,T){Ae(d,T,m)}),l.l&&Q({},function(m,T){Ae(d,T,m)})}function E_(l,d,m){m=Math.min(l.i.length,m);const T=l.l?c(l.l.Ka,l.l,l):null;e:{var D=l.i;let le=-1;for(;;){const qe=["count="+m];le==-1?m>0?(le=D[0].g,qe.push("ofs="+le)):le=0:qe.push("ofs="+le);let Se=!0;for(let et=0;et<m;et++){var M=D[et].g;const xn=D[et].map;if(M-=le,M<0)le=Math.max(0,D[et].g-100),Se=!1;else try{M="req"+M+"_"||"";try{var z=xn instanceof Map?xn:Object.entries(xn);for(const[ws,Tr]of z){let Ar=Tr;a(Tr)&&(Ar=id(Tr)),qe.push(M+ws+"="+encodeURIComponent(Ar))}}catch(ws){throw qe.push(M+"type="+encodeURIComponent("_badmap")),ws}}catch{T&&T(xn)}}if(Se){z=qe.join("&");break e}}z=void 0}return l=l.i.splice(0,m),d.G=l,z}function I_(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;V||w(),F||(V(),F=!0),_.add(d,l),l.A=0}}function wd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Ro(c(l.Da,l),A_(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,S_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Ro(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),jl(this),S_(this))};function vd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function S_(l){l.g=new vr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=kn(l.na);Ae(d,"RID","rpc"),Ae(d,"SID",l.M),Ae(d,"AID",l.K),Ae(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ae(d,"TO",l.ia),Ae(d,"TYPE","xmlhttp"),Fo(l,d),l.u&&l.o&&yd(d,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=Fl(kn(d)),m.u=null,m.R=!0,Xy(m,l)}t.Va=function(){this.C!=null&&(this.C=null,jl(this),wd(this),Rt(19))};function zl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function T_(l,d){var m=null;if(l.g==d){zl(l),vd(l),l.g=null;var T=2}else if(fd(l.h,d))m=d.G,r_(l.h,d),T=1;else return;if(l.I!=0){if(d.o)if(T==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var D=l.D;T=Ll(),At(T,new qy(T,m)),Bl(l)}else I_(l);else if(D=d.m,D==3||D==0&&d.X>0||!(T==1&&XC(l,d)||T==2&&wd(l)))switch(m&&m.length>0&&(d=l.h,d.i=d.i.concat(m)),D){case 1:_s(l,5);break;case 4:_s(l,10);break;case 3:_s(l,6);break;default:_s(l,2)}}}function A_(l,d){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*d}function _s(l,d){if(l.j.info("Error code "+d),d==2){var m=c(l.bb,l),T=l.Ua;const D=!T;T=new Er(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Po(T,"https"),Fl(T),D?HC(T.toString(),m):qC(T.toString(),m)}else Rt(2);l.I=0,l.l&&l.l.pa(d),R_(l),w_(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function R_(l){if(l.I=0,l.ja=[],l.l){const d=s_(l.h);(d.length!=0||l.i.length!=0)&&(S(l.ja,d),S(l.ja,l.i),l.h.i.length=0,g(l.i),l.i.length=0),l.l.oa()}}function C_(l,d,m){var T=m instanceof Er?kn(m):new Er(m);if(T.g!="")d&&(T.g=d+"."+T.g),bo(T,T.u);else{var D=o.location;T=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;const M=new Er(null);T&&Po(M,T),d&&(M.g=d),D&&bo(M,D),m&&(M.h=m),T=M}return m=l.G,d=l.wa,m&&d&&Ae(T,m,d),Ae(T,"VER",l.ka),Fo(l,T),T}function k_(l,d,m){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new Me(new gd({ab:m})):new Me(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function x_(){}t=x_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wl(){}Wl.prototype.g=function(l,d){return new jt(l,d)};function jt(l,d){mt.call(this),this.g=new __(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!x(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new ui(this)}f(jt,mt),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){_d(this.g)},jt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=id(l),l=m);d.i.push(new VC(d.Ya++,l)),d.I==3&&Bl(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,jt.Z.N.call(this)};function P_(l){od.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}f(P_,od);function b_(){ad.call(this),this.status=1}f(b_,ad);function ui(l){this.g=l}f(ui,x_),ui.prototype.ra=function(){At(this.g,"a")},ui.prototype.qa=function(l){At(this.g,new P_(l))},ui.prototype.pa=function(l){At(this.g,new b_)},ui.prototype.oa=function(){At(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,kA=function(){return new Wl},CA=function(){return Ll()},RA=ms,Gp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,Ju=Ml,Ky.COMPLETE="complete",AA=Ky,By.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",mt.prototype.listen=mt.prototype.J,ha=By,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,TA=Me}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const o0="@firebase/firestore",a0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wt.UNAUTHENTICATED=new wt(null),wt.GOOGLE_CREDENTIALS=new wt("google-credentials-uid"),wt.FIRST_PARTY=new wt("first-party-uid"),wt.MOCK_USER=new wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Mh("@firebase/firestore");function yi(){return Gs.logLevel}function H(t,...e){if(Gs.logLevel<=de.DEBUG){const n=e.map(Yg);Gs.debug(`Firestore (${wo}): ${t}`,...n)}}function yr(t,...e){if(Gs.logLevel<=de.ERROR){const n=e.map(Yg);Gs.error(`Firestore (${wo}): ${t}`,...n)}}function eo(t,...e){if(Gs.logLevel<=de.WARN){const n=e.map(Yg);Gs.warn(`Firestore (${wo}): ${t}`,...n)}}function Yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xA(t,r,n)}function xA(t,e,n){let r=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yr(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||xA(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wt.UNAUTHENTICATED))}shutdown(){}}class sV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iV{constructor(e){this.t=e,this.currentUser=wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new PA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new wt(e)}}class oV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Qp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pf(s)===pf(i)?fe(s,i):pf(s)?1:-1}return fe(t.length,e.length)}const cV=55296,hV=57343;function pf(t){const e=t.charCodeAt(0);return e>=cV&&e<=hV}function to(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="__name__";class Dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Dn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const r=Dn.isNumericId(e),s=Dn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):Qp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xr.fromString(e.substring(4,e.length-2))}}class Ne extends Dn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const dV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Dn{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return dV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u0}static keyField(){return new ct([u0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ne.fromString(e))}static fromName(e){return new Z(Ne.fromString(e).popFirst(5))}static empty(){return new Z(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e,n){if(!n)throw new X(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pV(t,e,n,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c0(t){if(!Z.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Jg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function sl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jg(t);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function xl(t,e){if(!bA(t))throw new X(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=-62135596800,d0=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*d0);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<h0)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d0}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-h0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:We("string",Ce._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ce(0,0))}static max(){return new ie(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function mV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new ns(s,Z.empty(),e)}function gV(t){return new ns(t.readTime,t.key,il)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(ie.min(),Z.empty(),il)}static max(){return new ns(ie.max(),Z.empty(),il)}}function yV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==_V)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function vV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=-1;function jh(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function EV(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="";function IV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f0(e)),e=SV(t.get(n),e);return f0(e)}function SV(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case NA:n+="";break;default:n+=i}}return n}function f0(t){return t+NA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ri(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vu(this.root,e,this.comparator,!0)}}class vu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m0(this.data.getIterator())}getIteratorFrom(e){return new m0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class m0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Ze(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new DA("Invalid base64 string: "+i):i}}(e);return new pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const TV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=TV.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="server_timestamp",MA="__type__",VA="__previous_value__",FA="__local_write_time__";function ey(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MA])==null?void 0:r.stringValue)===LA}function Bh(t){const e=t.mapValue.fields[VA];return ey(e)?Bh(e):e}function ol(t){const e=rs(t.mapValue.fields[FA].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,r,s,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const Gc="(default)";class al{constructor(e,n){this.projectId=e,this.database=n||Gc}static empty(){return new al("","")}get isDefaultDatabase(){return this.database===Gc}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__type__",RV="__max__",Eu={mapValue:{}},UA="__vector__",Qc="value";function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ey(t)?4:kV(t)?9007199254740991:CV(t)?10:11:ne(28295,{value:t})}function Kn(t,e){if(t===e)return!0;const n=is(t);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=rs(s.timestampValue),a=rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ss(s.bytesValue).isEqual(ss(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),a=Ue(i.doubleValue);return o===a?Kc(o)===Kc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return to(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(p0(o)!==p0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Kn(o[u],a[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function ll(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function no(t,e){if(t===e)return 0;const n=is(t),r=is(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return g0(t.timestampValue,e.timestampValue);case 4:return g0(ol(t),ol(e));case 5:return Qp(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ss(i),u=ss(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=fe(a[c],u[c]);if(h!==0)return h}return fe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=fe(Ue(i.latitude),Ue(o.latitude));return a!==0?a:fe(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,S,A;const a=i.fields||{},u=o.fields||{},c=(p=a[Qc])==null?void 0:p.arrayValue,h=(g=u[Qc])==null?void 0:g.arrayValue,f=fe(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:y0(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Eu.mapValue&&o===Eu.mapValue)return 0;if(i===Eu.mapValue)return 1;if(o===Eu.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Qp(u[f],h[f]);if(p!==0)return p;const g=no(a[u[f]],c[h[f]]);if(g!==0)return g}return fe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function g0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=rs(t),r=rs(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function y0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=no(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function ro(t){return Yp(t)}function Yp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Yp(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Zu(t){switch(is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(t);return e?16+Zu(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Zu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ri(r.fields,(i,o)=>{s+=i.length+Zu(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function Xp(t){return!!t&&"integerValue"in t}function ty(t){return!!t&&"arrayValue"in t}function _0(t){return!!t&&"nullValue"in t}function w0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ec(t){return!!t&&"mapValue"in t}function CV(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$A])==null?void 0:r.stringValue)===UA}function Pa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ri(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pa(t.arrayValue.values[n]);return e}return{...t}}function kV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ec(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Pa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ec(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ec(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ri(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rn(Pa(this.value))}}function jA(t){const e=[];return ri(t.fields,(n,r)=>{const s=new ct([n]);if(ec(r)){const i=jA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Et(e,0,ie.min(),ie.min(),ie.min(),rn.empty(),0)}static newFoundDocument(e,n,r,s){return new Et(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new Et(e,2,n,ie.min(),ie.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,ie.min(),ie.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=no(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function E0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{}class Ye extends BA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bV(e,n,r):n==="array-contains"?new DV(e,r):n==="in"?new LV(e,r):n==="not-in"?new MV(e,r):n==="array-contains-any"?new VV(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NV(e,r):new OV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends BA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gn(e,n)}matches(e){return zA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zA(t){return t.op==="and"}function WA(t){return PV(t)&&zA(t)}function PV(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function Jp(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(WA(t))return t.filters.map(e=>Jp(e)).join(",");{const e=t.filters.map(n=>Jp(n)).join(",");return`${t.op}(${e})`}}function HA(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Kn(r.value,s.value)}(t,e):t instanceof Gn?function(r,s){return s instanceof Gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&HA(o,s.filters[a]),!0):!1}(t,e):void ne(19439)}function qA(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(qA).join(" ,")+"}"}(t):"Filter"}class bV extends Ye{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class NV extends Ye{constructor(e,n){super(e,"in",n),this.keys=KA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OV extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=KA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class DV extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ty(n)&&ll(n.arrayValue,this.value)}}class LV extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ll(this.value.arrayValue,n)}}class MV extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ll(this.value.arrayValue,n)}}class VV extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function I0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new FV(t,e,n,r,s,i,o)}function ny(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ro(r)).join(",")),e.Te=n}return e.Te}function ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E0(t.startAt,e.startAt)&&E0(t.endAt,e.endAt)}function Zp(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $V(t,e,n,r,s,i,o,a){return new zh(t,e,n,r,s,i,o,a)}function sy(t){return new zh(t)}function S0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UV(t){return t.collectionGroup!==null}function ba(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Xc(i,r))}),n.has(ct.keyField().canonicalString())||e.Ie.push(new Xc(ct.keyField(),r))}return e.Ie}function Bn(t){const e=ae(t);return e.Ee||(e.Ee=jV(e,ba(t))),e.Ee}function jV(t,e){if(t.limitType==="F")return I0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xc(s.field,i)});const n=t.endAt?new Yc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yc(t.startAt.position,t.startAt.inclusive):null;return I0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function em(t,e,n){return new zh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wh(t,e){return ry(Bn(t),Bn(e))&&t.limitType===e.limitType}function GA(t){return`${ny(Bn(t))}|lt:${t.limitType}`}function _i(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>qA(s)).join(", ")}]`),jh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ro(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ro(s)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function Hh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ba(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=v0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ba(r),s)||r.endAt&&!function(o,a,u){const c=v0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ba(r),s))}(t,e)}function BV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QA(t){return(e,n)=>{let r=!1;for(const s of ba(t)){const i=zV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zV(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?no(u,c):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return OA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Le(Z.comparator);function _r(){return WV}const YA=new Le(Z.comparator);function da(...t){let e=YA;for(const n of t)e=e.insert(n.key,n);return e}function XA(t){let e=YA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Na()}function JA(){return Na()}function Na(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const HV=new Le(Z.comparator),qV=new Ze(Z.comparator);function pe(...t){let e=qV;for(const n of t)e=e.add(n);return e}const KV=new Ze(fe);function GV(){return KV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function ZA(t){return{integerValue:""+t}}function QV(t,e){return EV(e)?ZA(e):iy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this._=void 0}}function YV(t,e,n){return t instanceof Jc?function(s,i){const o={fields:{[MA]:{stringValue:LA},[FA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ey(i)&&(i=Bh(i)),i&&(o.fields[VA]=i),{mapValue:o}}(n,e):t instanceof ul?tR(t,e):t instanceof cl?nR(t,e):function(s,i){const o=eR(s,i),a=T0(o)+T0(s.Ae);return Xp(o)&&Xp(s.Ae)?ZA(a):iy(s.serializer,a)}(t,e)}function XV(t,e,n){return t instanceof ul?tR(t,e):t instanceof cl?nR(t,e):n}function eR(t,e){return t instanceof Zc?function(r){return Xp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jc extends qh{}class ul extends qh{constructor(e){super(),this.elements=e}}function tR(t,e){const n=rR(e);for(const r of t.elements)n.some(s=>Kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class cl extends qh{constructor(e){super(),this.elements=e}}function nR(t,e){let n=rR(e);for(const r of t.elements)n=n.filter(s=>!Kn(s,r));return{arrayValue:{values:n}}}class Zc extends qh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function T0(t){return Ue(t.integerValue||t.doubleValue)}function rR(t){return ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ul&&s instanceof ul||r instanceof cl&&s instanceof cl?to(r.elements,s.elements,Kn):r instanceof Zc&&s instanceof Zc?Kn(r.Ae,s.Ae):r instanceof Jc&&s instanceof Jc}(t.transform,e.transform)}class ZV{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kh{}function sR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oR(t.key,lr.none()):new Pl(t.key,t.data,lr.none());{const n=t.data,r=rn.empty();let s=new Ze(ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ii(t.key,r,new _n(s.toArray()),lr.none())}}function e4(t,e,n){t instanceof Pl?function(s,i,o){const a=s.value.clone(),u=R0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ii?function(s,i,o){if(!tc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=R0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(iR(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Oa(t,e,n,r){return t instanceof Pl?function(i,o,a,u){if(!tc(i.precondition,o))return a;const c=i.value.clone(),h=C0(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ii?function(i,o,a,u){if(!tc(i.precondition,o))return a;const c=C0(i.fieldTransforms,u,o),h=o.data;return h.setAll(iR(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return tc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function t4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=eR(r.transform,s||null);i!=null&&(n===null&&(n=rn.empty()),n.set(r.field,i))}return n||null}function A0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&to(r,s,(i,o)=>JV(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pl extends Kh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ii extends Kh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function iR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function R0(t,e,n){const r=new Map;we(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,XV(o,a,n[s]))}return r}function C0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YV(i,o,e))}return r}class oR extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n4 extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&e4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=sR(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(n,r)=>A0(n,r))&&to(this.baseMutations,e.baseMutations,(n,r)=>A0(n,r))}}class oy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return HV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new oy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,me;function o4(t){switch(t){case U.OK:return ne(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function aR(t){if(t===void 0)return yr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Be.OK:return U.OK;case Be.CANCELLED:return U.CANCELLED;case Be.UNKNOWN:return U.UNKNOWN;case Be.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Be.INTERNAL:return U.INTERNAL;case Be.UNAVAILABLE:return U.UNAVAILABLE;case Be.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Be.NOT_FOUND:return U.NOT_FOUND;case Be.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Be.ABORTED:return U.ABORTED;case Be.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Be.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:t})}}(me=Be||(Be={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=new Xr([4294967295,4294967295],0);function k0(t){const e=a4().encode(t),n=new SA;return n.update(e),new Uint8Array(n.digest())}function x0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([s,i],0)]}class ay{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Xr.fromNumber(r)));return s.compare(l4)===1&&(s=new Xr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=k0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ay(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=k0(e),[r,s]=x0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gh(ie.min(),s,new Le(fe),_r(),pe())}}class bl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class lR{constructor(e,n){this.targetId=e,this.Ce=n}}class uR{constructor(e,n,r=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class P0{constructor(){this.ve=0,this.Fe=b0(),this.Me=pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new bl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=b0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u4{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=Iu(),this.He=Iu(),this.Ye=new Le(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Zp(i))if(r===0){const o=new Z(i.path);this.et(n,o,Et.newNoDocument(o,ie.min()))}else we(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ss(r).toUint8Array()}catch(u){if(u instanceof DA)return eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ay(o,s,i)}catch(u){return eo(u instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Zp(a.target)){const u=new Z(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Et.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=pe();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Gh(e,n,this.Ye,this.je,r);return this.je=_r(),this.Je=Iu(),this.He=Iu(),this.Ye=new Le(fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new P0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Iu(){return new Le(Z.comparator)}function b0(){return new Le(Z.comparator)}const c4={asc:"ASCENDING",desc:"DESCENDING"},h4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"};class f4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tm(t,e){return t.useProto3Json||jh(e)?e:{value:e}}function eh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p4(t,e){return eh(t,e.toTimestamp())}function zn(t){return we(!!t,49232),ie.fromTimestamp(function(n){const r=rs(n);return new Ce(r.seconds,r.nanos)}(t))}function ly(t,e){return nm(t,e).canonicalString()}function nm(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hR(t){const e=Ne.fromString(t);return we(gR(e),10190,{key:e.toString()}),e}function rm(t,e){return ly(t.databaseId,e.path)}function mf(t,e){const n=hR(e);if(n.get(1)!==t.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(fR(n))}function dR(t,e){return ly(t.databaseId,e)}function m4(t){const e=hR(t);return e.length===4?Ne.emptyPath():fR(e)}function sm(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fR(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N0(t,e,n){return{name:rm(t,e),fields:n.value.mapValue.fields}}function g4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(we(h===void 0||typeof h=="string",58123),pt.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?U.UNKNOWN:aR(c.code);return new X(h,c.message||"")}(o);n=new uR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mf(t,r.document.name),i=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):ie.min(),a=new rn({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new nc(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mf(t,r.document),i=r.readTime?zn(r.readTime):ie.min(),o=Et.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mf(t,r.document),i=r.removedTargetIds||[];n=new nc([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new i4(s,i),a=r.targetId;n=new lR(a,o)}}return n}function y4(t,e){let n;if(e instanceof Pl)n={update:N0(t,e.key,e.value)};else if(e instanceof oR)n={delete:rm(t,e.key)};else if(e instanceof ii)n={update:N0(t,e.key,e.data),updateMask:R4(e.fieldMask)};else{if(!(e instanceof n4))return ne(16599,{Vt:e.type});n={verify:rm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:p4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function _4(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?zn(s.updateTime):zn(i);return o.isEqual(ie.min())&&(o=zn(i)),new ZV(o,s.transformResults||[])}(n,e))):[]}function w4(t,e){return{documents:[dR(t,e.path)]}}function v4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dR(t,s);const i=function(c){if(c.length!==0)return mR(Gn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:wi(p.field),direction:S4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=tm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function E4(t){let e=m4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=pR(f);return p instanceof Gn&&WA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(S){return new Xc(vi(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,jh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Yc(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Yc(g,p)}(n.endAt)),$V(e,s,o,i,a,"F",u,c)}function I4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vi(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vi(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vi(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vi(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>pR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function S4(t){return c4[t]}function T4(t){return h4[t]}function A4(t){return d4[t]}function wi(t){return{fieldPath:t.canonicalString()}}function vi(t){return ct.fromServerFormat(t.fieldPath)}function mR(t){return t instanceof Ye?function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NAN"}};if(_0(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NAN"}};if(_0(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wi(n.field),op:T4(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(s=>mR(s));return r.length===1?r[0]:{compositeFilter:{op:A4(n.op),filters:r}}}(t):ne(54877,{filter:t})}function R4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,s,i=ie.min(),o=ie.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.yt=e}}function k4(t){const e=E4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.Cn=new P4}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ns.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class P4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yR=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(yR,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new so(0)}static cr(){return new so(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LruGarbageCollector",b4=1048576;function L0([t,e],[n,r]){const s=fe(t,n);return s===0?fe(e,r):s}class N4{constructor(e){this.Ir=e,this.buffer=new Ze(L0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();L0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(D0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?H(D0,"Ignoring IndexedDB error during garbage collection: ",n):await vo(n)}await this.Vr(3e5)})}}class D4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Uh.ce);const r=new N4(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(O0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),yi()<=de.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function L4(t,e){return new D4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Oa(r.mutation,s,_n.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=da();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=_r();const o=Na(),a=function(){return Na()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof ii)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Oa(h.mutation,c,h.mutation.getFieldMask(),Ce.now())):o.set(c.key,_n.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new V4(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Na();let s=new Le((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||_n.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||pe()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=JA();h.forEach(p=>{if(!i.has(p)){const g=sR(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Os());let a=il,u=i;return o.next(c=>$.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,pe())).next(h=>({batchId:a,changes:XA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=da();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,i).next(a=>$.forEach(a,u=>{const c=function(f,p){return new zh(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Et.newInvalidDocument(h)))});let a=da();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&Oa(h.mutation,c,_n.empty(),Ce.now()),Hh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:k4(s.bundledQuery),readTime:zn(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new Le(Z.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Os(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Os(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Os(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return $.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new s4(n,r));let i=this.qr.get(n);i===void 0&&(i=pe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Qr=new Ze(nt.$r),this.Ur=new Ze(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Ne([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Ne([])),r=new nt(n,e),s=new nt(n,e+1);let i=pe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r4(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Zg:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(fe);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new nt(new Z(i),0);let a=new Ze(fe);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Yr)),!0)},o),$.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new nt(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.ri=e,this.docs=function(){return new Le(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=_r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Et.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=_r();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yV(gV(h),r)<=0||(s.has(h.key)||Hh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new W4(this)}getSize(e){return $.resolve(this.size)}}class W4 extends M4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.persistence=e,this.si=new si(n=>ny(n),ry),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new uy,this.targetCount=0,this.ai=so.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new so(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.ui={},this.overlays={},this.ci=new Uh(0),this.li=!1,this.li=!0,this.hi=new j4,this.referenceDelegate=e(this),this.Pi=new H4(this),this.indexManager=new x4,this.remoteDocumentCache=function(s){return new z4(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new C4(n),this.Ii=new $4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new B4(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new q4(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class q4 extends wV{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Ri=new uy,this.Vi=null}static mi(e){return new cy(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class th{constructor(e,n){this.persistence=e,this.pi=new si(r=>IV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=L4(this,n)}static mi(e,n){return new th(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ie.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zu(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return AO()?8:vV(St())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new K4;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(yi()<=de.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",_i(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(yi()<=de.DEBUG&&H("QueryEngine","Query:",_i(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(yi()<=de.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",_i(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):$.resolve())}ys(e,n){if(S0(n))return $.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=em(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,em(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,s){return S0(n)||s.isEqual(ie.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(yi()<=de.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_i(n)),this.vs(e,o,n,mV(s,il)).next(a=>a))})}Ds(e,n){let r=new Ze(QA(e));return n.forEach((s,i)=>{Hh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return yi()<=de.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",_i(n)),this.ps.getDocumentsMatchingQuery(e,n,ns.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="LocalStore",Q4=3e8;class Y4{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Le(fe),this.xs=new si(i=>ny(i),ry),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function X4(t,e,n,r){return new Y4(t,e,n,r)}async function wR(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=pe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function J4(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,p=f.keys();let g=$.resolve();return p.forEach(S=>{g=g.next(()=>h.getEntry(u,S)).next(A=>{const k=c.docVersions.get(S);we(k!==null,48541),A.version.compareTo(k)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function vR(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Z4(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(A,k,I){return A.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=Q4?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))});let u=_r(),c=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(eF(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(ie.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return $.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=s,i))}function eF(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=_r();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):H(dy,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:s}})}function tF(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nF(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function im(t,e,n){const r=ae(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eo(o))throw o;H(dy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function M0(t,e,n){const r=ae(t);let s=ie.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ae(u),p=f.xs.get(h);return p!==void 0?$.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)}(r,o,Bn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:pe())).next(a=>(rF(r,BV(e),a),{documents:a,Qs:i})))}function rF(t,e,n){let r=t.Os.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class V0{constructor(){this.activeTargetIds=GV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sF{constructor(){this.Mo=new V0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="ConnectivityMonitor";class $0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(F0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(F0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=null;function om(){return Su===null?Su=function(){return 268435456+Math.round(2147483648*Math.random())}():Su++,"0x"+Su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="RestConnection",oF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Gc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=om(),a=this.zo(e,n.toUriEncodedString());H(gf,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:c}=new URL(a),h=go(c);return this.Jo(e,a,u,r,h).then(f=>(H(gf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw eo(gf,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=oF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class uF extends aF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=om();return new Promise((a,u)=>{const c=new TA;c.setWithCredentials(!0),c.listenOnce(AA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ju.NO_ERROR:const f=c.getResponseJson();H(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Ju.TIMEOUT:H(_t,`RPC '${e}' ${o} timed out`),u(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const p=c.getStatus();if(H(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const A=function(I){const y=I.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(S.status);u(new X(A,S.message))}else u(new X(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new X(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(_t,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=om(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kA(),a=CA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");H(_t,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let p=!1,g=!1;const S=new lF({Yo:k=>{g?H(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(p||(H(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(_t,`RPC '${e}' stream ${s} sending:`,k),f.send(k))},Zo:()=>f.close()}),A=(k,I,y)=>{k.listen(I,v=>{try{y(v)}catch(P){setTimeout(()=>{throw P},0)}})};return A(f,ha.EventType.OPEN,()=>{g||(H(_t,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),A(f,ha.EventType.CLOSE,()=>{g||(g=!0,H(_t,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(f))}),A(f,ha.EventType.ERROR,k=>{g||(g=!0,eo(_t,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),S.a_(new X(U.UNAVAILABLE,"The operation could not be completed")))}),A(f,ha.EventType.MESSAGE,k=>{var I;if(!g){const y=k.data[0];we(!!y,16349);const v=y,P=(v==null?void 0:v.error)||((I=v[0])==null?void 0:I.error);if(P){H(_t,`RPC '${e}' stream ${s} received error:`,P);const V=P.status;let F=function(E){const R=Be[E];if(R!==void 0)return aR(R)}(V),_=P.message;F===void 0&&(F=U.INTERNAL,_="Unknown error status: "+V+" with message "+P.message),g=!0,S.a_(new X(F,_)),f.close()}else H(_t,`RPC '${e}' stream ${s} received:`,y),S.u_(y)}}),A(a,RA.STAT_EVENT,k=>{k.stat===Gp.PROXY?H(_t,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Gp.NOPROXY&&H(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){return new f4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="PersistentStream";class IR{constructor(e,n,r,s,i,o,a,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ER(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(U0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(U0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cF extends IR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=g4(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?zn(o.readTime):ie.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Zp(u)?{documents:w4(i,u)}:{query:v4(i,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cR(i,o.resumeToken);const c=tm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=eh(i,o.snapshotVersion.toTimestamp());const c=tm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=I4(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.q_(n)}}class hF extends IR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_4(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>y4(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{}class fF extends dF{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,nm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,nm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class mF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{oi(this)&&(H(Qs,"Restarting streams for network reachability change."),await async function(u){const c=ae(u);c.Ea.add(4),await Nl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Yh(c)}(this))})}),this.Ra=new pF(r,s)}}async function Yh(t){if(oi(t))for(const e of t.da)await e(!0)}async function Nl(t){for(const e of t.da)await e(!1)}function SR(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gy(n)?my(n):Io(n).O_()&&py(n,e))}function fy(t,e){const n=ae(t),r=Io(n);n.Ia.delete(e),r.O_()&&TR(n,e),n.Ia.size===0&&(r.O_()?r.L_():oi(n)&&n.Ra.set("Unknown"))}function py(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).Y_(e)}function TR(t,e){t.Va.Ue(e),Io(t).Z_(e)}function my(t){t.Va=new u4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.Ra.ua()}function gy(t){return oi(t)&&!Io(t).x_()&&t.Ia.size>0}function oi(t){return ae(t).Ea.size===0}function AR(t){t.Va=void 0}async function gF(t){t.Ra.set("Online")}async function yF(t){t.Ia.forEach((e,n)=>{py(t,e)})}async function _F(t,e){AR(t),gy(t)?(t.Ra.ha(e),my(t)):t.Ra.set("Unknown")}async function wF(t,e,n){if(t.Ra.set("Online"),e instanceof uR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){H(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nh(t,r)}else if(e instanceof nc?t.Va.Ze(e):e instanceof lR?t.Va.st(e):t.Va.tt(e),!n.isEqual(ie.min()))try{const r=await vR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),TR(i,u);const f=new Ur(h.target,u,c,h.sequenceNumber);py(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(Qs,"Failed to raise snapshot:",r),await nh(t,r)}}async function nh(t,e,n){if(!Eo(e))throw e;t.Ea.add(1),await Nl(t),t.Ra.set("Offline"),n||(n=()=>vR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Qs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yh(t)})}function RR(t,e){return e().catch(n=>nh(t,n,e))}async function Xh(t){const e=ae(t),n=os(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zg;for(;vF(e);)try{const s=await tF(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,EF(e,s)}catch(s){await nh(e,s)}CR(e)&&kR(e)}function vF(t){return oi(t)&&t.Ta.length<10}function EF(t,e){t.Ta.push(e);const n=os(t);n.O_()&&n.X_&&n.ea(e.mutations)}function CR(t){return oi(t)&&!os(t).x_()&&t.Ta.length>0}function kR(t){os(t).start()}async function IF(t){os(t).ra()}async function SF(t){const e=os(t);for(const n of t.Ta)e.ea(n.mutations)}async function TF(t,e,n){const r=t.Ta.shift(),s=oy.from(r,e,n);await RR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xh(t)}async function AF(t,e){e&&os(t).X_&&await async function(r,s){if(function(o){return o4(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();os(r).B_(),await RR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Xh(r)}}(t,e),CR(t)&&kR(t)}async function j0(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),H(Qs,"RemoteStore received new credentials");const r=oi(n);n.Ea.add(3),await Nl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yh(n)}async function RF(t,e){const n=ae(t);e?(n.Ea.delete(2),await Yh(n)):e||(n.Ea.add(2),await Nl(n),n.Ra.set("Unknown"))}function Io(t){return t.ma||(t.ma=function(n,r,s){const i=ae(n);return i.sa(),new cF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:gF.bind(null,t),t_:yF.bind(null,t),r_:_F.bind(null,t),H_:wF.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),gy(t)?my(t):t.Ra.set("Unknown")):(await t.ma.stop(),AR(t))})),t.ma}function os(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.sa(),new hF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IF.bind(null,t),r_:AF.bind(null,t),ta:SF.bind(null,t),na:TF.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Xh(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Qs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new yy(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(t,e){if(yr("AsyncQueue",`${e}: ${t}`),Eo(t))return new X(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{static emptySet(e){return new qi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=da(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.ga=new Le(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class io{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new io(e,n,qi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kF{constructor(){this.queries=z0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=z0(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new X(U.ABORTED,"Firestore shutting down"))}}function z0(){return new si(t=>GA(t),Wh)}async function xF(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new CF,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=_y(o,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&wy(n)}async function PF(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bF(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&wy(n)}function NF(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function wy(t){t.Ca.forEach(e=>{e.next()})}var am,W0;(W0=am||(am={})).Ma="default",W0.Cache="cache";class OF{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.key=e}}class PR{constructor(e){this.key=e}}class DF{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=QA(e),this.tu=new qi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new B0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Hh(this.query,f)?f:null,S=!!p&&this.mutatedKeys.has(p.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;p&&g?p.data.isEqual(g.data)?S!==A&&(r.track({type:3,doc:g}),k=!0):this.su(p,g)||(r.track({type:2,doc:g}),k=!0,(u&&this.eu(g,u)>0||c&&this.eu(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),k=!0):p&&!g&&(r.track({type:1,doc:p}),k=!0,(u||c)&&(a=!0)),k&&(g?(o=o.add(g),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,S){const A=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:k})}};return A(g)-A(S)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new io(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new B0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new PR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new xR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vy="SyncEngine";class LF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MF{constructor(e){this.key=e,this.hu=!1}}class VF{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new si(a=>GA(a),Wh),this.Iu=new Map,this.Eu=new Set,this.du=new Le(Z.comparator),this.Au=new Map,this.Ru=new uy,this.Vu={},this.mu=new Map,this.fu=so.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FF(t,e,n=!0){const r=MR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bR(r,e,n,!0),s}async function $F(t,e){const n=MR(t);await bR(n,e,!0,!1)}async function bR(t,e,n,r){const s=await nF(t.localStore,Bn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await UF(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&SR(t.remoteStore,s),a}async function UF(t,e,n,r,s){t.pu=(f,p,g)=>async function(A,k,I,y){let v=k.view.ru(I);v.Cs&&(v=await M0(A.localStore,k.query,!1).then(({documents:_})=>k.view.ru(_,v)));const P=y&&y.targetChanges.get(k.targetId),V=y&&y.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(v,A.isPrimaryClient,P,V);return q0(A,k.targetId,F.au),F.snapshot}(t,f,p,g);const i=await M0(t.localStore,e,!0),o=new DF(e,i.Qs),a=o.ru(i.documents),u=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);q0(t,n,c.au);const h=new LF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function jF(t,e,n){const r=ae(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Wh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await im(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&fy(r.remoteStore,s.targetId),lm(r,s.targetId)}).catch(vo)):(lm(r,s.targetId),await im(r.localStore,s.targetId,!0))}async function BF(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fy(n.remoteStore,r.targetId))}async function zF(t,e,n){const r=YF(t);try{const s=await function(o,a){const u=ae(o),c=Ce.now(),h=a.reduce((g,S)=>g.add(S.key),pe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let S=_r(),A=pe();return u.Ns.getEntries(g,h).next(k=>{S=k,S.forEach((I,y)=>{y.isValidDocument()||(A=A.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,S)).next(k=>{f=k;const I=[];for(const y of a){const v=t4(y,f.get(y.key).overlayedDocument);v!=null&&I.push(new ii(y.key,v,jA(v.value.mapValue),lr.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,I,a)}).next(k=>{p=k;const I=k.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(g,k.batchId,I)})}).then(()=>({batchId:p.batchId,changes:XA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Le(fe)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ol(r,s.changes),await Xh(r.remoteStore)}catch(s){const i=_y(s,"Failed to persist write");n.reject(i)}}async function NR(t,e){const n=ae(t);try{const r=await Z4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?we(o.hu,14607):s.removedDocuments.size>0&&(we(o.hu,42227),o.hu=!1))}),await Ol(n,r,e)}catch(r){await vo(r)}}function H0(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=ae(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)}),c&&wy(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WF(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Le(Z.comparator);o=o.insert(i,Et.newNoDocument(i,ie.min()));const a=pe().add(i),u=new Gh(ie.min(),new Map,new Le(fe),o,a);await NR(r,u),r.du=r.du.remove(i),r.Au.delete(e),Ey(r)}else await im(r.localStore,e,!1).then(()=>lm(r,e,n)).catch(vo)}async function HF(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await J4(n.localStore,e);DR(n,r,null),OR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ol(n,s)}catch(s){await vo(s)}}async function qF(t,e,n){const r=ae(t);try{const s=await function(o,a){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(we(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);DR(r,e,n),OR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ol(r,s)}catch(s){await vo(s)}}function OR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function DR(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function lm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||LR(t,r)})}function LR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ey(t))}function q0(t,e,n){for(const r of n)r instanceof xR?(t.Ru.addReference(r.key,e),KF(t,r)):r instanceof PR?(H(vy,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||LR(t,r.key)):ne(19791,{wu:r})}function KF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(vy,"New document in limbo: "+n),t.Eu.add(r),Ey(t))}function Ey(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new MF(n)),t.du=t.du.insert(n,r),SR(t.remoteStore,new Ur(Bn(sy(n.path)),r,"TargetPurposeLimboResolution",Uh.ce))}}async function Ol(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=hy.As(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,c){const h=ae(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(c,p=>$.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>$.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Eo(f))throw f;H(dy,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),S=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,A)}}}(r.localStore,i))}async function GF(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){H(vy,"User change. New user:",e.toKey());const r=await wR(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(u=>{u.reject(new X(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ol(n,r.Ls)}}function QF(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function MR(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WF.bind(null,e),e.Pu.H_=bF.bind(null,e.eventManager),e.Pu.yu=NF.bind(null,e.eventManager),e}function YF(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qF.bind(null,e),e}class rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return X4(this.persistence,new G4,e.initialUser,this.serializer)}Cu(e){return new _R(cy.mi,this.serializer)}Du(e){return new sF}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rh.provider={build:()=>new rh};class XF extends rh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){we(this.persistence.referenceDelegate instanceof th,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new O4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new _R(r=>th.mi(r,n),this.serializer)}}class um{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>H0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GF.bind(null,this.syncEngine),await RF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kF}()}createDatastore(e){const n=Qh(e.databaseInfo.databaseId),r=function(i){return new uF(i)}(e.databaseInfo);return function(i,o,a,u){return new fF(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new mF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>H0(this.syncEngine,n,0),function(){return $0.v()?new $0:new iF}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const f=new VF(s,i,o,a,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);H(Qs,"RemoteStore shutting down."),i.Ea.add(5),await Nl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}um.provider={build:()=>new um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class ZF{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=wt.UNAUTHENTICATED,this.clientId=Xg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H(as,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(as,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_y(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),H(as,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function K0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await e3(t);H(as,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>j0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>j0(e.remoteStore,s)),t._onlineComponents=e}async function e3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(as,"Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new rh)}}else H(as,"Using default OfflineComponentProvider"),await _f(t,new XF(void 0));return t._offlineComponents}async function VR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(as,"Using user provided OnlineComponentProvider"),await K0(t,t._uninitializedComponentsProvider._online)):(H(as,"Using default OnlineComponentProvider"),await K0(t,new um))),t._onlineComponents}function t3(t){return VR(t).then(e=>e.syncEngine)}async function n3(t){const e=await VR(t),n=e.eventManager;return n.onListen=FF.bind(null,e.syncEngine),n.onUnlisten=jF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$F.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BF.bind(null,e.syncEngine),n}function r3(t,e,n={}){const r=new Jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new JF({next:p=>{h.Nu(),o.enqueueAndForget(()=>PF(i,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new X(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new X(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new OF(sy(a.path),h,{includeMetadataChanges:!0,qa:!0});return xF(i,f)}(await n3(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firestore.googleapis.com",Q0=!0;class Y0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$R,this.ssl=Q0}else this.host=e.host,this.ssl=e.ssl??Q0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b4)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iy{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rV;switch(r.type){case"firstParty":return new aV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=G0.get(n);r&&(H("ComponentProvider","Removing Datastore"),G0.delete(n),r.terminate())}(this),Promise.resolve()}}function s3(t,e,n,r={}){var c;t=sl(t,Iy);const s=go(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(N1(`https://${a}`),O1("Firestore",!0)),i.host!==$R&&i.host!==a&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:s,emulatorOptions:r};if(!ts(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=wt.MOCK_USER;else{h=yO(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new wt(p)}t._authCredentials=new sV(new PA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sy(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(xl(n,st._jsonSchema))return new st(e,r||null,new Z(Ne.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:We("string",st._jsonSchemaVersion),referencePath:We("string")};class hl extends Sy{constructor(e,n,r){super(e,n,sy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new Z(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function dl(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Xg.newId()),fV("doc","path",e),t instanceof Iy){const r=Ne.fromString(e,...n);return c0(r),new st(t,null,new Z(r))}{if(!(t instanceof st||t instanceof hl))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return c0(r),new st(t.firestore,t instanceof hl?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="AsyncQueue";class J0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ER(this,"async_queue_retry"),this._c=()=>{const r=yf();r&&H(X0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Eo(e))throw e;H(X0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",Z0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=yy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:Z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Z0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ty extends Iy{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new J0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J0(e),this._firestoreClient=void 0,await e}}}function UR(t,e){const n=typeof t=="object"?t:$g(),r=typeof t=="string"?t:Gc,s=ti(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mO("firestore");i&&s3(s,...i)}return s}function jR(t){if(t._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||i3(t),t._firestoreClient}function i3(t){var r,s,i;const e=t._freezeSettings(),n=function(a,u,c,h){return new AV(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(pt.fromBase64String(e))}catch(n){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:We("string",sn._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wn._jsonSchemaVersion}}static fromJSON(e){if(xl(e,Wn._jsonSchema))return new Wn(e.latitude,e.longitude)}}Wn._jsonSchemaVersion="firestore/geoPoint/1.0",Wn._jsonSchema={type:We("string",Wn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,Hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hn(e.vectorValues);throw new X(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hn._jsonSchemaVersion="firestore/vectorValue/1.0",Hn._jsonSchema={type:We("string",Hn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=/^__.*__$/;class a3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pl(e,this.data,n,this.fieldTransforms)}}function zR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class Ry{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ry({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zR(this.Ac)&&o3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class l3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qh(e)}Cc(e,n,r,s=!1){return new Ry({Ac:e,methodName:n,Dc:r,path:ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u3(t){const e=t._freezeSettings(),n=Qh(t._databaseId);return new l3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c3(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);KR("Data must be an object, but it was:",o,r);const a=HR(r,o);let u,c;if(i.merge)u=new _n(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=h3(e,f,n);if(!o.contains(p))throw new X(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);f3(h,p)||h.push(p)}u=new _n(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new a3(new rn(a),u,c)}function WR(t,e){if(qR(t=Tt(t)))return KR("Unsupported field value:",e,t),HR(t,e);if(t instanceof BR)return function(r,s){if(!zR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=WR(a,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:eh(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eh(s.serializer,i)}}if(r instanceof Wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sn)return{bytesValue:cR(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ly(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hn)return function(o,a){return{mapValue:{fields:{[$A]:{stringValue:UA},[Qc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return iy(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Jg(r)}`)}(t,e)}function HR(t,e){const n={};return OA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(t,(r,s)=>{const i=WR(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function qR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Wn||t instanceof sn||t instanceof st||t instanceof BR||t instanceof Hn)}function KR(t,e,n){if(!qR(n)||!bA(n)){const r=Jg(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function h3(t,e,n){if((e=Tt(e))instanceof Ay)return e._internalPath;if(typeof e=="string")return GR(t,e);throw sh("Field path arguments must be of type string or ",t,!1,void 0,n)}const d3=new RegExp("[~\\*/\\[\\]]");function GR(t,e,n){if(e.search(d3)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ay(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new X(U.INVALID_ARGUMENT,a+t+u)}function f3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(YR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class p3 extends QR{data(){return super.data()}}function YR(t,e){return typeof e=="string"?GR(t,e):e instanceof Ay?e._internalPath:e._delegate._internalPath}class m3{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ri(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Qc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ue(o.doubleValue));return new Hn(n)}convertGeoPoint(e){return new Wn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const n=rs(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);we(gR(r),9688,{name:e});const s=new al(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||yr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fs extends QR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(YR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Fs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fs._jsonSchema={type:We("string",Fs._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class rc extends Fs{data(e={}){return super.data(e)}}class Da{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new pa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rc(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new rc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new rc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:y3(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function y3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){t=sl(t,st);const e=sl(t.firestore,Ty);return r3(jR(e),t._key).then(n=>v3(e,t,n))}Da._jsonSchemaVersion="firestore/querySnapshot/1.0",Da._jsonSchema={type:We("string",Da._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class _3 extends m3{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Cy(t,e,n){t=sl(t,st);const r=sl(t.firestore,Ty),s=g3(t.converter,e,n);return w3(r,[c3(u3(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lr.none())])}function w3(t,e){return function(r,s){const i=new Jr;return r.asyncQueue.enqueueAndForget(async()=>zF(await t3(r),s,i)),i.promise}(jR(t),e)}function v3(t,e,n){const r=n.docs.get(e._key),s=new _3(t);return new Fs(t,s,e._key,r,new pa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){wo=s})(yo),qn(new Sn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ty(new iV(r.getProvider("auth-internal")),new lV(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(c.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),un(o0,a0,e),un(o0,a0,"esm2020")})();var E3="firebase",I3="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un(E3,I3,"app");const JR="@firebase/installations",ky="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=1e4,eC=`w:${ky}`,tC="FIS_v2",S3="https://firebaseinstallations.googleapis.com/v1",T3=60*60*1e3,A3="installations",R3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ys=new ei(A3,R3,C3);function nC(t){return t instanceof Cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC({projectId:t}){return`${S3}/projects/${t}/installations`}function sC(t){return{token:t.token,requestStatus:2,expiresIn:x3(t.expiresIn),creationTime:Date.now()}}async function iC(t,e){const r=(await e.json()).error;return Ys.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function oC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k3(t,{refreshToken:e}){const n=oC(t);return n.append("Authorization",P3(e)),n}async function aC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function x3(t){return Number(t.replace("s","000"))}function P3(t){return`${tC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=rC(t),s=oC(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:tC,appId:t.appId,sdkVersion:eC},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await aC(()=>fetch(r,a));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:sC(c.authToken)}}else throw await iC("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=/^[cdef][\w-]{21}$/,cm="";function D3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=L3(t);return O3.test(n)?n:cm}catch{return cm}}function L3(t){return N3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Map;function cC(t,e){const n=Jh(t);hC(n,e),M3(n,e)}function hC(t,e){const n=uC.get(t);if(n)for(const r of n)r(e)}function M3(t,e){const n=V3();n&&n.postMessage({key:t,fid:e}),F3()}let Ds=null;function V3(){return!Ds&&"BroadcastChannel"in self&&(Ds=new BroadcastChannel("[Firebase] FID Change"),Ds.onmessage=t=>{hC(t.data.key,t.data.fid)}),Ds}function F3(){uC.size===0&&Ds&&(Ds.close(),Ds=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3="firebase-installations-database",U3=1,Xs="firebase-installations-store";let wf=null;function xy(){return wf||(wf=$1($3,U3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xs)}}})),wf}async function ih(t,e){const n=Jh(t),s=(await xy()).transaction(Xs,"readwrite"),i=s.objectStore(Xs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&cC(t,e.fid),e}async function dC(t){const e=Jh(t),r=(await xy()).transaction(Xs,"readwrite");await r.objectStore(Xs).delete(e),await r.done}async function Zh(t,e){const n=Jh(t),s=(await xy()).transaction(Xs,"readwrite"),i=s.objectStore(Xs),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&cC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Py(t){let e;const n=await Zh(t.appConfig,r=>{const s=j3(r),i=B3(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===cm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function j3(t){const e=t||{fid:D3(),registrationStatus:0};return fC(e)}function B3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ys.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W3(t)}:{installationEntry:e}}async function z3(t,e){try{const n=await b3(t,e);return ih(t.appConfig,n)}catch(n){throw nC(n)&&n.customData.serverCode===409?await dC(t.appConfig):await ih(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function W3(t){let e=await eE(t.appConfig);for(;e.registrationStatus===1;)await lC(100),e=await eE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Py(t);return r||n}return e}function eE(t){return Zh(t,e=>{if(!e)throw Ys.create("installation-not-found");return fC(e)})}function fC(t){return H3(t)?{fid:t.fid,registrationStatus:0}:t}function H3(t){return t.registrationStatus===1&&t.registrationTime+ZR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3({appConfig:t,heartbeatServiceProvider:e},n){const r=K3(t,n),s=k3(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:eC,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await aC(()=>fetch(r,a));if(u.ok){const c=await u.json();return sC(c)}else throw await iC("Generate Auth Token",u)}function K3(t,{fid:e}){return`${rC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function by(t,e=!1){let n;const r=await Zh(t.appConfig,i=>{if(!pC(i))throw Ys.create("not-registered");const o=i.authToken;if(!e&&Y3(o))return i;if(o.requestStatus===1)return n=G3(t,e),i;{if(!navigator.onLine)throw Ys.create("app-offline");const a=J3(i);return n=Q3(t,a),a}});return n?await n:r.authToken}async function G3(t,e){let n=await tE(t.appConfig);for(;n.authToken.requestStatus===1;)await lC(100),n=await tE(t.appConfig);const r=n.authToken;return r.requestStatus===0?by(t,e):r}function tE(t){return Zh(t,e=>{if(!pC(e))throw Ys.create("not-registered");const n=e.authToken;return Z3(n)?{...e,authToken:{requestStatus:0}}:e})}async function Q3(t,e){try{const n=await q3(t,e),r={...e,authToken:n};return await ih(t.appConfig,r),n}catch(n){if(nC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await dC(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ih(t.appConfig,r)}throw n}}function pC(t){return t!==void 0&&t.registrationStatus===2}function Y3(t){return t.requestStatus===2&&!X3(t)}function X3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T3}function J3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Z3(t){return t.requestStatus===1&&t.requestTime+ZR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e6(t){const e=t,{installationEntry:n,registrationPromise:r}=await Py(e);return r?r.catch(console.error):by(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e=!1){const n=t;return await n6(n),(await by(n,e)).token}async function n6(t){const{registrationPromise:e}=await Py(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){if(!t||!t.options)throw vf("App Configuration");if(!t.name)throw vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vf(t){return Ys.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="installations",s6="installations-internal",i6=t=>{const e=t.getProvider("app").getImmediate(),n=r6(e),r=ti(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},o6=t=>{const e=t.getProvider("app").getImmediate(),n=ti(e,mC).getImmediate();return{getId:()=>e6(n),getToken:s=>t6(n,s)}};function a6(){qn(new Sn(mC,i6,"PUBLIC")),qn(new Sn(s6,o6,"PRIVATE"))}a6();un(JR,ky);un(JR,ky,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="analytics",l6="firebase_id",u6="origin",c6=60*1e3,h6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t=new Mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qt=new ei("analytics","Analytics",d6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t){if(!t.startsWith(Ny)){const e=Qt.create("invalid-gtag-resource",{gtagURL:t});return $t.warn(e.message),""}return t}function gC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function p6(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function m6(t,e){const n=p6("firebase-js-sdk-policy",{createScriptURL:f6}),r=document.createElement("script"),s=`${Ny}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function g6(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function y6(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await gC(n)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(a){$t.error(a)}t("config",s,i)}async function _6(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await gC(n);for(const u of o){const c=a.find(f=>f.measurementId===u),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){$t.error(i)}}function w6(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,u]=o;await _6(t,e,n,a,u)}else if(i==="config"){const[a,u]=o;await y6(t,e,n,r,a,u)}else if(i==="consent"){const[a,u]=o;t("consent",a,u)}else if(i==="get"){const[a,u,c]=o;t("get",a,u,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){$t.error(a)}}return s}function v6(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=w6(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function E6(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ny)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=30,S6=1e3;class T6{constructor(e={},n=S6){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const yC=new T6;function A6(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function R6(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:A6(n)},s=h6.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let a="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(a=u.error.message)}catch{}throw Qt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function C6(t,e=yC,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Qt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Qt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new P6;return setTimeout(async()=>{a.abort()},c6),_C({appId:r,apiKey:s,measurementId:i},o,a,e)}async function _C(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=yC){var a;const{appId:i,measurementId:o}=t;try{await k6(r,e)}catch(u){if(o)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await R6(t);return s.deleteThrottleMetadata(i),u}catch(u){const c=u;if(!x6(c)){if(s.deleteThrottleMetadata(i),o)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw u}const h=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?bv(n,s.intervalMillis,I6):bv(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),$t.debug(`Calling attemptFetch again in ${h} millis`),_C(t,f,r,s)}}function k6(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function x6(t){if(!(t instanceof Cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class P6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function b6(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(){if(L1())try{await M1()}catch(t){return $t.warn(Qt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $t.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function O6(t,e,n,r,s,i,o){const a=C6(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>$t.error(p)),e.push(a);const u=N6().then(p=>{if(p)return r.getId()}),[c,h]=await Promise.all([a,u]);E6(i)||m6(i,c.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[u6]="firebase",f.update=!0,h!=null&&(f[l6]=h),s("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},nE=[];const rE={};let Ef="dataLayer",L6="gtag",sE,wC,iE=!1;function M6(){const t=[];if(D1()&&t.push("This is a browser extension environment."),RO()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Qt.create("invalid-analytics-context",{errorInfo:e});$t.warn(n.message)}}function V6(t,e,n){M6();const r=t.options.appId;if(!r)throw Qt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qt.create("no-api-key");if(La[r]!=null)throw Qt.create("already-exists",{id:r});if(!iE){g6(Ef);const{wrappedGtag:i,gtagCore:o}=v6(La,nE,rE,Ef,L6);wC=i,sE=o,iE=!0}return La[r]=O6(t,nE,rE,e,sE,Ef,n),new D6(t)}function F6(t=$g()){t=Tt(t);const e=ti(t,oh);return e.isInitialized()?e.getImmediate():$6(t)}function $6(t,e={}){const n=ti(t,oh);if(n.isInitialized()){const s=n.getImmediate();if(ts(e,n.getOptions()))return s;throw Qt.create("already-initialized")}return n.initialize({options:e})}function U6(t,e,n,r){t=Tt(t),b6(wC,La[t.app.options.appId],e,n,r).catch(s=>$t.error(s))}const oE="@firebase/analytics",aE="0.10.18";function j6(){qn(new Sn(oh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return V6(r,s,n)},"PUBLIC")),qn(new Sn("analytics-internal",t,"PRIVATE")),un(oE,aE),un(oE,aE,"esm2020");function t(e){try{const n=e.getProvider(oh).getImmediate();return{logEvent:(r,s,i)=>U6(n,r,s,i)}}catch(n){throw Qt.create("interop-component-reg-failed",{reason:n})}}}j6();const B6={apiKey:"AIzaSyBKX0eIL-ja9zHCsgi_UwlD8JlByY96UB8",authDomain:"astrophoenix2-3b620.firebaseapp.com",projectId:"astrophoenix2-3b620",storageBucket:"astrophoenix2-3b620.firebasestorage.app",messagingSenderId:"335448449685",appId:"1:335448449685:web:fe31fc84f0313fa075319c",measurementId:"G-C9M23TNWHD"},Oy=Fg(B6);F6(Oy);const Cs=Ks(Oy),ah=UR(Oy);dA(Cs,Kg).then(()=>{console.log(" Firebase auth persistence set to local")}).catch(t=>console.error("Persistence error:",t));dA(Cs,Kg);const vC=O.createContext(void 0),Tu="astrophoenix_saved";function z6({children:t}){const[e,n]=O.useState([]),[r,s]=O.useState(""),[i,o]=O.useState(10),[a,u]=O.useState([]);O.useEffect(()=>{try{const p=localStorage.getItem(Tu);p&&u(JSON.parse(p))}catch{}},[]),O.useEffect(()=>{const p=qg(Ks(),async g=>{if(g)try{const S=dl(ah,"users",g.uid),A=await XR(S);if(A.exists()){const k=A.data();k&&Array.isArray(k.saved)&&u(I=>{const y=k.saved,v=new Map;y.forEach(V=>v.set(V.id,V)),I.forEach(V=>{v.has(V.id)||v.set(V.id,V)});const P=Array.from(v.values());try{localStorage.setItem(Tu,JSON.stringify(P))}catch{}return P})}}catch(S){console.warn("Failed to load saved from server",S)}});return()=>p()},[]),O.useEffect(()=>{try{localStorage.setItem(Tu,JSON.stringify(a))}catch{}},[a]);const c=O.useCallback((p,g,S)=>{n(p),typeof g=="string"&&s(g),typeof S=="number"&&o(S)},[]),h=O.useCallback(p=>{u(g=>{const A=g.find(k=>k.id===p.id)?g.filter(k=>k.id!==p.id):[p,...g];try{localStorage.setItem(Tu,JSON.stringify(A))}catch{}return(async()=>{try{const k=Ks().currentUser;if(!k)return;const I=dl(ah,"users",k.uid);await Cy(I,{saved:A},{merge:!0})}catch{}})(),A})},[]),f={lastResults:e,query:r,pageSize:i,setLastResults:c,saved:a,toggleSaved:h};return N.jsx(vC.Provider,{value:f,children:t})}function ed(){const t=O.useContext(vC);if(!t)throw new Error("useResults must be used within ResultsProvider");return t}function W6(t){try{return decodeURIComponent(t).replace(/\.txt$/i,"").replace(/[-_]/g," ")}catch{return t.replace(/\.txt$/i,"")}}function H6(){const[t,e]=O.useState(null),[n,r]=O.useState(null),[s,i]=O.useState(""),[o,a]=O.useState({});O.useEffect(()=>{let g=!1;async function S(){try{const A=await fetch(RS);if(!A.ok)throw new Error(`Failed to load manifest: ${A.status}`);const k=await A.json();if(g)return;e(k.slice()),k.forEach(I=>void u(I))}catch(A){if(g)return;r(String((A==null?void 0:A.message)||A))}}return S(),()=>{g=!0}},[]);async function u(g){const S=g.replace(/\.txt$/i,"");try{const A=Bi+encodeURIComponent(S+".json"),k=await fetch(A);if(k.ok){const I=await k.json(),y=Array.isArray(I.authors)?I.authors.join(", "):I.authors||I.author;let v=I.year||I.published||I.date;if(v&&typeof v=="string"){const V=v.match(/(19|20)\d{2}/);v=V?V[0]:v}const P=I.summary||I.abstract||void 0;a(V=>({...V||{},[g]:{authors:y,year:v,summary:P}}));return}}catch{}try{const A=Bi+encodeURIComponent(g),k=await fetch(A);if(!k.ok)return;const I=await k.text(),y=I.slice(0,1200),v=y.match(/^\s*(?:Authors?|Author)[:]\s*(.+)$/im),P=v?v[1].trim():void 0,V=y.match(/(19|20)\d{2}/),F=V?V[0]:void 0,_=I.slice(0,240).trim();(P||F||_)&&a(w=>({...w||{},[g]:{authors:P,year:F,summary:_}}))}catch{}}const c=O.useMemo(()=>{if(!t)return[];const g=t.map(A=>({file:A,title:W6(A),meta:o[A]}));if(g.sort((A,k)=>A.title.localeCompare(k.title,void 0,{sensitivity:"base"})),!s)return g;const S=s.toLowerCase();return g.filter(A=>A.title.toLowerCase().includes(S))},[t,s,o]),h=po(),{saved:f,toggleSaved:p}=ed();return N.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"0 auto",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",background:"#000",color:"#fff"},children:[N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[N.jsx("h2",{style:{margin:0},children:"Explore"}),N.jsx("input",{value:s,onChange:g=>i(g.target.value),placeholder:"Filter titles...",style:{padding:"8px 10px",borderRadius:8,border:"1px solid #333",minWidth:220,background:"transparent",color:"#fff"}})]}),n&&N.jsx("div",{style:{color:"red"},children:n}),!t&&!n&&N.jsx("div",{children:"Loading papers"}),t&&N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:c.map(g=>{var I,y,v,P,V,F,_;const S=g.file.replace(/\.txt$/i,""),A=f.find(w=>w.id===S),k=((I=g.meta)==null?void 0:I.summary)||"No summary available.";return N.jsxs("div",{onClick:()=>h(`/article/${encodeURIComponent(S)}`),role:"button",tabIndex:0,onKeyDown:w=>{w.key==="Enter"&&h(`/article/${encodeURIComponent(S)}`)},style:{position:"relative",padding:16,borderRadius:10,background:"#0b0b0b",border:"1px solid #151515",boxShadow:"0 1px 3px rgba(255,255,255,0.02)",cursor:"pointer",width:"100%"},children:[N.jsx("button",{onClick:w=>{w.stopPropagation();const E={id:S,title:g.title,excerpt:"",score:0,matches:0,content:"",url:Bi+encodeURIComponent(g.file)};p(E)},"aria-label":A?"Unsave":"Save",title:A?"Unsave":"Save",style:{position:"absolute",right:8,top:8,padding:6,borderRadius:10,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:A?"rgba(133,99,246,0.18)":"#222",border:A?"1px solid rgba(133,99,246,0.45)":"1px solid #444",boxShadow:A?"0 0 14px rgba(133,99,246,0.35)":"none",backdropFilter:A?"blur(4px)":"none",transition:"all 0.18s ease"},children:N.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"},children:N.jsx("path",{d:"M6 2C5.44772 2 5 2.44772 5 3V21.2929C5 21.6834 5.38604 21.8985 5.70711 21.7071L12 17.1213L18.2929 21.7071C18.6139 21.8985 19 21.6834 19 21.2929V3C19 2.44772 18.5523 2 18 2H6Z",fill:A?"rgba(133,99,246,0.35)":"transparent",stroke:A?"#8563f6":"#888",strokeWidth:"1.2"})})}),N.jsx("div",{style:{fontWeight:700,color:"#fff",paddingRight:44},children:g.title}),N.jsx("div",{style:{marginTop:8,fontSize:13,color:"#aaa",lineHeight:1.4},children:k}),N.jsx("div",{style:{marginTop:8,fontSize:12,color:"#ccc"},children:(y=g.meta)!=null&&y.authors||(v=g.meta)!=null&&v.year?N.jsxs(N.Fragment,{children:[((P=g.meta)==null?void 0:P.authors)&&N.jsx("span",{children:g.meta.authors}),((V=g.meta)==null?void 0:V.authors)&&((F=g.meta)==null?void 0:F.year)&&N.jsx("span",{children:"  "}),((_=g.meta)==null?void 0:_.year)&&N.jsx("span",{children:g.meta.year})]}):null})]},g.file)})})]})}const q6=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(!1),[o,a]=O.useState(""),[u,c]=O.useState("");O.useEffect(()=>{const f=qg(Cs,async p=>{if(!p){e(null),r(!1);return}try{const g=await XR(dl(ah,"users",p.uid));if(g.exists()){const S=g.data();e({displayName:S.displayName||p.displayName||"Unnamed User",email:S.email||p.email||"",bio:S.bio||"",photoURL:S.photoURL||p.photoURL||""}),a(S.displayName||p.displayName||""),c(S.bio||"")}else e({displayName:p.displayName||"Unnamed User",email:p.email||"",bio:"",photoURL:p.photoURL||""}),a(p.displayName||""),c("")}catch(g){console.error("Error loading user data:",g)}finally{r(!1)}});return()=>f()},[]);const h=async()=>{if(!Cs.currentUser)return alert("No user logged in");try{const f=dl(ah,"users",Cs.currentUser.uid);await Cy(f,{displayName:o,bio:u},{merge:!0}),e(p=>{var g;return p?{...p,displayName:o,bio:u}:{displayName:o,email:((g=Cs.currentUser)==null?void 0:g.email)||"",bio:u}}),i(!1),alert("Profile updated!")}catch(f){console.error("Error updating profile:",f),alert(`Failed to update profile: ${f.message}`)}};return n?N.jsx("div",{children:"Loading profile..."}):t?N.jsxs("div",{style:{maxWidth:450,margin:"2rem auto",padding:24,border:"1px solid #151515",borderRadius:8,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",background:"#0b0b0b",color:"#fff"},children:[t.photoURL&&N.jsx("img",{src:t.photoURL,alt:"Profile",style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:16}}),s?N.jsxs(N.Fragment,{children:[N.jsx("h2",{children:"Edit Profile"}),N.jsxs("div",{style:{marginBottom:12,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("label",{children:N.jsx("strong",{children:"Display Name"})}),N.jsx("input",{type:"text",value:o,onChange:f=>a(f.target.value),style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #222",marginTop:4,background:"#0b0b0b",color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"}})]}),N.jsxs("div",{style:{marginBottom:12},children:[N.jsx("label",{children:N.jsx("strong",{children:"Bio"})}),N.jsx("textarea",{value:u,onChange:f=>c(f.target.value),rows:4,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #222",marginTop:4,resize:"none",background:"#0b0b0b",color:"#fff"}})]}),N.jsx("button",{onClick:h,style:{padding:"8px 16px",borderRadius:8,border:"none",background:"#2e8b57",color:"white",cursor:"pointer",marginRight:8},children:"Save"}),N.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",borderRadius:8,border:"1px solid #333",background:"#0b0b0b",color:"#fff",cursor:"pointer"},children:"Cancel"})]}):N.jsxs(N.Fragment,{children:[N.jsx("h2",{style:{marginTop:0},children:t.displayName||"Unnamed User"}),N.jsxs("p",{children:[N.jsx("strong",{children:"Email:"})," ",t.email]}),t.bio&&N.jsxs("p",{children:[N.jsx("strong",{children:"Bio:"})," ",t.bio]}),N.jsxs("div",{style:{marginTop:16},children:[N.jsx("button",{onClick:()=>i(!0),style:{background:"rgba(255,255,255,0.05)",color:"#fde8ff",border:"1px solid rgba(255,255,255,0.12)",padding:"8px 12px",borderRadius:10,cursor:"pointer",marginRight:8,backdropFilter:"blur(6px)",boxShadow:"0 2px 10px rgba(0,0,0,0.35)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Edit Profile"}),N.jsx("button",{onClick:async()=>{try{await qL(Cs),window.location.href="/"}catch(f){console.error("Error signing out:",f)}},style:{background:"rgba(229,57,53,0.18)",color:"#ffb4b2",border:"1px solid rgba(229,57,53,0.45)",padding:"8px 12px",borderRadius:10,cursor:"pointer",backdropFilter:"blur(6px)",boxShadow:"0 2px 12px rgba(229,57,53,0.25)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Logout"})]})]})]}):N.jsx("div",{children:"No user is signed in."})};function K6(){const{saved:t,toggleSaved:e}=ed(),n=po();return!t||t.length===0?N.jsxs("div",{style:{textAlign:"center",marginTop:40,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{children:"Saved"}),N.jsx("p",{children:"No saved articles yet. What will you explore? "}),N.jsx(mo,{to:"/",style:{display:"inline-block",marginTop:12,padding:"8px 14px",background:"rgba(133,99,246,0.18)",color:"#f5ecff",borderRadius:10,textDecoration:"none",border:"1px solid rgba(133,99,246,0.45)",boxShadow:"0 0 16px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)"},children:"Go search papers"})]}):N.jsxs("div",{style:{padding:20,maxWidth:900,margin:"0 auto",color:"#fff",background:"#000",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{children:"Saved"}),N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:t.map(r=>N.jsx("div",{role:"button",tabIndex:0,onClick:()=>n(`/article/${encodeURIComponent(r.id)}`),onKeyDown:s=>{s.key==="Enter"&&n(`/article/${encodeURIComponent(r.id)}`)},style:{padding:16,borderRadius:10,background:"#0b0b0b",border:"1px solid #151515",boxShadow:"0 1px 3px rgba(255,255,255,0.02)",cursor:"pointer",width:"100%"},children:N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[N.jsxs("div",{style:{flex:1},children:[N.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:r.title}),N.jsx("div",{style:{whiteSpace:"pre-wrap",marginTop:8,color:"#ccc"},children:r.excerpt})]}),N.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:N.jsx("button",{onClick:s=>{s.stopPropagation(),e(r)},style:{background:"rgba(229,57,53,0.18)",border:"1px solid rgba(229,57,53,0.45)",color:"#ffb4b2",padding:"6px 12px",borderRadius:10,cursor:"pointer",boxShadow:"0 0 16px rgba(229,57,53,0.3)",backdropFilter:"blur(4px)",transition:"all 0.2s ease"},children:"Remove"})})]})},r.id))})]})}function If(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Qo(t){return t.replace(/[&<>\"]/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return e}})}function lE(t){return t.toLowerCase().split(/[^a-z0-9]+/g).filter(Boolean)}function uE(t,e){if(!e||!t)return Qo(t);const n=/^".+"$/.test(e)?e.slice(1,-1):e;let r=Qo(t);const s=If(n);if(new RegExp(s,"ig").test(t)){r=Qo(t).replace(new RegExp(s,"ig"),c=>`<mark>${c}</mark>`);const u=lE(e).filter(c=>!n.toLowerCase().includes(c));if(u.length){const c=new RegExp("("+u.map(If).join("|")+")","ig");r=r.replace(c,h=>`<mark>${h}</mark>`)}return r}const o=lE(e);if(o.length===0)return Qo(t);const a=new RegExp("("+o.map(If).join("|")+")","ig");return r=Qo(t).replace(a,u=>`<mark>${u}</mark>`),r}function G6(){const t=Qn(),e=po(),{lastResults:n,query:r,pageSize:s,saved:i,toggleSaved:o}=ed(),a=t.state||{},u=a.results??n??[],c=a.query??r??"",[h,f]=O.useState(u),[p,g]=O.useState(1),[S,A]=O.useState(a.pageSize??s??10),[k,I]=O.useState(c),[y,v]=O.useState(c);function P(_){const w=_.trim();if(v(w),!w){f(u),g(1);return}try{const C=new ir(u,{keys:[{name:"title",weight:.7},{name:"excerpt",weight:.3}],includeScore:!0,threshold:.45,ignoreLocation:!0,minMatchCharLength:2}).search(w,{limit:1e3}).map(b=>({...b.item}));f(C),g(1)}catch{const R=w.toLowerCase(),C=u.filter(b=>b.title.toLowerCase().includes(R)||(b.excerpt||"").toLowerCase().includes(R));f(C),g(1)}}const V=Math.max(1,Math.ceil(h.length/S)),F=O.useMemo(()=>h.slice((p-1)*S,p*S),[h,p,S]);return N.jsxs("div",{style:{padding:20,maxWidth:1e3,margin:"0 auto",color:"#fff",background:"#000",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[N.jsx("h2",{style:{margin:0},children:"Results"}),N.jsxs("div",{children:[N.jsx("button",{onClick:()=>e(-1),style:{marginRight:8,background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Back"}),N.jsxs("label",{style:{fontSize:13,color:"#ccc"},children:["Page size:",N.jsx("select",{value:S,onChange:_=>{A(Number(_.target.value)),g(1)},style:{marginLeft:6,background:"#0b0b0b",color:"#fff",border:"1px solid #222",padding:"6px 8px",borderRadius:6},children:[5,10,20,50].map(_=>N.jsx("option",{value:_,children:_},_))})]})]})]}),N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[N.jsxs("div",{style:{color:"#ccc"},children:[h.length," result",h.length!==1?"s":""," ",y?N.jsxs(N.Fragment,{children:['for "',y,'"']}):null]}),N.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[N.jsx("input",{value:k,onChange:_=>I(_.target.value),placeholder:"refine query",style:{padding:"8px 10px",borderRadius:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff",outline:"none"},onKeyDown:_=>{_.key==="Enter"&&P(k)}}),N.jsx("button",{onClick:()=>P(k),style:{background:"rgba(133,99,246,0.18)",color:"#f5ecff",border:"1px solid rgba(133,99,246,0.45)",padding:"8px 12px",borderRadius:10,cursor:"pointer",boxShadow:"0 0 16px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)"},children:"Search"})]})]}),N.jsxs("div",{children:[F.length===0&&N.jsx("div",{style:{color:"#888"},children:"No results on this page."}),F.map(_=>{const w=i.find(E=>E.id===_.id);return N.jsx("div",{style:{padding:16,borderRadius:10,boxShadow:"0 1px 3px rgba(255,255,255,0.02)",border:"1px solid #151515",marginBottom:12,background:"#0b0b0b"},children:N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[N.jsxs("div",{style:{flex:1},children:[N.jsx("div",{style:{fontSize:18,fontWeight:700,marginBottom:6},children:N.jsx(mo,{to:`/article/${encodeURIComponent(_.id)}`,style:{textDecoration:"none",color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:N.jsx("span",{dangerouslySetInnerHTML:{__html:uE(_.title,y)}})})}),N.jsx("div",{style:{fontSize:13,color:"#ccc",marginBottom:8},children:_.matches?`${_.matches} match(es)`:""}),N.jsx("div",{style:{whiteSpace:"pre-wrap",color:"#ccc",lineHeight:1.4},children:N.jsx("span",{dangerouslySetInnerHTML:{__html:uE(_.excerpt,y)}})})]}),N.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:[N.jsxs("div",{style:{fontSize:12,color:"#bbb"},children:["score: ",_.score]}),N.jsx("div",{children:N.jsx("button",{onClick:()=>o(_),style:{background:w?"rgba(133,99,246,0.18)":"transparent",color:w?"#f5ecff":"#fff",border:w?"1px solid rgba(133,99,246,0.45)":"1px solid #333",padding:"8px 12px",borderRadius:10,cursor:"pointer",fontWeight:600,boxShadow:w?"0 0 16px rgba(133,99,246,0.35)":"none",backdropFilter:w?"blur(4px)":"none"},children:w?"Saved":"Save"})})]})]})},_.id)})]}),N.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:16,flexWrap:"wrap"},children:[N.jsx("button",{onClick:()=>g(1),disabled:p===1,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" First"}),N.jsx("button",{onClick:()=>g(_=>Math.max(1,_-1)),disabled:p===1,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:" Prev"}),N.jsxs("div",{style:{padding:"6px 10px",border:"1px solid #151515",borderRadius:6,minWidth:120,textAlign:"center",background:"#0b0b0b",color:"#fff"},children:["Page ",p," of ",V]}),N.jsx("button",{onClick:()=>g(_=>Math.min(V,_+1)),disabled:p===V,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Next "}),N.jsx("button",{onClick:()=>g(V),disabled:p===V,style:{background:"transparent",border:"1px solid #333",color:"#fff",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:"Last "})]})]})}async function Sf(t,e){var s,i,o,a;try{const u=localStorage.getItem("openai_api_key");console.log("Current API Key:",u);const c=new ue({apiKey:u,dangerouslyAllowBrowser:!0});var n="",r="";switch(e){case"classify":n="Classify whether the user is asking a question or just generally searching for a specific paper. If the user is asking a question, return, in all lowercase, 'question'. If the user is searching for a specific paper, return, in all lowercase, 'search'.",r=t;break;case"summarize":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="Summarize the following paper(s): "+t;break;case"question":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="The user asked: "+t+`
 These are the paper(s) in question: [refer to paper(s)]`;break;case"research":n="You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",r="The user asked: "+t+`
 I am now going to give you the contents of several academic papers that are relevant to this topic. Use ONLY KNOWLEDGE FROM THE FOLLOWING PAPERS to answer the question. Every piece of information you get from the papers MUST BE CITED with the title of cited paper in parentheses at the end of the relevant sentences. Thank you very much.`;break}const h=await c.chat.completions.create({model:"gpt-5",messages:[{role:"system",content:n},{role:"user",content:r}]});return console.log(((i=(s=h.choices[0].message)==null?void 0:s.content)==null?void 0:i.trim())||""),((a=(o=h.choices[0].message)==null?void 0:o.content)==null?void 0:a.trim())||""}catch(u){console.error("Error calling GPT:",u.message||u)}return"ERROR"}function Q6(t,e=12e3){const n=[];let r=0;for(;r<t.length;){let s=Math.min(r+e,t.length);if(s<t.length){const i=t.lastIndexOf(`
`,s);i>r+Math.floor(e*.6)&&(s=i)}n.push(t.slice(r,s)),r=s}return n}async function Y6(t){if(t.length<=12e3)return await Sf(t,"summarize");const n=Q6(t,12e3),r=[];for(let i=0;i<n.length;i++){const o=`

(Chunk ${i+1}/${n.length})
${n[i]}`;r.push(await Sf(o,"summarize"))}const s=r.map((i,o)=>`Chunk ${o+1}:
${i}`).join(`

---

`);return await Sf(s,"summarize")}function X6(t,e){const n=(t.split(/\r?\n/).find(r=>r.trim().length>0)||"").trim();return n?n.replace(/\s*[-|]\s*(PMC|PubMed( Central)?).*/i,"").replace(/\s+/g," ").trim():e}function J6(t){const e=(t.split(/\r?\n/).find(n=>n.trim().length>0)||"").trim();return e?/^https?:\/\//i.test(e)?e:/^[\w.-]+\.[a-z]{2,}([\/?#].*)?$/i.test(e)?"https://"+e:"":""}async function cE(t,e){let n=await fetch(t+encodeURIComponent(e));if(n.ok||(n=await fetch(t+e)),!n.ok)throw new Error(`Fetch failed (${n.status}) for ${e}`);return{text:await n.text(),url:n.url}}function Z6(){const{id:t=""}=dN(),[e,n]=O.useState(null),[r,s]=O.useState(!0),[i,o]=O.useState(null),[a,u]=O.useState(!1),[c,h]=O.useState("");O.useEffect(()=>{async function p(g){try{s(!0),o(null),h("");const S=decodeURIComponent(g),A=/\.[a-z0-9]+$/i.test(S)?S:`${S}.txt`,[k,I]=await Promise.all([cE(Bi,A),jw?cE(jw,A).catch(()=>({text:"",url:""})):Promise.resolve({text:"",url:""})]),y=X6(k.text,S),v=J6(I.text)||k.url;n({id:S,title:y,text:k.text,sourceUrl:v}),document.title=`${y}  AstroPhoenix`}catch(S){o((S==null?void 0:S.message)??"Unknown error")}finally{s(!1)}}t?p(t):(o("Missing article id."),s(!1))},[t]);async function f(){if(e!=null&&e.text)try{u(!0);const p=await Y6(e.text);h(p.trim())}catch(p){h(""),o(`Summarization failed: ${(p==null?void 0:p.message)||p}`)}finally{u(!1)}}return N.jsx("div",{style:{minHeight:"100vh",padding:"32px 20px 80px",display:"flex",justifyContent:"center",background:"#000",color:"#fff",fontFamily:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif"},children:N.jsxs("div",{style:{width:"100%",maxWidth:960},children:[N.jsx("div",{style:{marginBottom:20},children:N.jsx(mo,{to:"/",style:{display:"inline-flex",alignItems:"center",gap:8,padding:"10px 18px",borderRadius:999,textDecoration:"none",background:"rgba(133,99,246,0.18)",border:"1px solid rgba(133,99,246,0.45)",color:"#f8efff",fontWeight:600,letterSpacing:.4,boxShadow:"0 0 16px rgba(133,99,246,0.32)",backdropFilter:"blur(6px)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.5)",p.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:p=>{p.currentTarget.style.boxShadow="0 0 16px rgba(133,99,246,0.32)",p.currentTarget.style.transform="translateY(0)"},onFocus:p=>{p.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.5)",p.currentTarget.style.transform="translateY(-1px)"},onBlur:p=>{p.currentTarget.style.boxShadow="0 0 16px rgba(133,99,246,0.32)",p.currentTarget.style.transform="translateY(0)"},children:" Back to search"})}),r&&N.jsx("div",{children:"Loading"}),i&&N.jsx("div",{style:{color:"red",whiteSpace:"pre-wrap"},children:i}),e&&N.jsxs("article",{style:{background:"#0b0b0b",borderRadius:16,boxShadow:"0 2px 8px rgba(255,255,255,0.03)",padding:"40px 60px 96px",maxWidth:900,margin:"0 auto",border:"1px solid #151515",position:"relative",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h1",{style:{marginTop:0,color:"#fff",letterSpacing:.3},children:e.title}),N.jsx("div",{style:{marginTop:16,display:"flex",gap:12},children:N.jsx("button",{onClick:f,disabled:a,children:a?"Summarizing":"Summarize"})}),c&&N.jsx("section",{style:{marginTop:20,padding:"16px 18px",background:"#121212",border:"1px solid #222",borderRadius:12,whiteSpace:"pre-wrap",color:"#ddd"},children:c}),N.jsx("a",{href:e.sourceUrl,target:"_blank",rel:"noreferrer",style:{position:"absolute",right:32,bottom:32,padding:"10px 20px",borderRadius:999,textDecoration:"none",background:"rgba(133,99,246,0.2)",border:"1px solid rgba(133,99,246,0.45)",color:"#f8efff",fontWeight:600,letterSpacing:.4,boxShadow:"0 0 20px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.boxShadow="0 0 24px rgba(133,99,246,0.55)",p.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:p=>{p.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.35)",p.currentTarget.style.transform="translateY(0)"},onFocus:p=>{p.currentTarget.style.boxShadow="0 0 24px rgba(133,99,246,0.55)",p.currentTarget.style.transform="translateY(-2px)"},onBlur:p=>{p.currentTarget.style.boxShadow="0 0 20px rgba(133,99,246,0.35)",p.currentTarget.style.transform="translateY(0)"},children:"View Source "})]})]})})}const e$={apiKey:"AIzaSyBKX0eIL-ja9zHCsgi_UwlD8JlByY96UB8",authDomain:"astrophoenix2-3b620.firebaseapp.com",projectId:"astrophoenix2-3b620",storageBucket:"astrophoenix2-3b620.firebasestorage.app",messagingSenderId:"335448449685",appId:"1:335448449685:web:fe31fc84f0313fa075319c",measurementId:"G-C9M23TNWHD"},EC=Fg(e$),hE=Ks(EC),t$=UR(EC),n$=()=>{const[t,e]=O.useState(!0),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(null),u=async c=>{c.preventDefault(),a(null);try{if(t)await zL(hE,n,s),alert("Logged in ");else{const f=(await BL(hE,n,s)).user;await Cy(dl(t$,"users",f.uid),{email:f.email,displayName:f.displayName||"",photoURL:f.photoURL||"",bio:"",createdAt:new Date().toISOString()}),alert("Account created and user data saved!")}}catch(h){a(h.message)}};return N.jsxs("div",{style:{maxWidth:400,margin:"2rem auto",background:"#0b0b0b",padding:24,border:"1px solid #151515",borderRadius:8,color:"#fff",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:[N.jsx("h2",{style:{marginTop:0},children:t?"Login":"Sign Up"}),N.jsxs("form",{onSubmit:u,children:[N.jsxs("div",{children:[N.jsx("label",{children:"Email:"}),N.jsx("input",{type:"email",value:n,required:!0,onChange:c=>r(c.target.value),style:{width:"100%",marginBottom:12,borderRadius:7,padding:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff"}})]}),N.jsxs("div",{children:[N.jsx("label",{children:"Password:"}),N.jsx("input",{type:"password",value:s,required:!0,onChange:c=>i(c.target.value),style:{width:"100%",marginBottom:12,borderRadius:7,padding:8,border:"1px solid #222",background:"#0b0b0b",color:"#fff"}})]}),o&&N.jsx("div",{style:{color:"red",marginBottom:12},children:o}),N.jsx("button",{type:"submit",style:{width:"100%",marginTop:20,marginBottom:20,padding:12,background:"rgba(133,99,246,0.18)",border:"1px solid rgba(133,99,246,0.45)",borderRadius:10,cursor:"pointer",color:"#f5ecff",boxShadow:"0 0 18px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:t?"Login":"Sign Up"})]}),N.jsx("div",{style:{marginTop:16,textAlign:"center"},children:t?N.jsxs(N.Fragment,{children:["Don't have an account?"," ",N.jsx("button",{onClick:()=>e(!1),style:{color:"#8563f6",background:"none",border:"none",cursor:"pointer",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Sign Up"})]}):N.jsxs(N.Fragment,{children:["Already have an account?"," ",N.jsx("button",{onClick:()=>e(!0),style:{color:"#8563f6",background:"none",border:"none",cursor:"pointer",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:"Login"})]})})]})},IC=O.createContext(void 0);function r$({children:t}){const[e,n]=O.useState(localStorage.getItem("openai_api_key")),r=s=>{n(s),s?localStorage.setItem("openai_api_key",s):localStorage.removeItem("openai_api_key")};return N.jsx(IC.Provider,{value:{apiKey:e,setApiKey:r},children:t})}function s$(){const t=O.useContext(IC);if(!t)throw new Error("useApiKey must be used within ApiKeyProvider");return t}function dE(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tf(t){return t.toLowerCase().split(/[^a-z0-9]+/g).filter(Boolean)}function i$(){const t=O.useRef(null);return O.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;let r=0;const s=Array.from({length:200},()=>({x:Math.random(),y:Math.random(),size:Math.random()*1.4+.6,twinkle:Math.random()*Math.PI*2,twinkleSpeed:.006+Math.random()*.04})),i=[],o=()=>{const h=Math.random()<.5?-.1:1.1,f=h,p=.05+Math.random()*.4,g=.018+Math.random()*.012,S=h<0?Math.random()*.4-.2:Math.PI-(Math.random()*.4-.2);i.push({x:f,y:p,vx:g*Math.cos(S),vy:g*Math.sin(S),life:120+Math.random()*40,length:.1+Math.random()*.05,opacity:.9})};let a=Math.random()*Math.PI*2;const u=()=>{const{width:h,height:f}=e;a+=.0025;const p=n.createLinearGradient(0,0,0,f);p.addColorStop(0,"#05010f"),p.addColorStop(.55,"#020007"),p.addColorStop(1,"#000"),n.fillStyle=p,n.fillRect(0,0,h,f);const g=2;for(let S=0;S<g;S++){const A=a*(.16+S*.045)+S*2,k=.2+(Math.sin(A)+1)*.25,I=h*(.25+S*.35)+Math.sin(A*.8)*h*.08,y=f*(.28+Math.cos(A*.6)*.06),v=n.createRadialGradient(I,y,h*.01,I,y,h*.38);v.addColorStop(0,"rgba(130,90,230,0.2)"),v.addColorStop(.35,"rgba(90,60,180,0.12)"),v.addColorStop(.7,"rgba(40,30,120,0.06)"),v.addColorStop(1,"rgba(0,0,0,0)"),n.globalAlpha=k,n.fillStyle=v,n.fillRect(0,0,h,f)}n.globalAlpha=1,s.forEach(S=>{S.twinkle+=S.twinkleSpeed;const A=.2+Math.abs(Math.sin(S.twinkle))*.8;n.globalAlpha=A;const k=S.x*h,I=S.y*f;n.fillStyle="#fff",n.beginPath(),n.arc(k,I,S.size,0,Math.PI*2),n.fill()}),n.globalAlpha=1,i.length<2&&Math.random()<.01&&o();for(let S=i.length-1;S>=0;S--){const A=i[S];A.x+=A.vx,A.y+=A.vy,A.life-=1,A.opacity=Math.max(0,A.opacity-.006);const k=A.x*h,I=A.y*f,y=k-A.vx*h*(A.length*18),v=I-A.vy*f*(A.length*18);n.strokeStyle=`rgba(255,255,255,${.65*A.opacity})`,n.lineWidth=1.2,n.beginPath(),n.moveTo(y,v),n.lineTo(k,I),n.stroke(),n.fillStyle=`rgba(255,255,255,${.85*A.opacity})`,n.beginPath(),n.arc(k,I,1.6,0,Math.PI*2),n.fill(),(A.life<=0||k<-50||k>h+50||I<-50||I>f+50)&&i.splice(S,1)}r=requestAnimationFrame(u)},c=()=>{const h=window.devicePixelRatio||1;e.width=window.innerWidth*h,e.height=window.innerHeight*h,n.setTransform(h,0,0,h,0,0),u()};return c(),window.addEventListener("resize",c),()=>{cancelAnimationFrame(r),window.removeEventListener("resize",c)}},[]),N.jsx("canvas",{ref:t,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none"}})}function o$(){const t=Qn();Ks();const e=[{path:"/",label:"Search"},{path:"/explore",label:"Explore"},{path:"/saved",label:"Saved"},{path:"/profile",label:"Profile"}];return N.jsx("nav",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:24,background:"linear-gradient(90deg, rgba(186,163,255,0.15), rgba(133,99,246,0.2))",color:"#fff",padding:"10px 16px",position:"sticky",top:0,zIndex:100,borderRadius:14,margin:10,border:"1px solid rgba(133,99,246,0.25)",boxShadow:"0 6px 18px rgba(0,0,0,0.35)",backdropFilter:"blur(10px)",textShadow:"0 0 6px rgba(133,99,246,0.25)",fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace",transition:"box-shadow 0.2s ease"},children:N.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:e.map(n=>N.jsx(mo,{to:n.path,style:{textDecoration:"none",color:t.pathname===n.path?"#fff":"#fde8ff",fontWeight:t.pathname===n.path?"700":"600",fontSize:15,padding:"6px 12px",borderRadius:999,background:t.pathname===n.path?"rgba(0,0,0,0.45)":"transparent",boxShadow:t.pathname===n.path?"0 0 12px rgba(0,0,0,0.35)":"none",transition:"all 0.15s ease"},children:n.label},n.path))})})}function a$(){const{apiKey:t,setApiKey:e}=s$(),n=po(),{setLastResults:r}=ed(),[s,i]=O.useState("idle"),[o,a]=O.useState({done:0,total:0}),u=O.useRef(new Map),c=O.useRef(new Map),h=O.useRef(null),[f,p]=O.useState(""),[g,S]=O.useState([]),[A,k]=O.useState(null),[I,y]=O.useState(1),[v,P]=O.useState(10),[V,F]=O.useState("search");O.useEffect(()=>{h.current=new ir([],{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,useExtendedSearch:!0,threshold:.35,ignoreLocation:!0,minMatchCharLength:2});async function E(){i("indexing");try{let R=function(){return new Promise(async K=>{if(Fe.length===0||W.length===0)return K();const G=Fe.shift(),ye=W.shift();Q++;try{const $e=encodeURIComponent(G);let Ie=await fetch(Bi+$e);if(Ie.ok){const Zt=await Ie.text();C({id:G,title:G.replace(/\.txt$/i,""),content:Zt,url:ye})}else if(console.log("fallback"),Ie=await fetch(Bi+G),!Ie.ok)console.warn("Failed to fetch",G,Ie.status),C({id:G,title:G.replace(/\.txt$/i,""),content:"",url:ye});else{const Zt=await Ie.text();C({id:G,title:G.replace(/\.txt$/i,""),content:Zt,url:ye})}}catch($e){console.warn("Error fetching",G,$e),C({id:G,title:G.replace(/\.txt$/i,""),content:"",url:ye})}finally{se++,Q--,a({done:se,total:x.length}),Fe.length?setTimeout(()=>R().then(()=>K()),0):K()}})},C=function(K){var ye;u.current.set(K.id,K),new Set([...Tf(K.title),...Tf(K.content)]).forEach($e=>{let Ie=c.current.get($e);Ie||(Ie=new Set,c.current.set($e,Ie)),Ie.add(K.id)});try{(ye=h.current)==null||ye.add(K)}catch{if(h.current){const Ie=Array.from(u.current.values());h.current=new ir(Ie,{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,useExtendedSearch:!0,threshold:.35,ignoreLocation:!0,minMatchCharLength:2})}}};const b=await fetch(RS);if(!b.ok)throw new Error("Failed to fetch manifest: "+b.status);const x=await b.json();a({done:0,total:x.length});const ce=await fetch("https://raw.githubusercontent.com/AwesomeCoder412412/stupid/refs/heads/main/output.json");if(!ce.ok)throw new Error("Failed to fetch manifest urls: "+b.status);const Ee=await ce.json(),Ut=Math.min(8,Math.max(2,Math.floor(navigator.hardwareConcurrency||4))),Fe=x.slice(),W=Ee.slice();let Q=0,se=0;const _e=[];for(let K=0;K<Ut;K++)_e.push(R());await Promise.all(_e),i("ready")}catch(R){k(String(R.message||R)),i("error")}}E()},[]),O.useEffect(()=>{y(1)},[v,f]);async function _(E){var _e;if(E=E.trim(),p(E),S([]),!E)return;const C=/^".+"$/.test(E)?E.slice(1,-1).toLowerCase():E.toLowerCase(),b=u.current,x=c.current,ce=h.current,Ee=new Map;for(const[K,G]of b){const ye=G.title.toLowerCase();ye.includes(C)&&Ee.set(K,{id:K,title:G.title,excerpt:G.title,score:0,matches:(ye.match(new RegExp(dE(C),"g"))||[]).length,content:G.content,url:G.url})}for(const[K,G]of b){if(Ee.has(K))continue;const ye=G.content.toLowerCase(),$e=ye.indexOf(C);$e!==-1&&Ee.set(K,{id:K,title:G.title,excerpt:w(G.content,$e,C.length),score:10,matches:(ye.match(new RegExp(dE(C),"g"))||[]).length,content:G.content,url:G.url})}const Ut=Tf(E);let Fe=null;if(Ut.length>0)for(const K of Ut){const G=x.get(K);if(!G){Fe=new Set;break}if(Fe===null)Fe=new Set(G);else for(const ye of Array.from(Fe))G.has(ye)||Fe.delete(ye);if(Fe.size===0)break}Fe===null&&(Fe=new Set(b.keys()));for(const K of Ee.keys())Fe.delete(K);let W=[];if(Fe.size>0){const K=Array.from(Fe).map(G=>b.get(G));K.length<=600?W=new ir(K,{keys:[{name:"title",weight:.7},{name:"content",weight:.3}],includeScore:!0,threshold:.45,ignoreLocation:!0,minMatchCharLength:2}).search(E,{limit:500}):W=ce?ce.search(E,{limit:500}):[]}for(const K of W){const G=K.item;if(Ee.has(G.id))continue;const ye=Math.round((K.score??1)*100)+50,$e=G.content.toLowerCase().indexOf(E.toLowerCase()),Ie=$e!==-1?w(G.content,$e,E.length):G.content.slice(0,250)+(G.content.length>250?"":"");Ee.set(G.id,{id:G.id,title:G.title,excerpt:Ie,score:ye,matches:0,content:G.content,url:G.url})}let Q=Array.from(Ee.values());Q.sort((K,G)=>K.score!==G.score?K.score-G.score:G.matches!==K.matches?G.matches-K.matches:K.title.localeCompare(G.title));const se=new Map;if(E.includes("?")){let K="The user asked: "+E+`
 I am now going to give you the contents of several academic papers that are relevant to this topic. Use ONLY KNOWLEDGE FROM THE FOLLOWING PAPERS to answer the user's question. Every piece of information you get from the papers MUST BE CITED with the title of cited paper in parentheses at the end of the relevant sentences. Thank you very much. BEGIN PAPERS: `,G=0;for(;G<3&&G<Q.length;)console.log("On paper "+G),K=K+"PAPER TITLE: "+Q[G].title+" PAPER CONTENT: "+await Iv("","Please summarize the key statistics and points in this paper for another AI to be able to quickly read and get as much infomration out of this as possible: "+((_e=u.current.get(Q[G].id))==null?void 0:_e.content))+"END PAPER CONTENT. ",G++;se.set("1",{id:"AI",title:"AI Summary",excerpt:await Iv("You are a concise, factual assistant. Your job is to summarize and help people learn about papers on Space Biology.",K)+`
 Papers Cited: `+Q[0].title,score:0,matches:1,content:"",url:""}),Q=Array.from(se.values())}S(Q),y(1);try{r(Q,E,v)}catch{}try{n("/results")}catch{}}function w(E,R,C=20,b=220){const x=Math.max(0,R-Math.floor(b/2)),ce=E.slice(x,Math.min(E.length,x+b));return(x>0?"":"")+ce+(x+b<E.length?"":"")}return Math.max(1,Math.ceil(g.length/v)),g.slice((I-1)*v,I*v),N.jsxs(N.Fragment,{children:[N.jsx(i$,{}),N.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 120px)",padding:"80px 16px 60px",width:"100%",boxSizing:"border-box",background:"transparent",color:"#fff",position:"relative",zIndex:1,fontFamily:"Lucida Console, Lucida Sans Typewriter, monaco, Bitstream Vera Sans Mono, monospace"},children:N.jsxs("div",{style:{textAlign:"center",padding:"40px 24px",width:"100%",maxWidth:960,position:"relative",margin:"0 auto",background:"#0b0b0b",zIndex:10,boxShadow:"0 0 30px rgba(0,0,0,0.5), 0 0 24px rgba(255,255,255,0.08)",borderRadius:50,border:"1px solid #151515"},children:[N.jsx("h1",{style:{margin:"0 0 8px",color:"#fff",letterSpacing:10},children:"AstroPhoenix"}),N.jsx("p",{style:{color:"#ccc",margin:"0 0 16px"},children:"Search keywords and research questions across all 608 papers."}),A&&N.jsx("div",{style:{color:"red",marginBottom:12},children:A}),N.jsxs("div",{style:{marginBottom:12,color:"#ccc"},children:[N.jsx("strong",{children:"Status:"})," ",s,s==="indexing"&&N.jsxs("span",{children:[" "," downloaded ",o.done+14,"/",o.total+14," (",Math.round(o.done/Math.max(1,o.total)*100),"%)"]}),s==="ready"&&N.jsxs("span",{children:["  indexed ",o.total+14," documents"]})]}),N.jsxs("div",{style:{marginBottom:16},children:[N.jsx("input",{type:"password",value:t||"",onChange:E=>e(E.target.value),placeholder:"Enter your OpenAI API key",style:{padding:"10px 14px",borderRadius:9999,border:"1px solid #333",background:"transparent",color:"#fff",width:"100%",maxWidth:400,textAlign:"center",outline:"none",boxShadow:"none"}}),N.jsx("div",{style:{fontSize:12,color:"#aaa",marginTop:6},children:"Your API key is stored locally in your browser."})]}),N.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:[N.jsx("input",{value:f,onChange:E=>p(E.target.value),onKeyDown:E=>E.key==="Enter"&&_(f),placeholder:'Enter keywords or exact phrase (use "quotes" for phrase)',style:{flex:"1 1 300px",padding:"10px 14px",minWidth:300,borderRadius:9999,border:"1px solid #333",background:"transparent",color:"#fff",outline:"none",transition:"all 0.2s ease",boxShadow:"none"},onFocus:E=>E.target.style.border="1px solid #444",onBlur:E=>E.target.style.border="1px solid #222"}),N.jsx("button",{onClick:()=>_(f),disabled:!f||s==="indexing"&&o.done===0,style:{borderRadius:9999,padding:"14px 26px",cursor:"pointer",background:"rgba(133,99,246,0.2)",border:"1px solid rgba(133,99,246,0.45)",color:"#f5ecff",fontWeight:600,letterSpacing:.5,boxShadow:"0 0 18px rgba(133,99,246,0.35)",backdropFilter:"blur(6px)",transition:"all 0.2s ease"},children:"Search"}),N.jsx("button",{onClick:()=>_(f),style:{borderRadius:9999,padding:"10px 14px",cursor:"pointer",background:"rgba(255,255,255,0.04)",border:"1px solid #333",color:"#ccc",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,lineHeight:1,width:48,height:48,boxShadow:"0 0 10px rgba(0,0,0,0.35)",transition:"all 0.2s ease"},"aria-label":"Refresh results",children:""})]})]})})]})}function l$({children:t}){return Ks().currentUser?t:N.jsx(RN,{to:"/",replace:!0})}function u$(){const[t,e]=O.useState(null),[n,r]=O.useState(!0);if(O.useEffect(()=>{const i=Ks(),o=qg(i,a=>{e(a),r(!1)});return()=>o()},[]),n)return N.jsx("div",{children:"Loading..."});return N.jsx("div",{children:t?N.jsx(s,{}):N.jsx(n$,{})});function s(){return N.jsx(r$,{children:N.jsx(z6,{children:N.jsxs(XN,{children:[N.jsx(o$,{}),N.jsxs(kN,{children:[N.jsx(Ss,{path:"/",element:N.jsx(a$,{})}),N.jsx(Ss,{path:"/explore",element:N.jsx(H6,{})}),N.jsx(Ss,{path:"/results",element:N.jsx(G6,{})}),N.jsx(Ss,{path:"/saved",element:N.jsx(K6,{})}),N.jsx(Ss,{path:"/profile",element:N.jsx(l$,{children:N.jsx(q6,{})})}),N.jsx(Ss,{path:"/article/:id",element:N.jsx(Z6,{})})]})]})})})}}const c$=AS(document.getElementById("root"));c$.render(N.jsx(u$,{}));
